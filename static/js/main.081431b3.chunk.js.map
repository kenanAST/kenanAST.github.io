{"version":3,"sources":["constants/FileTypes.js","helpers/file.js","constants/CommonEnum.js","index.less","serviceWorker.js","constants/ActionTypes.js","reducers/LoginPage.js","reducers/RegisterPage.js","reducers/ForgotPasswordPage.js","reducers/TicketPage.js","reducers/StaffList.js","reducers/SettingsPage.js","reducers/StaffDetailsPage.js","reducers/MessengerIntegrationPage.js","reducers/ReportPage.js","store.js","config/index.js","config/environment/development.js","config/environment/testing.js","config/environment/production.js","helpers/auth.js","layouts/basic-layout.js","components/drawer/index.js","helpers/local_storage.js","components/header/index.js","helpers/general.js","layouts/navigation-layout.js","helpers/redux_form.js","containers/LoginPage/LoginPage.js","helpers/api/request.js","helpers/api/index.js","helpers/api/admin/accounts.js","helpers/api/admin/twilioconnections.js","helpers/api/admin/connections.js","helpers/api/admin/tickets.js","helpers/api/admin/messages.js","helpers/api/admin/users.js","helpers/api/admin/contacts.js","helpers/api/staff/tickets.js","helpers/api/staff/messages.js","helpers/api/staff/users.js","helpers/api/staff/contacts.js","helpers/api/assets.js","helpers/api/auth.js","containers/LoginPage/index.js","actions/LoginPage.js","components/loading/index.js","containers/LogoutPage/LogoutPage.js","containers/LogoutPage/index.js","actions/LogoutPage.js","containers/UnauthorizedPage/index.js","containers/CustomerForm/CustomerForm.js","containers/CustomerForm/index.js","actions/CustomerForm.js","containers/RegisterPage/RegisterPage.js","containers/RegisterPage/index.js","actions/RegisterPage.js","containers/ForgotPasswordPage/ForgotPasswordPage.js","containers/ForgotPasswordPage/index.js","actions/ForgotPasswordPage.js","containers/TicketPage/components/FacebookChatView.js","containers/TicketPage/components/Customer.js","containers/TicketPage/components/CustomerList.js","containers/TicketPage/components/ChatBox.js","containers/TicketPage/components/CustomerInformation.js","containers/TicketPage/components/TicketInfo.js","containers/TicketPage/components/TicketInformation.js","containers/TicketPage/components/TicketList.js","containers/TicketPage/components/MessageBubble.js","containers/TicketPage/components/Conversation.js","containers/TicketPage/components/FacebookPostComment.js","containers/TicketPage/components/InstagramPostComment.js","containers/TicketPage/TicketPage.js","actions/TicketPage.js","containers/TicketPage/index.js","containers/SettingsPage/components/AccountDetailsForm.js","containers/SettingsPage/components/StaffForm.js","containers/SettingsPage/components/TwilioConnectionForm.js","containers/SettingsPage/components/ConnectionForm.js","helpers/Label.js","containers/SettingsPage/components/ConnectionList.js","containers/SettingsPage/components/HoverIcon.js","containers/SettingsPage/components/TwilioConnectionList.js","containers/SettingsPage/SettingsPage.js","actions/SettingsPage/SettingsPage.js","containers/SettingsPage/index.js","actions/SettingsPage/Facebook.js","actions/SettingsPage/TwilioConnection.js","containers/StaffListPage/components/StaffForm.js","containers/StaffListPage/StaffListPage.js","containers/StaffListPage/index.js","actions/StaffListPage.js","containers/DashboardPage/components/TicketStatistics.js","containers/DashboardPage/components/Staff.js","containers/DashboardPage/components/StaffList.js","containers/DashboardPage/components/TicketList.js","containers/DashboardPage/components/AccountPending.js","containers/DashboardPage/DashboardPage.js","actions/DashboardPage/StaffList.js","containers/DashboardPage/index.js","containers/ReportPage/ReportPage.js","containers/ReportPage/index.js","actions/ReportPage.js","containers/Channels/MessengerIntegrationPage/MessengerIntegrationPage.js","containers/Channels/MessengerIntegrationPage/index.js","actions/MessengerIntegrationPage.js","containers/Channels/MessengerSettingsPage/MessengerSettingsPage.js","containers/Channels/MessengerSettingsPage/index.js","containers/SubscriptionPage/SubscriptionPage.js","containers/SubscriptionPage/index.js","components/DetailMenu/index.js","containers/StaffDetailsPage/StaffBasicPage/components/StaffBasicForm.js","containers/StaffDetailsPage/StaffBasicPage/StaffBasicPage.js","actions/StaffDetailsPage.js","containers/StaffDetailsPage/StaffBasicPage/index.js","containers/StaffDetailsPage/StaffTicketsPage/StaffTicketsPage.js","containers/StaffDetailsPage/StaffTicketsPage/index.js","containers/StaffDetailsPage/StaffDetailsPage.js","containers/StaffDetailsPage/index.js","routes.js","index.js","reducers/index.js"],"names":["module","exports","image","document","video","audio","_","require","fileHelper","fileToDataUrl","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","dataUrlToBlob","dataUrl","byteString","split","indexOf","atob","unescape","mimeString","ia","Uint8Array","length","i","charCodeAt","Blob","type","getExtension","fileName","isString","arr","cas_user_types","admin_roles","user_roles","group_types","booking_types","booking_form_types","day_of_week","room_review_types","quota_schemes","submission_types","status","__webpack_require__","p","Boolean","window","location","hostname","match","RESET_LOGIN_PAGE","RESET_LOGIN_PAGE_META","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_ERROR","UPDATE_ACCOUNT_STATUS_REQUEST","UPDATE_ACCOUNT_STATUS_ERROR","UPDATE_ACCOUNT_STATUS_SUCCESS","GET_TICKETS_REQUEST","GET_TICKETS_ERROR","GET_TICKETS_SUCCESS","UPDATE_TICKET_ASIGNEE_REQUEST","UPDATE_TICKET_ASIGNEE_ERROR","UPDATE_TICKET_ASIGNEE_SUCCESS","UPDATE_TICKET_STATUS_REQUEST","UPDATE_TICKET_STATUS_ERROR","UPDATE_TICKET_STATUS_SUCCESS","RESET_TICKETS_PAGE_META","RESET_TICKETS_PAGE","RESET_MESSAGES","GET_TICKET_BY_ID_REQUEST","GET_TICKET_BY_ID_ERROR","GET_TICKET_BY_ID_SUCCESS","SEND_MESSAGE_REQUEST","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_ERROR","GET_MESSAGES_REQUEST","GET_MESSAGES_SUCCESS","GET_MESSAGES_ERROR","SEND_ATTACHMENT_REQUEST","SEND_ATTACHMENT_SUCCESS","SEND_ATTACHMENT_ERROR","GET_TICKET_STAFFS_ERROR","GET_TICKET_STAFFS_REQUEST","GET_TICKET_STAFFS_SUCCESS","GET_TWILIO_MESSAGE_BY_ID_REQUEST","GET_TWILIO_MESSAGE_BY_ID_ERROR","GET_TWILIO_MESSAGE_BY_ID_SUCCESS","NEW_TICKET_REQUEST","NEW_TICKET_ERROR","NEW_TICKET_SUCCESS","ADD_TICKET_NOTE_ERROR","ADD_TICKET_NOTE_SUCCESS","ADD_TICKET_NOTE_REQUEST","UPDATE_CUSTOMER_REQUEST","UPDATE_CUSTOMER_ERROR","UPDATE_CUSTOMER_SUCCESS","GET_REGISTER_PAGE_REQUEST","GET_REGISTER_PAGE_ERROR","GET_REGISTER_PAGE_SUCCESS","RESET_REGISTER_PAGE_META","RESET_REGISTER_PAGE","SUBMIT_REGISTER_PAGE_ERROR","SUBMIT_REGISTER_PAGE_REQUEST","SUBMIT_REGISTER_PAGE_SUCCESS","GET_FORGOT_PASSWORD_PAGE_REQUEST","GET_FORGOT_PASSWORD_PAGE_ERROR","GET_FORGOT_PASSWORD_PAGE_SUCCESS","RESET_FORGOT_PASSWORD_PAGE_META","RESET_FORGOT_PASSWORD_PAGE","UPDATE_SETTINGS_ACCOUNT_REQUEST","UPDATE_SETTINGS_ACCOUNT_ERROR","UPDATE_SETTINGS_ACCOUNT_SUCCESS","GET_SETTINGS_ACCOUNT_REQUEST","GET_SETTINGS_ACCOUNT_ERROR","GET_SETTINGS_ACCOUNT_SUCCESS","RESET_ACCOUNT_PAGE","RESET_ACCOUNT_PAGE_META","GET_CONNECTIONS_REQUEST","GET_CONNECTIONS_ERROR","GET_CONNECTIONS_SUCCESS","GET_PAGES_REQUEST","GET_PAGES_ERROR","GET_PAGES_SUCCESS","RESET_MESSENGER_INTEGRATION_PAGE","RESET_MESSENGER_INTEGRATION_PAGE_META","GET_REPORTS_REQUEST","GET_REPORTS_ERROR","GET_REPORTS_SUCCESS","RESET_REPORTS_PAGE","RESET_REPORTS_PAGE_META","GET_STAFFS_REQUEST","GET_STAFFS_ERROR","GET_STAFFS_SUCCESS","GET_STAFF_BY_ID_REQUEST","GET_STAFF_BY_ID_ERROR","GET_STAFF_BY_ID_SUCCESS","DELETE_STAFF_BY_ID_REQUEST","DELETE_STAFF_BY_ID_ERROR","DELETE_STAFF_BY_ID_SUCCESS","UPDATE_STAFF_REQUEST","UPDATE_STAFF_ERROR","UPDATE_STAFF_SUCCESS","SUBMIT_STAFF_REQUEST","SUBMIT_STAFF_SUCCESS","SUBMIT_STAFF_ERROR","RESET_SELECTED_STAFF","RESET_STAFF_DETAILS_PAGE","RESET_STAFF_DETAILS_PAGE_META","ADD_FACEBOOK_CONNECTION_REQUEST","ADD_FACEBOOK_CONNECTION_SUCCESS","ADD_FACEBOOK_CONNECTION_ERROR","GET_FACEBOK_CONNECTIONS_ERROR","GET_FACEBOK_CONNECTIONS_REQUEST","GET_FACEBOK_CONNECTIONS_SUCCESS","UPDATE_PAGE_SUBCRIBED_FIELD_REQUEST","UPDATE_PAGE_SUBCRIBED_FIELD_ERROR","UPDATE_PAGE_SUBCRIBED_FIELD_SUCCESS","SEND_FACEBOOK_MESSAGE_REQUEST","SEND_FACEBOOK_MESSAGE_SUCCESS","SEND_FACEBOOK_MESSAGE_ERROR","GET_FACEBOOK_MESSAGES_REQUEST","GET_FACEBOOK_MESSAGES_SUCCESS","GET_FACEBOOK_MESSAGES_ERROR","GET_FACEBOOK_MESSAGE_BY_ID_REQUEST","GET_FACEBOOK_MESSAGE_BY_ID_ERROR","GET_FACEBOOK_MESSAGE_BY_ID_SUCCESS","ADD_TWILIO_CONNECTION_REQUEST","ADD_TWILIO_CONNECTION_SUCCESS","ADD_TWILIO_CONNECTION_ERROR","GET_TWILIO_CONNECTIONS_REQUEST","GET_TWILIO_CONNECTIONS_ERROR","GET_TWILIO_CONNECTIONS_SUCCESS","GET_TWILIO_CONNECTION_BY_ID_ERROR","GET_TWILIO_CONNECTION_BY_ID_REQUEST","GET_TWILIO_CONNECTION_BY_ID_SUCCESS","UPDATE_TWILIO_CONNECTION_REQUEST","UPDATE_TWILIO_CONNECTION_SUCCESS","UPDATE_TWILIO_CONNECTION_ERROR","initialState","loading","email","password","loginPageReducer","state","action","ActionTypes","payload","meta","register","reducer","forgot_password","tickets","twilio_messages","users","loadingUsers","loadingMessage","loadingTickets","loadingSelectedTicket","loadingSendMessage","loadingNewTicket","showNewTicketAssignedModal","fb_messages","staffs","ticket","account","loadingAccount","loadingStaffs","loadingStaffModal","selectedStaff","loadingSubmit","connections","facebook_connections","twilio_connections","selectedTwilio_connection","loadingTwilioForm","loadingTwilioData","loadingDeleteStaff","loadingConnections","loadingFacebookConnections","loadingTwilioConnections","staff","pages","reports","history","createBrowserHistory","basename","store","configs","development","api","loginTimeout","socket","host","path","facebook","app_id","testing","production","AuthHelper","isAuthenticated","jsonData","JSON","parse","localStorage","getItem","token","last_login","now","moment","diff","Date","toISOString","config","colors","primary","BasicLayout","Component","render","react_default","a","createElement","index_es","features","newDesignLanguage","theme","style","paddingLeft","paddingRight","paddingTop","this","props","children","SubMenu","Menu","Sider","Layout","rootSubmenuKeys","Drawer","[object Object]","args","super","openKeys","onOpenChange","keys","latestOpenKey","find","key","setState","componentDidMount","getActiveSubmenu","getActiveItem","pathname","search","query","URLParse","test","activeItem","trigger","breakpoint","collapsedWidth","onCollapse","handleOnCollapse","collapsed","width","zIndex","className","es_menu","mode","selectedKeys","textAlign","margin","padding","fontSize","react_router_dom","to","color","Item","react_fontawesome_index_es","icon","faTachometerAlt","fixedWidth","marginLeft","faClipboardList","faUserFriends","faCircleNotch","title","faFlag","faCog","LocalStorageHelper","getName","admin","name","e","getLoginType","getUserId","_id","parent_user_id","getLoggedIn","Header","header_SubMenu","Option","Select","Title","header_Title","Link","Typography","NavigationHeader","handleLanguageMenuClick","handleSettingMenuClick","handleLogout","push","getUsernameAvatar","username","size","avatar","backgroundColor","verticalAlign","charAt","toUpperCase","userMenu","onClick","space","LogoutOutlined","Fragment","background","align","display","justifyContent","dropdown","overlay","placement","row","justify","alignSelf","marginRight","maxWidth","border","whiteSpace","GeneralHelper","queryStringToObject","queryString","substring","decodeURI","replace","isEmailValid","isUstEmail","endsWith","getImageBasePath","navigation_layout_Header","Content","Footer","navigation_layout_Title","NavigationLayout","BreadcrumbSection","content","active","BreadcrumbTitle","setBreadcrumbNavigationBar","input","setBreadcrumbTitle","ShowNavigationBar","sections","marginTop","breadcrumb","map","section","link","href","level","bind","layout","minHeight","drawer","header","React","cloneElement","renderFormInput","touched","invalid","custom","Object","assign","isNil","autoComplete","renderCheckbox","onChange","checked","validateRequired","value","undefined","_isEmail","String","toLowerCase","validateEmail","compose","withAlert","reduxForm","form","componentDidUpdate","prevProps","prevMeta","loginPageProps","alertOptions","code","timeout","alert","show","message","resetMeta","componentWillUnmount","resetPage","pristine","submitting","height","dist","pageId","language","themeColor","bottomSpacing","loggedInGreeting","loggedOutGreeting","greetingDialogDisplay","debugMode","onMessengerShow","console","log","onMessengerHide","onMessengerDialogShow","onMessengerDialogHide","onMessengerMounted","onMessengerLoad","float","element","Section","onSubmit","handleSubmit","data","login","Field","label","component","validate","alignItems","es_checkbox","target","id","es_button","block","borderColor","divider","orientation","fullWidth","es_image","src","preview","textDecoration","getToken","needLogout","body","get","handleReloginRedirect","removeItem","hash","request","url","superagent","set","end","post","send","patch","delete","del","accounts","getAccount","updateAccount","updateStatus","twilioconnections","twilio","getTwilioConnections","getTwilioConnectionById","createTwilioConnection","updateTwilioConnectionById","getFacebookConnections","createFacebookConnection","updatePageSubcribedFieldById","getTickets","getTicketById","updateTicketAsigneeById","user_id","updateTicketStatusById","createTicketNote","messages","getTwilioMessages","ticket_id","getTwilioMessageById","createTwilioMessage","getFbMessages","getFbMessagesByID","createFbMessage","getUsers","getStaffs","getStaffById","createStaff","updateStaffById","deleteStaffById","contacts","updateTwilioContact","assets","getAssetFileById","auth","signUp","logout","connect","dispatch","options","async","response","API","setItem","stringify","LoginPage","Loading","onTop","position","top","left","paddingBottom","dist_default","fadeIn","defaultProps","LogoutPage","components_loading","res","logout_url","UnauthorizedPage","reset","registerPageProps","marginBottom","registerPageReducer","CustomerForm","constructor","success","submitPage","placeholder","autoFocus","disabled","open","onClose","primaryAction","onAction","confirm_password","RegisterPage","forgotPasswordPageProps","forgotPasswordReducer","ForgotPasswordPage","Moment","styles","chatHeader","flexDirection","fontWeight","borderTopLeftRadius","borderTopRightRadius","chatHeaderName","chatBubbleHolder","overflowY","bgWhite","inputMessage","outline","resize","chatBottomHolder","pRelative","pAbsolute","bottom","transparentBtn","mLeft","chatBubble","borderRadius","boxShadow","dFlex","bubbleMessageHolder","flex","lineHeight","tJustify","bubbleDateHolder","bubbleDate","FacebookChatView","skeletonConversation","sectioned","lines","socketJoinTicket","staff_id","emit","socketConnection","UrlParse","on","messagesEnd","scrollIntoView","behavior","message_id","facebook_message_id","_chatBubble","v","flow","source","ChevronDownMinor","timestamp","format","_handeMessageValue","messageValue","_handleEmojiPicked","concat","emoji","_handleOnClickSend","_handleMessageRequest","sendMessageFb","showEmojisPicker","loggedIn","_handleClick","_handleOutsideClick","ioClient","forceNew","loggedInType","setTimeout","prevLocation","ticketPageProps","prev_ticketPageprops","prevQuery","disconnect","resetTicket","removeEventListener","addEventListener","prevState","node","contains","updateTicketStatus","loadingUpdateTicket","loadingMessages","renderPreviewModal","handleSendMessage","dropZoneAttachment","ticket_status","isAssigned","showChatInput","sortMessagesBasedOnTime","sort","right","utc","created_at","messagesGroupByDate","groupBy","dateTime","sampleData","senderPhoto","senderName","customer","CircleInformationMajorFilled","item","index","msg","idx","ref","el","clear","multiline","emoji_picker_react_dist_default","skinTone","SKIN_TONE_NEUTRAL","onEmojiClick","SmileyHappyMajorMonotone","trim","ThumbsUpMajorMonotone","SendMajorMonotone","hover","parentContainer","childContainer","img","lastMessage","date","channel","Search","CustomerList_Search","Input","CustomerList_Option","filterBox","filters","modalHandle","newFilter","dateString","SearchFilter","direction","allowClear","onSearch","date_picker","es_select","card","filter","customerFilter","includes","channelFilter","dateFilter","components_Customer","ChatBox_Title","selected","es_form","es_input","TicketInfo_Title","TicketInfo_Option","currentStatus","currentPriority","defaultValue","container","noteList","borderBottom","noteDate","noteModalHandle","openNoteModal","customerModalHandle","initialize","twilio_contact","openCustomerInformationModal","renderNoteModal","fields","addTicketNote","secondaryActions","renderCustomerInformationModal","updateCustomerInformation","twilio_contact_id","note","customerName","updateTicketAsignee","userOptions","user","customer_phone_number","customer_name","loggedInId","ticketAssigneeId","notes","sortBy","o","reverse","ticketIsPendingAcceptance","ticketIsResolved","variation","wordWrap","labelHidden","confirm","cursor","EditMinor","CirclePlusMinor","fontStyle","TabPane","Tabs","testOptions","messagePreview","textOverflow","overflow","TicketList","joinUserSession","handleTabChange","ticketTabs","selectedTabIndex","renderTicketsTypeBadge","typeBadge","ticketbadge","renderStatusBadge","badge","progress","renderTicketList","resourceName","singular","plural","items","selectedItems","renderItem","facebook_contact_id","facebook_message","twilio_message","unread_messages","ticketType","phone","media","accessibilityLabel","updateText","searchInputValue","filterRegex","RegExp","resultOptions","option","updateSelection","selectedText","selectedItem","matchedOption","newTicket","panelID","listOfTabs","getLoggedInUserId","prev_ticketPageProps","prev_location","prev_loadingUpdateTicket","prev_loadingNewTicket","orderBy","ticket_type","TextField","SearchMinor","es_tabs","defaultActiveKey","tab","components_CustomerList","components_ChatBox","components_CustomerInformation","components_TicketInfo","bubble","overflowWrap","alignContent","mediaContainer","fileAttachmentContainer","fileType","RenderAttachment","filename","remote_url","alt","controls","FileTypes","tempLink","setAttribute","click","downloadFile","CircleDownMajorMonotone","MessageBubble","twilio_file_id","twilio_file","outbound_status","setPreview","useState","useEffect","getTwilioFileById","getFile","large","modalPreview","mime","ClockMinor","FILE_SIZE_MB","MAX_FILE_SIZE","conversationHeader","conversation","overflowX","backgroundImage","inputContainer","borderTop","pendingAcceptance","twilio_message_id","handleChange","inputText","sendMessage","onKeyDownHandle","keyCode","shiftKey","preventDefault","onRejectedAttachFile","files","isEmpty","errors","attachFile","dist_es","onDrop","accept","join","onDropRejected","multiple","maxSize","getRootProps","getInputProps","AttachmentMajorMonotone","closeAttachmentPreview","URL","createObjectURL","maxHeight","onDismiss","components_MessageBubble","onKeyDown","tabIndex","maxLength","iconSize","postDiscription","commentData","senderFrom","postDetails","postCommentInput","avatarPhoto","commentInput","commentTextArea","agoHolder","timeAgo","emojiPicker","FacebookPostComment","handleEmojiPicker","showEmojiPicker","emojipicker","onClickEmoji","event","emojiObject","prevEmojiText","dataEmojiPicker","newEmojiData","handleInputChange","fbCommentValue","postData","comments","profilePhoto","from","PageName","commentDiscription","pagePhoto","preload","instagramCommentHeader","avatarAndTitleHolder","titleHolder","commentSectionHolder","igPostImage","igPostDescription","userCommentHolder","comment","commentMessage","inputHolder","inputBorder","textFieldHolder","buttonHolder","postBtn","InstagramPostComment","handleInstagramCommentValue","instagramCommentValue","pagePostedPhoto","pageName","description","onAcceptTicket","newTicketId","loggedInUserId","oneThird","components_TicketList","Conversation","components_InstagramPostComment","components_FacebookPostComment","components_FacebookChatView","components_TicketInformation","MAX_FILE_LOAD_RETRIES","ticketPageReducer","getState","copyOldMessages","fileDataToUrl","FileHelper","newMessage","newMessages","copyTwilioMessages","copyTickets","getIndex","findIndex","x","optionsQuery","copyTwilioMessagesNew","getNewMessageIndex","responseTickets","getTicketIndex","copyTwilioMessagesOld","retry","stateTicket","facebook_messages","copyFacebookMessagesNew","fb_file","facebook_page_id","facebook_connection_id","facebook_chat_id","copyFbMessages","TicketPage","isOpen","prevLoading","staffFormType","submitStaff","submitTwilioConnection","twilioFormType","triggerFacebookLogin","facebook_login_with_button_default","appId","scope","callback","accessToken","closeModal","addFacebokConnection","handleTwilioModal","successFacebookLogin","statusChangeCallback","loggedOut","loggedStatus","choices","LabelHelper","staffStatus","casUserType","connectionType","connection","connectionsContainer","connectionHeader","ConnectionList","renderFacebookConnections","changeStatusHandle","facebook_pages","DeleteMinor","page","loadingSubcribedFieldUpdate","page_id","subscribed_fields","initials","feed","loadingSubmitFacebookConnection","HoverIcon","hovered","Webhook","ClipboardMinor","TwilioConnectionList","handleMouseEnter","account_sid","slice","handleMouseLeave","handledata","isHovered","mousehover","handleClickedData","appendChild","select","execCommand","removeChild","handleTwilioConnectionId","renderTwilioConnections","enabled","auth_token","btoa","onMouseEnter","onMouseLeave","hoverdata","prev_loadingTwilioData","staffListContainer","accountDetailsForm","connectionForm","twilioConnectionForm","resetSelectedStaff","staffForm","onDeleteStaff","stopPropagation","deleteStaff","prev_loadingSubmitFacebookConnection","settingsPageProps","loadingDelete","details","business_name","industry","mobile_number","twilioConnectionId","components_AccountDetailsForm","components_StaffForm","components_TwilioConnectionForm","components_ConnectionForm","primaryFooterAction","components_ConnectionList","components_TwilioConnectionList","settingsPageReducer","old_password","updated_at","updatedStaffs","findIndexToUpdate","copyStaffs","indexToBeDeleted","splice","userID","facebook_connection","access_token","facebook_user_name","facebook_user_id","facebook_page","copyFacebookConnections","getFacebookConnectionIndex","getFacebookPageIndex","twilio_connection","metta","updatedtwilio_connection","findIndexToupdate","SettingsPage","statusValue","searchValue","columns","dataIndex","text","tags","tag","es_tag","record","navigateToDetailsPage","staffID","menu","info","StaffListPage_components_StaffForm","DownOutlined","PlusOutlined","navigateToAddPage","table","dataSource","searchItems","searchQuery","StaffListPage","month","xField","yField","fill","opacity","xAxis","autoHide","autoRotate","alias","sales","picker","column","parentDiv","childDiv","Math","floor","random","components_Staff","TicketList_Option","searchBox","priority","statusFilter","priorityFilter","Text","AccountPending_Title","Paragraph","mainHeader","typography","pending","staffListProps","AccountPending","mainContainer","components_TicketStatistics","components_StaffList","DashboardPage_components_TicketList","staffListReducer","DashboardPage","ReportPage_Search","ReportPage_Option","getReports","reportPageProps","DownloadOutlined","ghost","handleDownload","obj2CSV","csvRows","headers","values","blob","arr2CSV","nameSearchFilter","assignee","reportPageReducer","loadingReports","ReportPage","MessengerIntegrationPage_Search","MessengerIntegrationPage_Option","getPages","messengerIntegrationPage","pageNameSearchFilter","messengerIntegrationPageReducer","loadingPages","MessengerIntegrationPage","MessengerSettingsPage","SubscriptionPage","DetailMenu","tabs","current","setCurrent","path_result","StaffBasicForm_Option","permissions","StaffBasicForm","formRef","createRef","checkFormValues","getFieldValue","renderForm","initialValues","onFinish","submitFormData","rules","required","CommonEnum","List","add","remove","fieldKey","restField","val","filtered","current_selected_locations","filteredValues","obj","setFieldsValue","selected_doors","permission","MinusCircleOutlined","PlusSquareFilled","htmlType","StaffBasicPage_Header","StaffBasicPage_Content","StaffBasicPage_Title","pageProps","showForm","components_StaffBasicForm","renderCreateForm","settings","col","span","renderUpdateForm","staffDetailsPageReducer","newStaff","StaffBasicPage","StaffTicketsPage","StaffDetailsPage_Header","StaffDetailsPage_Content","StaffDetailsPage_Title","getStaffDetailsPageComponent","StaffDetailsPage_StaffBasicPage","StaffDetailsPage_StaffTicketsPage","pageDetailTabs","navigateToListPage","StaffDetailsPage","routes","exact","isPrivate","layoutClass","forStaff","getRedirectedPath","PrivateRoute","rest","react_router","containerClass","withRouter","WebFont","load","google","families","ReactDOM","es","middleware","thunk","routerMiddleware","composedEnhancers","applyMiddleware","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createStore","combineReducers","formReducer","router","connectRouter","rootReducer","i18n","enTranslations","react_alert","template","AlertTemplate","offset","transition","containerStyle","esm","src_routes","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.081431b3.chunk.js","sourcesContent":["module.exports = {\r\n\timage: [\r\n\t\t'image/*'\r\n\t],\r\n\tdocument: [\r\n\t\t'.pdf',\r\n\t\t'.vcf', // contacts\r\n\t\t'application/pdf' // pdf\r\n\t],\r\n\tvideo: [\r\n\t\t'.mp4', '.avi', '.webm', '.gif', '.wmv', '.mpg', '.mpeg', '.m2v', '.flv', '.ogg'\r\n\t],\r\n\taudio: [\r\n\t\t'.mp3', '.ogg', '.mpeg', '.3gp', '.wav', '.webm', '.m4p', '.amr'\r\n\t]\r\n};\r\n","const _ = require('lodash');\r\n\r\nconst fileHelper = {\r\n\tfileToDataUrl: file => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t\treader.onload = () => resolve(reader.result);\r\n\t\t\treader.onerror = error => reject(error);\r\n\t\t});\r\n\t},\r\n\tdataUrlToBlob: dataUrl => {\r\n\t\t/*\r\n\t\t * base from: https://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata#answer-5100158\r\n\t\t */\r\n\t\tvar byteString;\r\n\t\tif (dataUrl.split(',')[0].indexOf('base64') >= 0) byteString = atob(dataUrl.split(',')[1]);\r\n\t\telse byteString = unescape(dataUrl.split(',')[1]);\r\n\r\n\t\t// separate out the mime component\r\n\t\tvar mimeString = dataUrl\r\n\t\t\t.split(',')[0]\r\n\t\t\t.split(':')[1]\r\n\t\t\t.split(';')[0];\r\n\r\n\t\t// write the bytes of the string to a typed array\r\n\t\tvar ia = new Uint8Array(byteString.length);\r\n\t\tfor (var i = 0; i < byteString.length; i++) {\r\n\t\t\tia[i] = byteString.charCodeAt(i);\r\n\t\t}\r\n\r\n\t\treturn new Blob([ia], { type: mimeString });\r\n\t},\r\n\tgetExtension: function (fileName) {\r\n\t\tif (!fileName || !_.isString(fileName)) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tconst arr = fileName.split('.');\r\n\t\tif (arr.length === 1) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn arr[arr.length - 1];\r\n\t}\r\n};\r\n\r\nmodule.exports = fileHelper;\r\n","module.exports = {\r\n\tcas_user_types: [\r\n\t\t'staff',\r\n\t\t'undergrad',\r\n\t\t'postgrad',\r\n\t\t'department',\r\n\t\t'emeritus',\r\n\t\t'nansha-staff',\r\n\t\t'project',\r\n\t\t'affiliate',\r\n\t\t'family-google'\r\n\t],\r\n\tadmin_roles: [\r\n\t\t'super_user',\r\n\t\t// 'individual',\r\n\t\t'system_admin',\r\n\t\t'facility_admin'\r\n\t],\r\n\tuser_roles: [\r\n\t\t'priority_booker_all_department',\r\n\t\t'priority_booker_department',\r\n\t\t'department',\r\n\t\t'individual'\r\n\t],\r\n\tgroup_types: [\r\n\t\t'department',\r\n\t\t'staff_group',\r\n\t\t'student_group'\r\n\t],\r\n\tbooking_types: [\r\n\t\t'general',\r\n\t\t'event',\r\n\t\t'blackout',\r\n\t\t'music_performance'\r\n\t],\r\n\tbooking_form_types: [\r\n\t\t'general',\r\n\t\t'event',\r\n\t\t'blackout',\r\n\t\t'music_performance'\r\n\t],\r\n\tday_of_week: [\r\n\t\t'Sunday',\r\n\t\t'Monday',\r\n\t\t'Tuesday',\r\n\t\t'Wednesday',\r\n\t\t'Thursday',\r\n\t\t'Friday',\r\n\t\t'Saturday'\r\n\t],\r\n\troom_review_types: [\r\n\t\t'recommendation',\r\n\t\t'defect_report'\r\n\t],\r\n\tquota_schemes: [\r\n\t\t'university',\r\n\t\t'department'\r\n\t],\r\n\tsubmission_types: [\r\n\t\t'music_performance_audition'\r\n\t],\r\n\tstatus: [\r\n\t\t'active',\r\n\t\t'inactive'\r\n\t]\r\n};\r\n","module.exports = __webpack_public_path__ + \"static/media/index.9b5a0eca.less\";","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t// [::1] is the IPv6 localhost address.\r\n\twindow.location.hostname === '[::1]' ||\r\n\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log('This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA');\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log('New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister();\r\n\t\t});\r\n\t}\r\n}\r\n","/* LoginPage */\r\nexport const RESET_LOGIN_PAGE = 'RESET_LOGIN_PAGE';\r\nexport const RESET_LOGIN_PAGE_META = 'RESET_LOGIN_PAGE_META';\r\nexport const UPDATE_LOGIN_PAGE_FORM_FIELD = 'UPDATE_LOGIN_PAGE_FORM_FIELD';\r\n\r\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_ERROR = 'LOGIN_ERROR';\r\n\r\nexport const CLOSE_NEW_TICKET_NOTIFICATION = 'CLOSE_NEW_TICKET_NOTIFICATION';\r\n\r\nexport const UPDATE_ACCOUNT_STATUS_REQUEST = 'UPDATE_ACCOUNT_STATUS_REQUEST';\r\nexport const UPDATE_ACCOUNT_STATUS_ERROR = 'UPDATE_ACCOUNT_STATUS_ERROR';\r\nexport const UPDATE_ACCOUNT_STATUS_SUCCESS = 'UPDATE_ACCOUNT_STATUS_SUCCESS';\r\n\r\n// Tickets\r\nexport const GET_TICKETS_REQUEST = 'GET_TICKETS_REQUEST';\r\nexport const GET_TICKETS_ERROR = 'GET_TICKETS_ERROR';\r\nexport const GET_TICKETS_SUCCESS = 'GET_TICKETS_SUCCESS';\r\nexport const UPDATE_TICKET_ASIGNEE_REQUEST = 'UPDATE_TICKET_ASIGNEE_REQUEST';\r\nexport const UPDATE_TICKET_ASIGNEE_ERROR = 'UPDATE_TICKET_ASIGNEE_ERROR';\r\nexport const UPDATE_TICKET_ASIGNEE_SUCCESS = 'UPDATE_TICKET_ASIGNEE_SUCCESS';\r\nexport const UPDATE_TICKET_STATUS_REQUEST = 'UPDATE_TICKET_STATUS_REQUEST';\r\nexport const UPDATE_TICKET_STATUS_ERROR = 'UPDATE_TICKET_STATUS_ERROR';\r\nexport const UPDATE_TICKET_STATUS_SUCCESS = 'UPDATE_TICKET_STATUS_SUCCESS';\r\nexport const RESET_TICKETS_PAGE_META = 'RESET_TICKETS_PAGE_META';\r\nexport const RESET_TICKETS_PAGE = 'RESET_TICKETS_PAGE';\r\nexport const RESET_MESSAGES = 'RESET_MESSAGES';\r\n\r\nexport const GET_TICKET_BY_ID_REQUEST = 'GET_TICKET_BY_ID_REQUEST';\r\nexport const GET_TICKET_BY_ID_ERROR = 'GET_TICKET_BY_ID_ERROR';\r\nexport const GET_TICKET_BY_ID_SUCCESS = 'GET_TICKET_BY_ID_SUCCESS';\r\n\r\nexport const SEND_MESSAGE_REQUEST = 'SEND_MESSAGE_REQUEST';\r\nexport const SEND_MESSAGE_SUCCESS = 'SEND_MESSAGE_SUCCESS';\r\nexport const SEND_MESSAGE_ERROR = 'SEND_MESSAGE_ERROR';\r\n\r\nexport const GET_MESSAGES_REQUEST = 'GET_MESSAGES_REQUEST';\r\nexport const GET_MESSAGES_SUCCESS = 'GET_MESSAGES_SUCCESS';\r\nexport const GET_MESSAGES_ERROR = 'GET_MESSAGES_ERROR';\r\n\r\nexport const SEND_ATTACHMENT_REQUEST = 'SEND_ATTACHMENT_REQUEST';\r\nexport const SEND_ATTACHMENT_SUCCESS = 'SEND_ATTACHMENT_SUCCESS';\r\nexport const SEND_ATTACHMENT_ERROR = 'SEND_ATTACHMENT_ERROR';\r\n\r\nexport const GET_ASSET_FILE_REQUEST = 'GET_ASSET_FILE_REQUEST';\r\nexport const GET_ASSET_FILE_ERROR = 'GET_ASSET_FILE_ERROR';\r\nexport const GET_ASSET_FILE_SUCCESS = 'GET_ASSET_FILE_SUCCESS';\r\n\r\nexport const GET_TICKET_STAFFS_ERROR = 'GET_TICKET_STAFFS_ERROR';\r\nexport const GET_TICKET_STAFFS_REQUEST = 'GET_TICKET_STAFFS_REQUEST';\r\nexport const GET_TICKET_STAFFS_SUCCESS = 'GET_TICKET_STAFFS_SUCCESS';\r\n\r\nexport const GET_TWILIO_MESSAGE_BY_ID_REQUEST = 'GET_TWILIO_MESSAGE_BY_ID_REQUEST';\r\nexport const GET_TWILIO_MESSAGE_BY_ID_ERROR = 'GET_TWILIO_MESSAGE_BY_ID_ERROR';\r\nexport const GET_TWILIO_MESSAGE_BY_ID_SUCCESS = 'GET_TWILIO_MESSAGE_BY_ID_SUCCESS';\r\n\r\nexport const NEW_TICKET_REQUEST = 'NEW_TICKET_REQUEST';\r\nexport const NEW_TICKET_ERROR = 'NEW_TICKET_ERROR';\r\nexport const NEW_TICKET_SUCCESS = 'NEW_TICKET_SUCCESS';\r\n\r\nexport const ADD_TICKET_NOTE_ERROR = 'ADD_TICKET_NOTE_ERROR';\r\nexport const ADD_TICKET_NOTE_SUCCESS = 'ADD_TICKET_NOTE_SUCCESS';\r\nexport const ADD_TICKET_NOTE_REQUEST = 'ADD_TICKET_NOTE_REQUEST';\r\n\r\nexport const UPDATE_CUSTOMER_REQUEST = 'UPDATE_CUSTOMER_REQUEST';\r\nexport const UPDATE_CUSTOMER_ERROR = 'UPDATE_CUSTOMER_ERROR';\r\nexport const UPDATE_CUSTOMER_SUCCESS = 'UPDATE_CUSTOMER_SUCCESS';\r\n\r\n// Register\r\nexport const GET_REGISTER_PAGE_REQUEST = 'GET_REGISTER_PAGE_REQUEST';\r\nexport const GET_REGISTER_PAGE_ERROR = 'GET_REGISTER_PAGE_ERROR';\r\nexport const GET_REGISTER_PAGE_SUCCESS = 'GET_REGISTER_PAGE_SUCCESS';\r\nexport const RESET_REGISTER_PAGE_META = 'RESET_REGISTER_PAGE_META';\r\nexport const RESET_REGISTER_PAGE = 'RESET_REGISTER_PAGE';\r\nexport const SUBMIT_REGISTER_PAGE_ERROR = 'SUBMIT_REGISTER_PAGE_ERROR';\r\nexport const SUBMIT_REGISTER_PAGE_REQUEST = 'SUBMIT_REGISTER_PAGE_REQUEST';\r\nexport const SUBMIT_REGISTER_PAGE_SUCCESS = 'SUBMIT_REGISTER_PAGE_SUCCESS';\r\n\r\n// Forgot Password\r\nexport const GET_FORGOT_PASSWORD_PAGE_REQUEST = 'GET_FORGOT_PASSWORD_PAGE_REQUEST';\r\nexport const GET_FORGOT_PASSWORD_PAGE_ERROR = 'GET_FORGOT_PASSWORD_PAGE_ERROR';\r\nexport const GET_FORGOT_PASSWORD_PAGE_SUCCESS = 'GET_FORGOT_PASSWORD_PAGE_SUCCESS';\r\nexport const RESET_FORGOT_PASSWORD_PAGE_META = 'RESET_FORGOT_PASSWORD_PAGE_META';\r\nexport const RESET_FORGOT_PASSWORD_PAGE = 'RESET_FORGOT_PASSWORD_PAGE';\r\n\r\n// Settings\r\nexport const UPDATE_SETTINGS_ACCOUNT_REQUEST = 'UPDATE_SETTINGS_ACCOUNT_REQUEST';\r\nexport const UPDATE_SETTINGS_ACCOUNT_ERROR = 'UPDATE_SETTINGS_ACCOUNT_ERROR';\r\nexport const UPDATE_SETTINGS_ACCOUNT_SUCCESS = 'UPDATE_SETTINGS_ACCOUNT_SUCCESS';\r\nexport const GET_SETTINGS_ACCOUNT_REQUEST = 'GET_SETTINGS_ACCOUNT_REQUEST';\r\nexport const GET_SETTINGS_ACCOUNT_ERROR = 'GET_SETTINGS_ACCOUNT_ERROR';\r\nexport const GET_SETTINGS_ACCOUNT_SUCCESS = 'GET_SETTINGS_ACCOUNT_SUCCESS';\r\nexport const RESET_ACCOUNT_PAGE = 'RESET_ACCOUNT_PAGE';\r\nexport const RESET_ACCOUNT_PAGE_META = 'RESET_ACCOUNT_PAGE_META';\r\n\r\nexport const GET_CONNECTIONS_REQUEST = 'GET_CONNECTIONS_REQUEST';\r\nexport const GET_CONNECTIONS_ERROR = 'GET_CONNECTIONS_ERROR';\r\nexport const GET_CONNECTIONS_SUCCESS = 'GET_CONNECTIONS_SUCCESS';\r\n\r\n//Pages\r\nexport const GET_PAGES_REQUEST = 'GET_PAGES_REQUEST';\r\nexport const GET_PAGES_ERROR = 'GET_PAGES_ERROR';\r\nexport const GET_PAGES_SUCCESS = 'GET_PAGES_SUCCESS';\r\n\r\nexport const RESET_MESSENGER_INTEGRATION_PAGE = 'RESET_MESSENGER_INTEGRATION_PAGE';\r\nexport const RESET_MESSENGER_INTEGRATION_PAGE_META = 'RESET_MESSENGER_INTEGRATION_PAGE_META';\r\n\r\n\r\n//Reports\r\nexport const GET_REPORTS_REQUEST = 'GET_REPORTS_REQUEST';\r\nexport const GET_REPORTS_ERROR = 'GET_REPORTS_ERROR';\r\nexport const GET_REPORTS_SUCCESS = 'GET_REPORTS_SUCCESS';\r\n\r\nexport const RESET_REPORTS_PAGE = 'RESET_REPORTS_PAGE';\r\nexport const RESET_REPORTS_PAGE_META = 'RESET_REPORTS_PAGE_META';\r\n\r\n\r\n// Staffs\r\nexport const GET_STAFFS_REQUEST = 'GET_STAFFS_REQUEST';\r\nexport const GET_STAFFS_ERROR = 'GET_STAFFS_ERROR';\r\nexport const GET_STAFFS_SUCCESS = 'GET_STAFFS_SUCCESS';\r\n\r\nexport const GET_STAFF_BY_ID_REQUEST = 'GET_STAFF_BY_ID_REQUEST';\r\nexport const GET_STAFF_BY_ID_ERROR = 'GET_STAFF_BY_ID_ERROR';\r\nexport const GET_STAFF_BY_ID_SUCCESS = 'GET_STAFF_BY_ID_SUCCESS';\r\n\r\nexport const DELETE_STAFF_BY_ID_REQUEST = 'DELETE_STAFF_BY_ID_REQUEST';\r\nexport const DELETE_STAFF_BY_ID_ERROR = 'DELETE_STAFF_BY_ID_ERROR';\r\nexport const DELETE_STAFF_BY_ID_SUCCESS = 'DELETE_STAFF_BY_ID_SUCCESS';\r\n\r\nexport const UPDATE_STAFF_REQUEST = 'UPDATE_STAFF_REQUEST';\r\nexport const UPDATE_STAFF_ERROR = 'UPDATE_STAFF_ERROR';\r\nexport const UPDATE_STAFF_SUCCESS = 'UPDATE_STAFF_SUCCESS';\r\n\r\nexport const SUBMIT_STAFF_REQUEST = 'SUBMIT_STAFF_REQUEST';\r\nexport const SUBMIT_STAFF_SUCCESS = 'SUBMIT_STAFF_SUCCESS';\r\nexport const SUBMIT_STAFF_ERROR = 'SUBMIT_STAFF_ERROR';\r\n\r\nexport const RESET_SELECTED_STAFF = 'RESET_SELECTED_STAFF';\r\nexport const RESET_STAFF_DETAILS_PAGE = 'RESET_STAFF_DETAILS_PAGE';\r\nexport const RESET_STAFF_DETAILS_PAGE_META = 'RESET_STAFF_DETAILS_PAGE_META';\r\n\r\n// Settings Facebook\r\nexport const ADD_FACEBOOK_CONNECTION_REQUEST = 'ADD_FACEBOOK_CONNECTION_REQUEST';\r\nexport const ADD_FACEBOOK_CONNECTION_SUCCESS = 'ADD_FACEBOOK_CONNECTION_SUCCESS';\r\nexport const ADD_FACEBOOK_CONNECTION_ERROR = 'ADD_FACEBOOK_CONNECTION_ERROR';\r\n\r\nexport const GET_FACEBOK_CONNECTIONS_ERROR = 'GET_FACEBOK_CONNECTIONS_ERROR';\r\nexport const GET_FACEBOK_CONNECTIONS_REQUEST = 'GET_FACEBOK_CONNECTIONS_REQUEST';\r\nexport const GET_FACEBOK_CONNECTIONS_SUCCESS = 'GET_FACEBOK_CONNECTIONS_SUCCESS';\r\n\r\nexport const UPDATE_PAGE_SUBCRIBED_FIELD_REQUEST = 'UPDATE_PAGE_SUBCRIBED_FIELD_REQUEST';\r\nexport const UPDATE_PAGE_SUBCRIBED_FIELD_ERROR = 'UPDATE_PAGE_SUBCRIBED_FIELD_ERROR';\r\nexport const UPDATE_PAGE_SUBCRIBED_FIELD_SUCCESS = 'UPDATE_PAGE_SUBCRIBED_FIELD_SUCCESS';\r\n\r\nexport const SEND_FACEBOOK_MESSAGE_REQUEST = 'SEND_MESSAGE_REQUEST';\r\nexport const SEND_FACEBOOK_MESSAGE_SUCCESS = 'SEND_MESSAGE_SUCCESS';\r\nexport const SEND_FACEBOOK_MESSAGE_ERROR = 'SEND_MESSAGE_ERROR';\r\n\r\nexport const GET_FACEBOOK_MESSAGES_REQUEST = 'GET_FACEBOOK_MESSAGES_REQUEST';\r\nexport const GET_FACEBOOK_MESSAGES_SUCCESS = 'GET_FACEBOOK_MESSAGES_SUCCESS';\r\nexport const GET_FACEBOOK_MESSAGES_ERROR = 'GET_FACEBOOK_MESSAGES_ERROR';\r\n\r\nexport const GET_FACEBOOK_MESSAGE_BY_ID_REQUEST= 'GET_FACEBOOK_MESSAGE_BY_ID_REQUEST';\r\nexport const GET_FACEBOOK_MESSAGE_BY_ID_ERROR= 'GET_FACEBOOK_MESSAGE_BY_ID_ERROR';\r\nexport const GET_FACEBOOK_MESSAGE_BY_ID_SUCCESS= 'GET_FACEBOOK_MESSAGE_BY_ID_SUCCESS';\r\n// Settings Twilio\r\nexport const ADD_TWILIO_CONNECTION_REQUEST = 'ADD_TWILIO_CONNECTION_REQUEST';\r\nexport const ADD_TWILIO_CONNECTION_SUCCESS = 'ADD_TWILIO_CONNECTION_SUCCESS';\r\nexport const ADD_TWILIO_CONNECTION_ERROR = 'ADD_TWILIO_CONNECTION_ERROR';\r\n\r\nexport const GET_TWILIO_CONNECTIONS_REQUEST = 'GET_TWILIO_CONNECTIONS_REQUEST';\r\nexport const GET_TWILIO_CONNECTIONS_ERROR = 'GET_TWILIO_CONNECTIONS_ERROR';\r\nexport const GET_TWILIO_CONNECTIONS_SUCCESS = 'GET_TWILIO_CONNECTIONS_SUCCESS';\r\n\r\nexport const GET_TWILIO_CONNECTION_BY_ID_ERROR = 'GET_TWILIO_CONNECTION_BY_ID_ERROR';\r\nexport const GET_TWILIO_CONNECTION_BY_ID_REQUEST = 'GET_TWILIO_CONNECTION_BY_ID_REQUEST';\r\nexport const GET_TWILIO_CONNECTION_BY_ID_SUCCESS = 'GET_TWILIO_CONNECTION_BY_ID_SUCCESS';\r\n\r\nexport const UPDATE_TWILIO_CONNECTION_REQUEST = 'UPDATE_TWILIO_CONNECTION_REQUEST';\r\nexport const UPDATE_TWILIO_CONNECTION_SUCCESS = 'UPDATE_TWILIO_CONNECTION_SUCCESS';\r\nexport const UPDATE_TWILIO_CONNECTION_ERROR = 'UPDATE_TWILIO_CONNECTION_ERROR';\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\temail: '',\r\n\tpassword: '',\r\n\terror: ''\r\n};\r\n\r\nexport default function loginPageReducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.LOGIN_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload,\r\n\t\t\t\tloading: true,\r\n\t\t\t\terror: ''\r\n\t\t\t};\r\n\t\tcase ActionTypes.LOGIN_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload,\r\n\t\t\t\tpassword: '',\r\n\t\t\t\terror: ''\r\n\t\t\t};\r\n\t\tcase ActionTypes.LOGIN_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\terror: action.payload.error,\r\n\t\t\t\t...action.payload,\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tloading: false\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_LOGIN_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_LOGIN_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tregister: null\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.GET_REGISTER_PAGE_REQUEST:\r\n\t\tcase ActionTypes.GET_REGISTER_PAGE_SUCCESS:\r\n\t\tcase ActionTypes.GET_REGISTER_PAGE_ERROR:\r\n\t\tcase ActionTypes.SUBMIT_REGISTER_PAGE_SUCCESS:\r\n\t\tcase ActionTypes.SUBMIT_REGISTER_PAGE_REQUEST:\r\n\t\tcase ActionTypes.SUBMIT_REGISTER_PAGE_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_REGISTER_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_REGISTER_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tforgot_password: null\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.GET_FORGOT_PASSWORD_PAGE_REQUEST:\r\n\t\tcase ActionTypes.GET_FORGOT_PASSWORD_PAGE_SUCCESS:\r\n\t\tcase ActionTypes.GET_FORGOT_PASSWORD_PAGE_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_FORGOT_PASSWORD_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_FORGOT_PASSWORD_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\ttickets: [],\r\n\ttwilio_messages: [],\r\n\tusers: [],\r\n\tloadingUsers: false,\r\n\tloadingMessage: false,\r\n\tloadingTickets: false,\r\n\tloadingSelectedTicket: false,\r\n\tloadingSendMessage: false,\r\n\tloadingNewTicket: false,\r\n\tshowNewTicketAssignedModal: false,\r\n\tfb_messages: []\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.GET_TICKETS_REQUEST:\r\n\t\tcase ActionTypes.GET_TICKETS_SUCCESS:\r\n\t\tcase ActionTypes.GET_TICKETS_ERROR:\r\n\t\tcase ActionTypes.UPDATE_TICKET_STATUS_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_TICKET_STATUS_ERROR:\r\n\t\tcase ActionTypes.UPDATE_TICKET_STATUS_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_TICKET_ASIGNEE_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_TICKET_ASIGNEE_ERROR:\r\n\t\tcase ActionTypes.UPDATE_TICKET_ASIGNEE_SUCCESS:\r\n\t\tcase ActionTypes.SEND_MESSAGE_ERROR:\r\n\t\tcase ActionTypes.SEND_MESSAGE_REQUEST:\r\n\t\tcase ActionTypes.SEND_MESSAGE_SUCCESS:\r\n\t\tcase ActionTypes.GET_MESSAGES_ERROR:\r\n\t\tcase ActionTypes.GET_MESSAGES_REQUEST:\r\n\t\tcase ActionTypes.GET_MESSAGES_SUCCESS:\r\n\t\tcase ActionTypes.SEND_ATTACHMENT_SUCCESS:\r\n\t\tcase ActionTypes.SEND_ATTACHMENT_ERROR:\r\n\t\tcase ActionTypes.SEND_ATTACHMENT_REQUEST:\r\n\t\tcase ActionTypes.GET_TICKET_BY_ID_SUCCESS:\r\n\t\tcase ActionTypes.GET_TICKET_BY_ID_REQUEST:\r\n\t\tcase ActionTypes.GET_TICKET_BY_ID_ERROR:\r\n\t\tcase ActionTypes.GET_TICKET_STAFFS_SUCCESS:\r\n\t\tcase ActionTypes.GET_TICKET_STAFFS_REQUEST:\r\n\t\tcase ActionTypes.GET_TICKET_STAFFS_ERROR:\r\n\t\tcase ActionTypes.GET_TWILIO_MESSAGE_BY_ID_SUCCESS:\r\n\t\tcase ActionTypes.GET_TWILIO_MESSAGE_BY_ID_REQUEST:\r\n\t\tcase ActionTypes.GET_TWILIO_MESSAGE_BY_ID_ERROR:\r\n\t\tcase ActionTypes.NEW_TICKET_REQUEST:\r\n\t\tcase ActionTypes.NEW_TICKET_ERROR:\r\n\t\tcase ActionTypes.NEW_TICKET_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_CUSTOMER_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_CUSTOMER_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_CUSTOMER_ERROR:\r\n\t\tcase ActionTypes.ADD_TICKET_NOTE_REQUEST:\r\n\t\tcase ActionTypes.ADD_TICKET_NOTE_SUCCESS:\r\n\t\tcase ActionTypes.ADD_TICKET_NOTE_ERROR:\r\n\t\tcase ActionTypes.GET_FACEBOOK_MESSAGES_REQUEST:\r\n\t\tcase ActionTypes.GET_FACEBOOK_MESSAGES_SUCCESS:\r\n\t\tcase ActionTypes.GET_FACEBOOK_MESSAGES_ERROR:\r\n\t\tcase ActionTypes.GET_FACEBOOK_MESSAGE_BY_ID_REQUEST:\r\n\t\tcase ActionTypes.GET_FACEBOOK_MESSAGE_BY_ID_ERROR:\r\n\t\tcase ActionTypes.GET_FACEBOOK_MESSAGE_BY_ID_SUCCESS:\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_TICKETS_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_MESSAGES:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttwilio_messages: [],\r\n\t\t\t\tfb_messages: [],\r\n\t\t\t\tstaffs: [],\r\n\t\t\t\tticket: []\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_TICKETS_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\taccount: null,\r\n\tstaffs: [],\r\n\tloadingAccount: false,\r\n\tloadingStaffs: false,\r\n\tloadingStaffModal: false\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.GET_STAFFS_REQUEST:\r\n\t\tcase ActionTypes.GET_STAFFS_ERROR:\r\n\t\tcase ActionTypes.GET_STAFFS_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_ACCOUNT_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_ACCOUNT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_SELECTED_STAFF:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedStaff: null\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\taccount: null,\r\n\tloadingSubmit: false,\r\n\tstaffs: [],\r\n\tconnections: [],\r\n\tfacebook_connections: [],\r\n\tselectedStaff: null,\r\n\r\n\ttwilio_connections: [], //Gamit\r\n\r\n\tselectedTwilio_connection: null, // for selected by id\r\n\r\n\tloadingTwilioForm: false,\r\n\r\n\tloadingTwilioData: false,\r\n\r\n\tloadingAccount: false,\r\n\tloadingStaffs: false,\r\n\tloadingStaffModal: false,\r\n\tloadingDeleteStaff: false,\r\n\tloadingConnections: false,\r\n\tloadingFacebookConnections: false,\r\n\tloadingTwilioConnections: false\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.GET_SETTINGS_ACCOUNT_REQUEST:\r\n\t\tcase ActionTypes.GET_SETTINGS_ACCOUNT_SUCCESS:\r\n\t\tcase ActionTypes.GET_SETTINGS_ACCOUNT_ERROR:\r\n\t\tcase ActionTypes.UPDATE_SETTINGS_ACCOUNT_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_SETTINGS_ACCOUNT_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_SETTINGS_ACCOUNT_ERROR:\r\n\t\tcase ActionTypes.UPDATE_STAFF_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_STAFF_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_STAFF_ERROR:\r\n\t\tcase ActionTypes.GET_STAFFS_REQUEST:\r\n\t\tcase ActionTypes.GET_STAFFS_ERROR:\r\n\t\tcase ActionTypes.GET_STAFFS_SUCCESS:\r\n\t\tcase ActionTypes.GET_STAFF_BY_ID_REQUEST:\r\n\t\tcase ActionTypes.GET_STAFF_BY_ID_ERROR:\r\n\t\tcase ActionTypes.GET_STAFF_BY_ID_SUCCESS:\r\n\t\tcase ActionTypes.DELETE_STAFF_BY_ID_SUCCESS:\r\n\t\tcase ActionTypes.DELETE_STAFF_BY_ID_REQUEST:\r\n\t\tcase ActionTypes.DELETE_STAFF_BY_ID_ERROR:\r\n\t\tcase ActionTypes.UPDATE_ACCOUNT_STATUS_ERROR:\r\n\t\tcase ActionTypes.UPDATE_ACCOUNT_STATUS_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_ACCOUNT_STATUS_SUCCESS:\r\n\t\tcase ActionTypes.GET_CONNECTIONS_REQUEST:\r\n\t\tcase ActionTypes.GET_CONNECTIONS_ERROR:\r\n\t\tcase ActionTypes.GET_CONNECTIONS_SUCCESS:\r\n\t\tcase ActionTypes.ADD_FACEBOOK_CONNECTION_ERROR:\r\n\t\tcase ActionTypes.ADD_FACEBOOK_CONNECTION_REQUEST:\r\n\t\tcase ActionTypes.ADD_FACEBOOK_CONNECTION_SUCCESS:\r\n\t\tcase ActionTypes.GET_FACEBOK_CONNECTIONS_REQUEST:\r\n\t\tcase ActionTypes.GET_FACEBOK_CONNECTIONS_ERROR:\r\n\t\tcase ActionTypes.GET_FACEBOK_CONNECTIONS_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_PAGE_SUBCRIBED_FIELD_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_PAGE_SUBCRIBED_FIELD_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_PAGE_SUBCRIBED_FIELD_ERROR:\r\n\t\tcase ActionTypes.ADD_TWILIO_CONNECTION_REQUEST:\r\n\t\tcase ActionTypes.ADD_TWILIO_CONNECTION_ERROR:\r\n\t\tcase ActionTypes.ADD_TWILIO_CONNECTION_SUCCESS:\r\n\t\tcase ActionTypes.GET_TWILIO_CONNECTIONS_REQUEST:\r\n\t\tcase ActionTypes.GET_TWILIO_CONNECTIONS_ERROR:\r\n\t\tcase ActionTypes.GET_TWILIO_CONNECTIONS_SUCCESS:\r\n\t\tcase ActionTypes.UPDATE_TWILIO_CONNECTION_REQUEST:\r\n\t\tcase ActionTypes.UPDATE_TWILIO_CONNECTION_ERROR:\r\n\t\tcase ActionTypes.UPDATE_TWILIO_CONNECTION_SUCCESS:\r\n\t\tcase ActionTypes.GET_TWILIO_CONNECTION_BY_ID_REQUEST:\r\n\t\tcase ActionTypes.GET_TWILIO_CONNECTION_BY_ID_ERROR:\r\n\t\tcase ActionTypes.GET_TWILIO_CONNECTION_BY_ID_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_ACCOUNT_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_ACCOUNT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_SELECTED_STAFF:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedStaff: null\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tstaff: {}\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch(action.type) {\r\n\t\tcase ActionTypes.GET_STAFF_BY_ID_REQUEST:\r\n\t\tcase ActionTypes.GET_STAFF_BY_ID_SUCCESS:\r\n\t\tcase ActionTypes.GET_STAFF_BY_ID_ERROR:\r\n\t\tcase ActionTypes.SUBMIT_STAFF_REQUEST:\r\n\t\tcase ActionTypes.SUBMIT_STAFF_SUCCESS:\r\n\t\tcase ActionTypes.SUBMIT_STAFF_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_STAFF_DETAILS_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_STAFF_DETAILS_PAGE:\r\n\t\t\treturn initialState;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tpages: []\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.GET_PAGES_REQUEST:\r\n\t\tcase ActionTypes.GET_PAGES_ERROR:\r\n\t\tcase ActionTypes.GET_PAGES_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_ACCOUNT_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_ACCOUNT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import * as ActionTypes from '../constants/ActionTypes';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\treports: []\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase ActionTypes.GET_REPORTS_REQUEST:\r\n\t\tcase ActionTypes.GET_REPORTS_ERROR:\r\n\t\tcase ActionTypes.GET_REPORTS_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_REPORTS_PAGE_META:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmeta: null\r\n\t\t\t};\r\n\t\tcase ActionTypes.RESET_ACCOUNT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...initialState\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport thunk from 'redux-thunk';\r\nimport { createBrowserHistory } from 'history';\r\nimport rootReducer from './reducers';\r\n\r\nexport const history = createBrowserHistory({\r\n\tbasename: process.env.NODE_ENV === 'development' ? '/' : '/app'\r\n});\r\n\r\n// Initialize store\r\nlet store;\r\n\r\n// Return a function so we can configure it\r\nexport default () => {\r\n\tif (store) {\r\n\t\treturn store;\r\n\t}\r\n\r\n\tconst initialState = {};\r\n\tconst enhancers = [];\r\n\tconst middleware = [thunk, routerMiddleware(history)];\r\n\r\n\t// if (process.env.NODE_ENV === 'development') {\r\n\t// \tconst devToolsExtension = window.devToolsExtension;\r\n\r\n\t// \tif (typeof devToolsExtension === 'function') {\r\n\t// \t\tenhancers.push(devToolsExtension());\r\n\t// \t}\r\n\t// }\r\n\r\n\t// enhancers\r\n\tconst composedEnhancers = compose(\r\n\t\tapplyMiddleware(...middleware),\r\n\t\t// devtools redux\r\n\t\t(process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'testing' || process.env.NODE_ENV === 'testing2')\r\n\t\t\t&& window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__() : compose(),\r\n\t\t...enhancers\r\n\t);\r\n\r\n\t// create store\r\n\tstore = createStore(rootReducer(history), initialState, composedEnhancers);\r\n\r\n\treturn store;\r\n};\r\n","import development from './environment/development';\r\nimport production from './environment/production';\r\nimport testing from './environment/testing';\r\n\r\nconst configs = {\r\n\tdevelopment,\r\n\ttesting,\r\n\tproduction\r\n};\r\n\r\nexport default configs[process.env.NODE_ENV] || configs.development;\r\n","export default {\r\n\tapi: 'http://localhost:3000',\r\n\t// api: 'https://api.anndesk.com',\r\n\tloginTimeout: 86400,\r\n\tsocket: {\r\n\t\thost: 'http://localhost:3000',\r\n\t\t// host: 'https://api.anndesk.com',\r\n\t\tpath: '/socket.io'\r\n\t},\r\n\tfacebook: {\r\n\t\tapp_id: '2571818449753064'\r\n\t}\r\n};\r\n","export default {\r\n\tapi: 'https://anndesk.com/api',\r\n\tloginTimeout: 86400,\r\n\tsocket: {\r\n\t\thost: 'https://anndesk.com/api',\r\n\t\tpath: '/socket.io'\r\n\t},\r\n\tfacebook: {\r\n\t\tapp_id: '2850616228310859'\r\n\t}\r\n};\r\n","export default {\r\n\tapi: 'https://api.anndesk.com',\r\n\tloginTimeout: 86400,\r\n\tsocket: {\r\n\t\thost: 'https://api.anndesk.com',\r\n\t\tpath: '/socket.io'\r\n\t},\r\n\tfacebook: {\r\n\t\tapp_id: '511084842884328'\r\n\t}\r\n};\r\n","import moment from 'moment';\r\nimport config from './../config';\r\n\r\nconst AuthHelper = {\r\n\tisAuthenticated() {\r\n\t\tconst jsonData = JSON.parse(localStorage.getItem('app'));\r\n\t\tif (!jsonData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst { token, last_login } = jsonData;\r\n\t\tconst now = moment();\r\n\r\n\t\tif (token && last_login) {\r\n\t\t\tconst tokenLifeInSeconds = now.diff(moment(new Date(last_login)).toISOString(), 'seconds');\r\n\t\t\treturn tokenLifeInSeconds < config.loginTimeout;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport default AuthHelper;\r\n","import React, { Component } from 'react';\r\nimport { AppProvider } from '@shopify/polaris';\r\nimport './index.scss';\r\n\r\nconst colors = {\r\n\tprimary: '#006FBB'\r\n\t// secondary: '#DE3618'\r\n};\r\n\r\nexport class BasicLayout extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<AppProvider \r\n\t\t\t\tfeatures={{newDesignLanguage: true}}\r\n\t\t\t\ttheme={{ colors }}\r\n\t\t\t>\r\n\t\t\t\t<div style={{ paddingLeft: 20, paddingRight: 20, paddingTop: 40 }}>\r\n\t\t\t\t\t{this.props.children}\r\n\t\t\t\t</div>\r\n\t\t\t</AppProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default BasicLayout;\r\n","import React, { Component } from 'react';\r\nimport {  Layout, Menu, Space } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport URLParse from 'url-parse';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHandshake, faFlag, faTachometerAlt, faCircleNotch, faBullhorn, faGear, faCalendarAlt, faClipboardList, faUserFriends, faToolbox, faChalkboardTeacher, faFolderOpen, faCog, faLaptop, faListOl, faDollarSign, faUsers } from '@fortawesome/free-solid-svg-icons';\r\nimport { CalendarOutlined } from '@ant-design/icons';\r\n\r\nconst { SubMenu } = Menu;\r\nconst { Sider } = Layout;\r\n\r\nconst rootSubmenuKeys = ['sub-bookings', 'sub-projects', 'sub-job-orders', 'sub-users', 'sub-serv-groups-and-equipment', 'sub-advanced', 'sub-consums-assories', 'sub-consum-orders', 'sub-billings'];\r\n\r\nexport class Drawer extends Component {\r\n\tstate = {\r\n\t\topenKeys: []\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getActiveSubmenu();\r\n\t}\r\n\r\n\tgetActiveItem({ pathname, search }) {\r\n\t\tconst { query } = URLParse(search, true);\r\n\t\tswitch (true) {\r\n\t\t\tcase /\\/dashboard/.test(pathname):\r\n\t\t\t\treturn ['dashboard'];\r\n\t\t\tcase /\\/staffs/.test(pathname):\r\n\t\t\t\treturn ['staffs'];\r\n\t\t\tcase /\\/tickets/.test(pathname):\r\n\t\t\t\treturn ['tickets'];\r\n\t\t\tcase /\\/settings/.test(pathname):\r\n\t\t\t\treturn ['settings'];\r\n\t\t\tcase /\\/reports/.test(pathname):\r\n\t\t\t\treturn ['reports'];\r\n\t\t\tcase /\\/subscription/.test(pathname):\r\n\t\t\t\treturn ['subscription'];\r\n\t\t\tcase /\\/messenger-integration/.test(pathname):\r\n\t\t\t\treturn ['messenger-integration'];\r\n\t\t\tcase /\\/messenger-settings/.test(pathname):\r\n\t\t\t\treturn ['messenger-settings'];\r\n\t\t\tcase /\\/jo-sams/.test(pathname):\r\n\t\t\t\treturn ['jo-sams'];\r\n\t\t\tcase /\\/jo-workflows/.test(pathname):\r\n\t\t\t\treturn ['jo-workflows'];\r\n\t\t\tcase /\\/users/.test(pathname):\r\n\t\t\t\treturn ['users'];\r\n\t\t\tcase /\\/pis/.test(pathname):\r\n\t\t\t\treturn ['pis'];\r\n\t\t\tcase /\\/user-application-settings/.test(pathname):\r\n\t\t\t\treturn ['user-application-settings'];\r\n\t\t\tcase /\\/user-application/.test(pathname):\r\n\t\t\t\treturn ['user-application'];\r\n\t\t\tcase /\\/external-user-application-settings/.test(pathname):\r\n\t\t\t\treturn ['external-user-application-settings'];\r\n\t\t\tcase /\\/external-user-application/.test(pathname):\r\n\t\t\t\treturn ['external-user-application'];\r\n\t\t\tcase /\\/servgp/.test(pathname):\r\n\t\t\t\treturn ['servgp'];\r\n\t\t\tcase /\\/equips/.test(pathname):\r\n\t\t\t\treturn ['equips'];\r\n\t\t\tcase /\\/equip-workflows/.test(pathname):\r\n\t\t\t\treturn ['equips'];\r\n\t\t\tcase /\\/equip-penalties/.test(pathname):\r\n\t\t\t\treturn ['equips'];\r\n\t\t\tcase /\\/equip-bks/.test(pathname):\r\n\t\t\t\treturn ['equips'];\r\n\t\t\tcase /\\/equip-charging-schemes/.test(pathname):\r\n\t\t\t\treturn ['equips'];\r\n\t\t\tcase /\\/assories/.test(pathname):\r\n\t\t\t\treturn ['assories'];\r\n\t\t\tcase /\\/consums/.test(pathname):\r\n\t\t\t\treturn ['consums'];\r\n\t\t\tcase /\\/admins/.test(pathname):\r\n\t\t\t\treturn ['admins'];\r\n\t\t\tcase /\\/charge-types/.test(pathname):\r\n\t\t\t\treturn ['charge-types'];\r\n\t\t\tcase /\\/user-types/.test(pathname):\r\n\t\t\t\treturn ['user-types'];\r\n\t\t\tcase /\\/locations/.test(pathname):\r\n\t\t\t\treturn ['locations'];\r\n\t\t\tcase /\\/assorycats/.test(pathname):\r\n\t\t\t\treturn ['assorycats'];\r\n\t\t\tcase /\\/consumcats/.test(pathname):\r\n\t\t\t\treturn ['consumcats'];\r\n\t\t\tcase /\\/consum-inventory/.test(pathname):\r\n\t\t\t\treturn ['consum-inventory'];\r\n\t\t\tcase /\\/consum-batch-maintain/.test(pathname):\r\n\t\t\t\treturn ['consum-batch-maintain'];\r\n\t\t\t// case /\\/admins/.test(pathname):\r\n\t\t\t// \treturn ['equips'];\r\n\t\t\tcase /\\/skills/.test(pathname):\r\n\t\t\t\treturn ['skills'];\r\n\t\t\tcase /\\/trainings/.test(pathname):\r\n\t\t\t\treturn ['trainings'];\r\n\t\t\tcase /\\/users/.test(pathname):\r\n\t\t\t\treturn ['users'];\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgetActiveSubmenu() {\r\n\t\tconst pathname = this.props.location.pathname;\r\n\t\tswitch (true) {\r\n\t\t\tcase/\\/subscriptions/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['subscriptions']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase/\\/settings/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['settings']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase/\\/subscription/.test(pathname) || /\\/project-types/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['subscription']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\t\t\t\t\t\r\n\t\t\tcase /\\/jo-forms/.test(pathname) || /\\/jo-types/.test(pathname) || /\\/jo-sams/.test(pathname) || /\\/jo-workflows/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['sub-job-orders']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase /\\/admins/.test(pathname) || /\\/charge-types/.test(pathname) || /\\/user-types/.test(pathname) || /\\/locations/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['sub-advanced']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase /\\/users/.test(pathname) || /\\/pis/.test(pathname) || /\\/user-application/.test(pathname) || /\\/user-application-settings/.test(pathname) || /\\/external-user-application/.test(pathname) || /\\/external-user-application-settings/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['sub-users']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase /\\/equips/.test(pathname) || /\\/servgp/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['sub-serv-groups-and-equipment']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase /\\/assories/.test(pathname) || /\\/consums/.test(pathname) || /\\/consumcats/.test(pathname) || /\\/assorycats/.test(pathname) || /\\/consum-inventory/.test(pathname) || /\\/consum-batch-maintain/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['sub-consums-assories']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase /\\/skills/.test(pathname) || /\\/trainings/.test(pathname):\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\topenKeys: ['sub-skills-and-trainings']\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tonOpenChange = keys => {\r\n\t\tconst latestOpenKey = keys.find(key => this.state.openKeys.indexOf(key) === -1);\r\n\t\tif (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\r\n\t\t\tthis.setState({\r\n\t\t\t\topenKeys: keys\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\topenKeys: latestOpenKey ? [latestOpenKey] : []\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst activeItem = this.getActiveItem({\r\n\t\t\tpathname: this.props.location.pathname,\r\n\t\t\tsearch: this.props.location.search\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Sider\r\n\t\t\t\ttrigger={null}\r\n\t\t\t\tbreakpoint=\"lg\"\r\n\t\t\t\tcollapsedWidth=\"0\"\r\n\t\t\t\tonCollapse={this.props.handleOnCollapse}\r\n\t\t\t\tcollapsed={this.props.collapsed}\r\n\t\t\t\twidth=\"256\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tzIndex: 30\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"menu-logo\" />\r\n\t\t\t\t<Menu\r\n\t\t\t\t\ttheme=\"dark\"\r\n\t\t\t\t\tmode=\"inline\"\r\n\t\t\t\t\topenKeys={this.state.openKeys}\r\n\t\t\t\t\tonOpenChange={this.onOpenChange}\r\n\t\t\t\t\tselectedKeys={activeItem}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div  style={{textAlign: 'center', margin: '1em', padding: '1em'}}>\r\n\t\t\t\t\t\t<span style={{fontSize: '20px'}}><Link\r\n\t\t\t\t\t\t\tto=\"/dashboard\"\r\n\t\t\t\t\t\t\tstyle={{color: \"white\"}}\r\n\t\t\t\t\t\t                                 >Anndesk</Link></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Menu.Item key=\"dashboard\">\r\n\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\ticon={faTachometerAlt}\r\n\t\t\t\t\t\t\tfixedWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Dashboard</span>\r\n\t\t\t\t\t\t<Link to=\"/dashboard\" />\r\n\t\t\t\t\t</Menu.Item>\r\n\r\n\t\t\t\t\t<Menu.Item key=\"tickets\">\r\n\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\ticon={faClipboardList}\r\n\t\t\t\t\t\t\tfixedWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Tickets</span>\r\n\t\t\t\t\t\t<Link to=\"/tickets\" />\r\n\t\t\t\t\t</Menu.Item>\r\n\r\n\t\t\t\t\t<Menu.Item key=\"staffs\">\r\n\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\ticon={faUserFriends}\r\n\t\t\t\t\t\t\tfixedWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Staff</span>\r\n\t\t\t\t\t\t<Link to=\"/staffs\" />\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<SubMenu\r\n\t\t\t\t\t\tkey=\"sub-bookings\"\r\n\t\t\t\t\t\ticon={<FontAwesomeIcon\r\n\t\t\t\t\t\t\ticon={faCircleNotch}\r\n\t\t\t\t\t\t\tfixedWidth\r\n\t\t\t\t\t\t      />}\r\n\t\t\t\t\t\ttitle=\"Channel\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Menu.Item key=\"messenger-integration\">\r\n\t\t\t\t\t\t\t<span className=\"nav-text\">Messenger Integration</span>\r\n\t\t\t\t\t\t\t<Link to=\"/messenger-integration\" />\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t<Menu.Item key=\"messenger-settings\">\r\n\t\t\t\t\t\t\t<span className=\"nav-text\">Messenger Settings</span>\r\n\t\t\t\t\t\t\t<Link to=\"/messenger-settings\" />\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t</SubMenu>\r\n\r\n\t\t\t\t\t<Menu.Item key=\"reports\">\r\n\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\ticon={faFlag}\r\n\t\t\t\t\t\t\tfixedWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Reports</span>\r\n\t\t\t\t\t\t<Link to=\"/reports\" />\r\n\t\t\t\t\t</Menu.Item>\r\n\r\n\t\t\t\t\t<SubMenu\r\n\t\t\t\t\t\tkey=\"settings\"\r\n\t\t\t\t\t\ticon={<FontAwesomeIcon\r\n\t\t\t\t\t\t\ticon={faCog}\r\n\t\t\t\t\t\t\tfixedWidth\r\n\t\t\t\t\t\t      />}\r\n\t\t\t\t\t\ttitle=\"Settings\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Menu.Item key=\"settings\">\r\n\t\t\t\t\t\t\t<span className=\"nav-text\">My Account</span>\r\n\t\t\t\t\t\t\t<Link to=\"/settings\" />\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t<Menu.Item key=\"subscription\">\r\n\t\t\t\t\t\t\t<span className=\"nav-text\">Subscription</span>\r\n\t\t\t\t\t\t\t<Link to=\"/subscription\" />\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t</SubMenu>\r\n\r\n\t\t\t\t</Menu>\r\n\r\n\t\t\t</Sider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Drawer;\r\n","const LocalStorageHelper = {\r\n\tgetName() {\r\n\t\ttry {\r\n\t\t\tconst { admin, staff } = JSON.parse(localStorage.getItem('app'));\r\n\t\t\treturn admin && admin.name || staff && staff.name;\r\n\t\t} catch (e) { }\r\n\t\treturn '';\r\n\t},\r\n\tgetLoginType() {\r\n\t\ttry {\r\n\t\t\tconst type = JSON.parse(localStorage.getItem('app')).type;\r\n\t\t\treturn type;\r\n\t\t} catch (e) { }\r\n\t\treturn '';\r\n\t},\r\n\tgetUserId() {\r\n\t\ttry {\r\n\t\t\tconst { admin, staff } = JSON.parse(localStorage.getItem('app'));\r\n\t\t\treturn admin && admin._id || staff && staff.parent_user_id;\r\n\t\t} catch (e) { }\r\n\t\treturn '';\r\n\t},\r\n\tgetLoggedIn() {\r\n\t\ttry {\r\n\t\t\tconst { admin, staff } = JSON.parse(localStorage.getItem('app'));\r\n\t\t\treturn admin && admin || staff && staff;\r\n\t\t} catch (e) { }\r\n\t\treturn '';\r\n\t}\r\n\r\n};\r\nexport default LocalStorageHelper;\r\n","import React, { Component, Grid } from 'react';\r\n//import useBreakpoint from 'use-breakpoint';\r\nimport {\r\n\tMenuUnfoldOutlined,\r\n\tMenuFoldOutlined,\r\n\tUserOutlined,\r\n\tLogoutOutlined\r\n} from '@ant-design/icons';\r\nimport { Space, Divider, Layout, Menu, Avatar, Select, Form, Typography, Dropdown, Button, Row } from 'antd';\r\nimport _ from 'lodash';\r\nimport LocalStorageHelper from '../../helpers/local_storage';\r\n\r\nconst { Header } = Layout;\r\nconst { SubMenu } = Menu;\r\nconst { Option } = Select;\r\nconst { Title, Link } = Typography;\r\n\r\n\r\nexport class NavigationHeader extends Component {\r\n\thandleLanguageMenuClick = () => { };\r\n\thandleSettingMenuClick = () => { };\r\n\thandleLogout = () => {\r\n\t\tthis.props.history.push('/logout');\r\n\t};\r\n\r\n\tgetUsernameAvatar = (username, size = 'large') => {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Avatar\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: '#322105',\r\n\t\t\t\t\t\tbackgroundColor: '#faa61a',\r\n\t\t\t\t\t\tverticalAlign: 'middle'\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize={size}\r\n\t\t\t\t>\r\n\t\t\t\t\t{username ? username.charAt(0).toUpperCase() : ''}\r\n\t\t\t\t</Avatar>\r\n\t\t\t\t<span style={{ paddingLeft: 20 }}>{username}</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\r\n\trender() {\r\n\r\n\t\tconst userMenu = (\r\n\t\t\t<Menu>\r\n\t\t\t\t<Menu.Item\r\n\t\t\t\t\tkey=\"setting:2\"\r\n\t\t\t\t\tonClick={this.handleLogout}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t<LogoutOutlined />\r\n\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t</Menu>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\ttrigger={null}\r\n\t\t\t\t\t\tclassName=\"header fixed-header-action\"\r\n\t\t\t\t\t\tstyle={{ background: '#fff', width: '100%'}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Space\r\n\t\t\t\t\t\t\talign=\"end\"\r\n\t\t\t\t\t\t\tstyle={{display: 'flex', justifyContent: 'space-between'}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<> </>\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tclassName=\"header-user-part\"\r\n\t\t\t\t\t\t\t\toverlay={userMenu}\r\n\t\t\t\t\t\t\t\tplacement=\"bottomRight\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Row\r\n\t\t\t\t\t\t\t\t\tjustify=\"space-around\"\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\talignSelf: 'center',\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'inline-flex',\r\n\t\t\t\t\t\t\t\t\t\tmarginRight: '15px',\r\n\t\t\t\t\t\t\t\t\t\tmaxWidth: '200px',\r\n\t\t\t\t\t\t\t\t\t\tborder: 'none',\r\n\t\t\t\t\t\t\t\t\t\twhiteSpace: 'nowrap'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.getUsernameAvatar(LocalStorageHelper.getName())}\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</Header>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default NavigationHeader;\r\n","import _ from 'lodash';\r\n\r\nconst GeneralHelper = {\r\n\tqueryStringToObject(queryString) {\r\n\t\tif (!queryString || !_.isString(queryString)) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tif (queryString.indexOf('?') === 0) {\r\n\t\t\tqueryString = queryString.substring(1);\r\n\t\t}\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(\r\n\t\t\t\t'{\"' +\r\n\t\t\t\tdecodeURI(queryString)\r\n\t\t\t\t\t.replace(/\"/g, '\\\\\"')\r\n\t\t\t\t\t.replace(/&/g, '\",\"')\r\n\t\t\t\t\t.replace(/=/g, '\":\"') +\r\n\t\t\t\t'\"}'\r\n\t\t\t);\r\n\t\t} catch (e) { }\r\n\t\treturn {};\r\n\t},\r\n\tisEmailValid(email) {\r\n\t\tconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\t\treturn emailRegex.test(email);\r\n\t},\r\n\tisUstEmail(email) {\r\n\t\tif (!email || !GeneralHelper.isEmailValid(email)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn _.endsWith(email, '@ust.hk') || _.endsWith(email, '.ust.hk');\r\n\t},\r\n\tgetImageBasePath() {\r\n\t\tlet path = '';\r\n\r\n\t\tif (process.env.NODE_ENV === 'development') {\r\n\t\t\tpath = '';\r\n\t\t}\r\n\r\n\t\treturn path;\r\n\t}\r\n};\r\n\r\nexport default GeneralHelper;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Layout, Breadcrumb, Typography } from 'antd';\r\nimport Drawer from '../components/drawer';\r\nimport NavigationHeader from '../components/header';\r\n\r\nimport GeneralHelper from '../helpers/general';\r\nimport LocalStorageHelper from '../helpers/local_storage';\r\n\r\nconst { Header, Content, Footer } = Layout;\r\nconst { Title } = Typography;\r\n\r\nexport class NavigationLayout extends Component {\r\n\tstate = {\r\n\t\tcollapsed: false,\r\n\t\tBreadcrumbSection: [\r\n\t\t\t{ key: 'homePage', content: 'Lab Booking System', active: true }\r\n\t\t],\r\n\t\tBreadcrumbTitle: ' '\r\n\t}\r\n\r\n\thandleOnCollapse = () => {\r\n\t\tthis.setState({\r\n\t\t\tcollapsed: !this.state.collapsed\r\n\t\t});\r\n\t}\r\n\r\n\tsetBreadcrumbNavigationBar = (input) => {\r\n\t\tthis.setState({\r\n\t\t\tBreadcrumbSection: input\r\n\t\t});\r\n\t}\r\n\r\n\tsetBreadcrumbTitle = (input) => {\r\n\t\tthis.setState({\r\n\t\t\tBreadcrumbTitle: input\r\n\t\t});\r\n\t}\r\n\r\n\tShowNavigationBar = () => {\r\n\t\tvar sections = this.state.BreadcrumbSection;\r\n\t\tvar title = this.state.BreadcrumbTitle;\r\n\t\treturn (\r\n\t\t\t<Header\r\n\t\t\t\tclassName=\"breadcrumb-header\"\r\n\t\t\t\tstyle={{ marginTop: 64 }}\r\n\t\t\t>\r\n\t\t\t\t<Breadcrumb>\r\n\t\t\t\t\t{sections &&\r\n\t\t\t\t\t\tsections.map(section => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Breadcrumb.Item key={section.key}>\r\n\t\t\t\t\t\t\t\t\t{section.link ? (\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={section.onClick}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{section.content}\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\tsection.content\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</Breadcrumb>\r\n\t\t\t\t<Title\r\n\t\t\t\t\tlevel={5}\r\n\t\t\t\t\tstyle={{ paddingTop: 10 }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</Title>\r\n\t\t\t</Header>\r\n\t\t);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { location, history } = this.props.children.props;\r\n\t\tvar setBreadcrumbNavigationBar = this.setBreadcrumbNavigationBar.bind(this);\r\n\t\tvar setBreadcrumbTitle = this.setBreadcrumbTitle.bind(this);\r\n\t\treturn (\r\n\t\t\t<Layout style={{ minHeight: '100vh' }}>\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tlocation={location}\r\n\t\t\t\t\thistory={history}\r\n\t\t\t\t\tcollapsed={this.state.collapsed}\r\n\t\t\t\t\thandleOnCollapse={() => this.handleOnCollapse()}\r\n\t\t\t\t/>\r\n\t\t\t\t<Layout>\r\n\t\t\t\t\t<NavigationHeader\r\n\t\t\t\t\t\tlocation={location}\r\n\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t\tcollapsed={this.state.collapsed}\r\n\t\t\t\t\t\thandleOnCollapse={() => this.handleOnCollapse()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Content style={{ margin: '16px 16px 0' }}>\r\n\t\t\t\t\t\t{React.cloneElement(this.props.children, { setBreadcrumbNavigationBar: setBreadcrumbNavigationBar, setBreadcrumbTitle: setBreadcrumbTitle })}\r\n\t\t\t\t\t</Content>\r\n\t\t\t\t</Layout>\r\n\t\t\t</Layout>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default NavigationLayout;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { TextField, Select, Checkbox } from '@shopify/polaris';\r\n\r\n// Render fields\r\nconst renderFormInput = ({\r\n\tinput,\r\n\tmeta: { touched, invalid, error },\r\n\t...custom\r\n}) => {\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\t{...input}\r\n\t\t\t{...custom}\r\n\t\t\terror={touched && !_.isNil(error)}\r\n\t\t\tautoComplete=\"off\"\r\n\t\t/>\r\n\t);\r\n};\r\n\r\n// const renderFormTextArea = ({\r\n// \tinput,\r\n// \tmeta: { touched, invalid, error },\r\n// \t...custom\r\n// }) => {\r\n// \treturn (\r\n// \t\t<Form.TextArea\r\n// \t\t\t{...input}\r\n// \t\t\t{...custom}\r\n// \t\t\terror={touched && !_.isNil(error)}\r\n// \t\t\tautoComplete=\"off\"\r\n// \t\t/>\r\n// \t);\r\n// };\r\n\r\nconst renderFormSelect = ({\r\n\tinput,\r\n\tmeta: { touched, invalid, error },\r\n\t...custom\r\n}) => {\r\n\treturn (\r\n\t\t<Select\r\n\t\t\t{...input}\r\n\t\t\t{...custom}\r\n\t\t\terror={touched && !_.isNil(error)}\r\n\t\t\tonChange={(value) => input.onChange(value)}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\n\r\n// const renderDateRange = ({\r\n// \tinput,\r\n// \tmeta: { touched, invalid, error },\r\n// \t...custom\r\n// }) => {\r\n// \treturn (\r\n// \t\t<DatesRangeInput\r\n// \t\t\t{...input}\r\n// \t\t\t{...custom}\r\n// \t\t\terror={touched && !_.isNil(error)}\r\n// \t\t\tonChange={(e, { value }) => input.onChange(value)}\r\n// \t\t\tonClear={(e, { value }) => input.onChange()}\r\n// \t\t\tautoComplete=\"off\"\r\n// \t\t/>\r\n// \t);\r\n// };\r\n\r\nconst renderCheckbox = ({\r\n\tinput,\r\n\tmeta: { touched, invalid, error },\r\n\t...custom\r\n}) => {\r\n\treturn (\r\n\t\t<Checkbox\r\n\t\t\t{...input}\r\n\t\t\t{...custom}\r\n\t\t\terror={touched && !_.isNil(error)}\r\n\t\t\tonChange={(checked) => input.onChange(checked)}\r\n\t\t// onClear={(e, { value }) => input.onChange()}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\n// const renderDateInput = ({\r\n// \tinput,\r\n// \tmeta: { touched, invalid, error },\r\n// \t...custom\r\n// }) => {\r\n// \treturn (\r\n// \t\t<DateInput\r\n// \t\t\t{...input}\r\n// \t\t\t{...custom}\r\n// \t\t\terror={touched && !_.isNil(error)}\r\n// \t\t\tonChange={(e, { value }) => input.onChange(value)}\r\n// \t\t\tonClear={(e, { value }) => input.onChange()}\r\n// \t\t\tautoComplete=\"off\"\r\n// \t\t/>\r\n// \t);\r\n// };\r\n\r\n// const renderTimeInput = ({\r\n// \tinput,\r\n// \tmeta: { touched, invalid, error },\r\n// \t...custom\r\n// }) => {\r\n// \treturn (\r\n// \t\t<TimeInput\r\n// \t\t\t{...input}\r\n// \t\t\t{...custom}\r\n// \t\t\terror={touched && !_.isNil(error)}\r\n// \t\t\tonChange={(e, { value }) => input.onChange(value)}\r\n// \t\t\tonClear={(e, { value }) => input.onChange()}\r\n// \t\t\tautoComplete=\"off\"\r\n// \t\t/>\r\n// \t);\r\n// };\r\n\r\n// const renderYearInput = ({\r\n// \tinput,\r\n// \tmeta: { touched, invalid, error },\r\n// \t...custom\r\n// }) => {\r\n// \treturn (\r\n// \t\t<YearInput\r\n// \t\t\t{...input}\r\n// \t\t\t{...custom}\r\n// \t\t\terror={touched && !_.isNil(error)}\r\n// \t\t\tonChange={(e, { value }) => input.onChange(value)}\r\n// \t\t\tonClear={(e, { value }) => input.onChange('')}\r\n// \t\t\tautoComplete=\"off\"\r\n// \t\t/>\r\n// \t);\r\n// };\r\n\r\n\r\nconst renderFileInputButton = ({\r\n\tinput: { value: omitValue, onChange, onBlur, ...inputProps },\r\n\tmeta: omitMeta,\r\n\t...props\r\n}) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<label\r\n\t\t\t\thtmlFor=\"file\"\r\n\t\t\t\tclassName=\"ui icon button\"\r\n\t\t\t>Select file</label>\r\n\t\t\t<input\r\n\t\t\t\tid=\"file\"\r\n\t\t\t\tonChange={adaptFileEventToValue(onChange)}\r\n\t\t\t\tonBlur={adaptFileEventToValue(onBlur)}\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\t{...props.input}\r\n\t\t\t\t{...props}\r\n\t\t\t\thidden\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Validations\r\nconst validateRequired = value => (value || typeof value === 'number' ? undefined : 'Required');\r\nconst validateDateRange = value => {\r\n\tconst datesArr = _.compact(value.split(' - '));\r\n\treturn datesArr.length === 2 ? undefined : 'Select two dates';\r\n};\r\nconst validateNumberMin = (value, min) => +value >= (_.isNil(min) ? 0 : +min) ? undefined : `Minimum is ${_.isNil(min) ? 0 : +min}`;\r\nconst validateNumberMax = (value, max) => +value <= (_.isNil(max) ? 0 : +max) ? undefined : `Maximum is ${_.isNil(max) ? 0 : +max}`;\r\n\r\n// custom validation\r\nconst _isEmail = value => {\r\n\tconst re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\treturn re.test(String(value).toLowerCase());\r\n};\r\nconst validateEmail = value => {\r\n\treturn _isEmail(value) ? undefined : 'Invalid Email';\r\n};\r\nconst validateUstEmail = value => {\r\n\tif (!value || !_isEmail(value)) {\r\n\t\treturn 'Invalid Email';\r\n\t}\r\n\treturn (_.endsWith(value, '@ust.hk') || _.endsWith(value, '.ust.hk')) ? undefined : 'Invalid Email';\r\n};\r\n\r\nconst adaptFileEventToValue = delegate => e => delegate(e.target.files[0]);\r\n\r\n\r\nexport {\r\n\t// render fields\r\n\trenderFormInput,\r\n\t// renderFormTextArea,\r\n\trenderCheckbox,\r\n\trenderFormSelect,\r\n\t// renderDateRange,\r\n\t// renderDateInput,\r\n\t// renderTimeInput,\r\n\t// renderYearInput,\r\n\trenderFileInputButton,\r\n\t// validations\r\n\tvalidateRequired,\r\n\tvalidateDateRange,\r\n\tvalidateNumberMin,\r\n\tvalidateNumberMax,\r\n\tvalidateEmail,\r\n\tvalidateUstEmail\r\n};\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Form, FormLayout, DisplayText, TextStyle, Layout, Card, Page } from '@shopify/polaris';\r\nimport { Checkbox, Row, Image, Space } from 'antd';\r\nimport { AbandonedCartMajorMonotone } from '@shopify/polaris-icons';\r\nimport { Button as ButtonAD, Divider } from 'antd';\r\nimport { GoogleOutlined } from '@ant-design/icons';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport GeneralHelper from '../../helpers/general';\r\nimport { renderFormInput, validateEmail, validateRequired } from '../../helpers/redux_form';\r\nimport './LoginPage.scss';\r\nimport { MessengerChat } from \"react-messenger-chat-plugin\";\r\n\r\nclass LoginPage extends Component {\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { meta: prevMeta } = prevProps.loginPageProps;\r\n\t\tconst { meta } = this.props.loginPageProps;\r\n\r\n\t\tif (meta && meta !== prevMeta) {\r\n\t\t\tconst alertOptions = {\r\n\t\t\t\ttype: meta.code === 200 ? 'success' : 'error',\r\n\t\t\t\t...(meta.code === 40399 && { timeout: 0 })\r\n\t\t\t};\r\n\r\n\t\t\tthis.props.alert.show(meta.message, alertOptions);\r\n\t\t\tthis.props.resetMeta();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\trender() {\r\n\t\tconst { pristine, submitting, invalid, loadingSubmit } = this.props;\r\n\t\tconst checkbox = (e) => {\r\n\t\t\treturn (e.target.checked);\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Row\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: '92vh'\r\n\t\t\t\t}}\r\n\t\t\t\tjustify=\"center\"\r\n\t\t\t\talign=\"middle\"\r\n\t\t\t>\r\n\t\t\t\t<MessengerChat\r\n\t\t\t\t\tpageId=\"286645431852598\"\r\n\t\t\t\t\tlanguage=\"sv_SE\"\r\n\t\t\t\t\tthemeColor={\"#000000\"}\r\n\t\t\t\t\tbottomSpacing={300}\r\n\t\t\t\t\tloggedInGreeting=\"loggedInGreeting\"\r\n\t\t\t\t\tloggedOutGreeting=\"loggedOutGreeting\"\r\n\t\t\t\t\tgreetingDialogDisplay={\"show\"}\r\n\t\t\t\t\tdebugMode={true}\r\n\t\t\t\t\tonMessengerShow={() => {\r\n\t\t\t\t\t\tconsole.log(\"onMessengerShow\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMessengerHide={() => {\r\n\t\t\t\t\t\tconsole.log(\"onMessengerHide\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMessengerDialogShow={() => {\r\n\t\t\t\t\t\tconsole.log(\"onMessengerDialogShow\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMessengerDialogHide={() => {\r\n\t\t\t\t\t\tconsole.log(\"onMessengerDialogHide\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMessengerMounted={() => {\r\n\t\t\t\t\t\tconsole.log(\"onMessengerMounted\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMessengerLoad={() => {\r\n\t\t\t\t\t\tconsole.log(\"onMessengerLoad\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<div style={{ width: '40em', margin: 'auto' }}>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<center style={{ float: 'center', padding: '50px' }}>\r\n\t\t\t\t\t\t\t<DisplayText\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\telement=\"h2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tSign in to <span style={{ color: '#0088ff' }}>anndesk</span>\r\n\t\t\t\t\t\t\t</DisplayText>\r\n\t\t\t\t\t\t\t<DisplayText size=\"small\">Enter your details below</DisplayText>\r\n\t\t\t\t\t\t</center>\r\n\t\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t\t<Form onSubmit={this.props.handleSubmit(data => this.props.login(data))}>\r\n\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: '10px' }}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Email Address\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateEmail, validateRequired]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox onChange={checkbox}>Remember Me</Checkbox>\r\n\t\t\t\t\t\t\t\t\t\t<span style={{ float: 'right' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"forgot-password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tto=\"/forgot-password\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tForgot your Password?\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<ButtonAD\r\n\t\t\t\t\t\t\t\t\t\ttype = \"primary\"\r\n\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\tstyle = {{background: '#09509d', borderColor: '#09509d'}}\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.handleSubmit(data => this.props.login(data))}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t</ButtonAD>\r\n\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t</Card.Section>\r\n\r\n\t\t\t\t\t\t{/* Or Divider */}\r\n\t\t\t\t\t\t<Divider\r\n\t\t\t\t\t\t\tstyle={{paddingLeft: 25, paddingRight: 25}}\r\n\t\t\t\t\t\t\torientation=\"center\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<span style={{color: 'grey'}}>or</span>\r\n\t\t\t\t\t\t</Divider>\r\n\r\n\t\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tid=\"google-button\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\twidth={20}\r\n\t\t\t\t\t\t\t\t\t\tsrc={`${GeneralHelper.getImageBasePath()}/images/google-logo.svg`}\r\n\t\t\t\t\t\t\t\t\t\tpreview={false}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<div>Continue with Google</div>\r\n\t\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<center style={{ margin: '2em' }}>\r\n\t\t\t\t\t\t\t\t<TextStyle>\r\n\t\t\t\t\t\t\t\t\t<span style={{ color: '#9b9ba1' }}>Don't have an account? &nbsp;</span>\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: 'none' }}\r\n\t\t\t\t\t\t\t\t\t\tto=\"/register\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<strong style={{color: '#09509d'}}>Get Started</strong>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</TextStyle>\r\n\t\t\t\t\t\t\t</center>\r\n\t\t\t\t\t\t</Card.Section>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t</Row>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'LoginPage'\r\n\t})\r\n)(LoginPage);\r\n","import _ from 'lodash';\r\nimport superagent from 'superagent';\r\nimport config from '../../config';\r\nimport { history } from '../../store';\r\n\r\nconst getToken = () => (localStorage.getItem('app') ? JSON.parse(localStorage.getItem('app')).token : '');\r\n\r\nconst needLogout = body => {\r\n\treturn [4031, 4032].indexOf(_.get(body, 'meta.code')) !== -1;\r\n};\r\n\r\nconst handleReloginRedirect = () => {\r\n\tlocalStorage.removeItem('app');\r\n\thistory.push(`/login?path=${history.location.pathname}${history.location.search}${history.location.hash}`);\r\n};\r\n\r\nexport default {\r\n\tget(url, query = {}) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tsuperagent\r\n\t\t\t\t.get(`${config.api}${url}`)\r\n\t\t\t\t.set('Accept', 'application/json')\r\n\t\t\t\t.set('Content-Type', 'application/json')\r\n\t\t\t\t.set('Authorization', `Bearer ${getToken()}`)\r\n\t\t\t\t.query(query)\r\n\t\t\t\t.end((error, result) => {\r\n\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\treturn reject({\r\n\t\t\t\t\t\t\terror: error,\r\n\t\t\t\t\t\t\tresult: result\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (needLogout(result.body)) {\r\n\t\t\t\t\t\thandleReloginRedirect();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(result.body);\r\n\t\t\t\t});\r\n\t\t});\r\n\t},\r\n\tpost(url, body = {}) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tsuperagent\r\n\t\t\t\t.post(`${config.api}${url}`)\r\n\t\t\t\t.set('Accept', 'application/json')\r\n\t\t\t\t.set('Content-Type', 'application/json')\r\n\t\t\t\t.set('Authorization', `Bearer ${getToken()}`)\r\n\t\t\t\t.send(body)\r\n\t\t\t\t.end((error, result) => {\r\n\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\treturn reject({\r\n\t\t\t\t\t\t\terror: error,\r\n\t\t\t\t\t\t\tresult: result\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (needLogout(result.body)) {\r\n\t\t\t\t\t\thandleReloginRedirect();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(result.body);\r\n\t\t\t\t});\r\n\t\t});\r\n\t},\r\n\tpatch(url, body = {}) {\r\n\t\tconsole.log('url, body' + url, body);\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tsuperagent\r\n\t\t\t\t.patch(`${config.api}${url}`)\r\n\t\t\t\t.set('Accept', 'application/json')\r\n\t\t\t\t.set('Content-Type', 'application/json')\r\n\t\t\t\t.set('Authorization', `Bearer ${getToken()}`)\r\n\t\t\t\t.send(body)\r\n\t\t\t\t.end((error, result) => {\r\n\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\treturn reject({\r\n\t\t\t\t\t\t\terror: error,\r\n\t\t\t\t\t\t\tresult: result\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (needLogout(result.body)) {\r\n\t\t\t\t\t\thandleReloginRedirect();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(result.body);\r\n\t\t\t\t});\r\n\t\t});\r\n\t},\r\n\tdelete(url, query = {}) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tsuperagent\r\n\t\t\t\t.del(`${config.api}${url}`)\r\n\t\t\t\t.set('Accept', 'application/json')\r\n\t\t\t\t.set('Content-Type', 'application/json')\r\n\t\t\t\t.set('Authorization', `Bearer ${getToken()}`)\r\n\t\t\t\t.query(query)\r\n\t\t\t\t.end((error, result) => {\r\n\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\treturn reject({\r\n\t\t\t\t\t\t\terror: error,\r\n\t\t\t\t\t\t\tresult: result\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (needLogout(result.body)) {\r\n\t\t\t\t\t\thandleReloginRedirect();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(result.body);\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n};\r\n","import auth from './auth';\r\nimport assets from './assets';\r\nimport accounts from './admin/accounts';\r\nimport connections from './admin/connections';\r\nimport twilioconnections from './admin/twilioconnections';\r\n\r\nimport adminTickets from './admin/tickets';\r\nimport adminMessages from './admin/messages';\r\nimport adminUsers from './admin/users';\r\nimport adminContacts from './admin/contacts';\r\n\r\nimport staffTickets from './staff/tickets';\r\nimport staffMessages from './staff/messages';\r\nimport staffUsers from './staff/users';\r\n\r\nimport staffContacts from './staff/contacts';\r\n\r\nexport default {\r\n\tadmin: {\r\n\t\taccounts,\r\n\t\ttwilioconnections,\r\n\t\tconnections,\r\n\t\ttickets: adminTickets,\r\n\t\tmessages: adminMessages,\r\n\t\tusers: adminUsers,\r\n\t\tcontacts: adminContacts\r\n\t},\r\n\tstaff: {\r\n\t\ttickets: staffTickets,\r\n\t\tmessages: staffMessages,\r\n\t\tusers: staffUsers,\r\n\t\tcontacts: staffContacts\r\n\t},\r\n\tassets,\r\n\tauth\r\n};\r\n","import request from '../request';\r\n\r\nexport default {\r\n\tasync getAccount(query) {\r\n\t\tconst res = await request.get(`/app/account/me`, query);\r\n\t\treturn res;\r\n\t},\r\n\tasync updateAccount(query) {\r\n\t\tconst res = await request.patch(`/app/account/me`, query);\r\n\t\treturn res;\r\n\t},\r\n\tasync updateStatus({ status }) {\r\n\t\tconst res = await request.patch(`/app/account/update-status/me?status=${status}`);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '../request';\r\n\r\nexport default {\r\n\ttwilio: {\r\n\t\tasync getTwilioConnections(query) {\r\n\t\t\tconst res = await request.get(`/admin/twilio-connections/me`, query);\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tasync getTwilioConnectionById(id) {\r\n\t\t\tconst res = await request.get(`/admin/twilio-connections/id?id=${id}`);\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tasync createTwilioConnection(body) {\r\n\t\t\tconst res = await request.post(`/admin/twilio-connections/me`, body);\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tasync updateTwilioConnectionById({ id, body }) {\r\n\t\t\tconst res = await request.patch(`/admin/twilio-connections/id?id=${id}`, body);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n};\r\n","import request from '../request';\r\n\r\nexport default {\r\n\tfacebook: {\r\n\t\tasync getFacebookConnections(query) {\r\n\t\t\tconst res = await request.get(`/app/facebook-connections/me`, query);\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tasync createFacebookConnection(body) {\r\n\t\t\tconst res = await request.post(`/app/facebook-connections`, body);\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tasync updatePageSubcribedFieldById({id, body}){\r\n\t\t\tconst res = await request.patch(`/app/facebook-pages/update-subscribedfield/id?id=${id}`, body);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n};\r\n","import request from '.././request';\r\n\r\nexport default {\r\n\tasync getTickets(query) {\r\n\t\tconst res = await request.get(`/app/tickets`, query);\r\n\t\treturn res;\r\n\t},\r\n\tasync getTicketById(id) {\r\n\t\tconst res = await request.get(`/app/tickets/id?id=${id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync updateTicketAsigneeById({ id, user_id }) {\r\n\t\tconst res = await request.patch(`/app/tickets/id/update-asignee?id=${id}&user_id=${user_id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync updateTicketStatusById({ id, status }) {\r\n\t\tconst res = await request.patch(`/app/tickets/id/update-status?id=${id}&status=${status}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync createTicketNote({ id, body }) {\r\n\t\tconst res = await request.post(`/app/tickets/id/create-note?id=${id}`, body);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '.././request';\r\n\r\nexport default {\r\n\tasync getTwilioMessages(ticket_id) {\r\n\t\tconst res = await request.get(`/app/twilio-messages?ticket_id=${ticket_id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync getTwilioMessageById(id) {\r\n\t\tconst res = await request.get(`/app/twilio-messages/id?id=${id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync createTwilioMessage(body) {\r\n\t\tconst res = await request.post(`/app/twilio-messages`, body);\r\n\t\treturn res;\r\n\t},\r\n\tasync getFbMessages(ticket_id) {\r\n\t\tconst res = await request.get(`/app/facebook-messages?ticket_id=${ticket_id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync getFbMessagesByID(id) {\r\n\t\tconst res = await request.get(`/app/facebook-messages/id?id=${id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync createFbMessage(body) {\r\n\t\tconst res = await request.post(`/app/facebook-messages`, body);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '../request';\r\n\r\nexport default {\r\n\tasync getUsers(type) {\r\n\t\tconst res = await request.get(`/app/users`, type && { type });\r\n\t\treturn res;\r\n\t},\r\n\tasync getStaffs() {\r\n\t\tconst res = await request.get('/app/staffs');\r\n\t\treturn res;\r\n\t},\r\n\tasync getStaffById(id) {\r\n\t\tconst res = await request.get(`/app/staffs/id?id=${id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync createStaff(body) {\r\n\t\tconst res = await request.post(`/app/staffs`, body);\r\n\t\treturn res;\r\n\t},\r\n\tasync updateStaffById(id, body) {\r\n\t\tconst res = await request.patch(`/app/staffs/id?id=${id}`, body);\r\n\t\treturn res;\r\n\t},\r\n\tasync deleteStaffById(id) {\r\n\t\tconst res = await request.delete(`/app/staffs/id?id=${id}`);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '.././request';\r\n\r\nexport default {\r\n\tasync updateTwilioContact({ id, body }) {\r\n\t\tconst res = await request.patch(`/app/twilio-contacts/id?id=${id}`, body);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '.././request';\r\n\r\nexport default {\r\n\tasync getTickets(query) {\r\n\t\tconst res = await request.get(`/staff/tickets`, query);\r\n\t\treturn res;\r\n\t},\r\n\tasync getTicketById(id) {\r\n\t\tconst res = await request.get(`/staff/tickets/id?id=${id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync updateTicketStatusById({ id, status }) {\r\n\t\tconst res = await request.patch(`/staff/tickets/id/update-status?id=${id}&status=${status}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync updateTicketAsigneeById({ id, user_id }) {\r\n\t\tconst res = await request.patch(`/staff/tickets/id/update-asignee?id=${id}&user_id=${user_id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync createTicketNote({ id, body }) {\r\n\t\tconst res = await request.post(`/staff/tickets/id/create-note?id=${id}`, body);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '.././request';\r\n\r\nexport default {\r\n\tasync getTwilioMessages(ticket_id) {\r\n\t\tconst res = await request.get(`/staff/twilio-messages?ticket_id=${ticket_id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync getTwilioMessageById(id) {\r\n\t\tconst res = await request.get(`/staff/twilio-messages/id?id=${id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync createTwilioMessage(body) {\r\n\t\tconst res = await request.post(`/staff/twilio-messages`, body);\r\n\t\treturn res;\r\n\t},\r\n\tasync getFbMessages(ticket_id) {\r\n\t\tconst res = await request.get(`/app/facebook-messages?ticket_id=${ticket_id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync getFbMessagesByID(id) {\r\n\t\tconst res = await request.get(`/app/facebook-messages/id?id=${id}`);\r\n\t\treturn res;\r\n\t},\r\n\tasync createFbMessage(body) {\r\n\t\tconst res = await request.post(`/app/facebook-messages`, body);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '../request';\r\n\r\nexport default {\r\n\tasync getUsers(type) {\r\n\t\tconst res = await request.get(`/staff/users`, type && { type });\r\n\t\treturn res;\r\n\t},\r\n\tasync updateStatus({ status }) {\r\n\t\tconst res = await request.patch(`/staff/staffs/update-status/me?status=${status}`);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from '.././request';\r\n\r\nexport default {\r\n\tasync updateTwilioContact({ id, body }) {\r\n\t\tconst res = await request.patch(`/staff/twilio-contacts/id?id=${id}`, body);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from './request';\r\n\r\nexport default {\r\n\r\n\tasync getAssetFileById(id) {\r\n\t\tconst res = await request.get(`/app/assets/id/file?id=${id}`);\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import request from './request';\r\n\r\nexport default {\r\n\tasync login(email, password) {\r\n\t\tconst response = await request.post('/app/auth/login', {\r\n\t\t\temail,\r\n\t\t\tpassword\r\n\t\t});\r\n\r\n\t\treturn response;\r\n\t},\r\n\tasync signUp(body) {\r\n\t\tconst response = await request.post('/app/auth/sign-up', body);\r\n\r\n\t\treturn response;\r\n\t},\r\n\tasync logout() {\r\n\t\tconst res = await request.post('/app/auth/logout');\r\n\t\treturn res;\r\n\t}\r\n};\r\n","import { connect } from 'react-redux';\r\nimport LoginPage from './LoginPage';\r\nimport { login, reset, resetMeta } from '../../actions/LoginPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tloginPageProps: state.loginPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tlogin(options) {\r\n\t\tdispatch(login(options));\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(reset());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(LoginPage);\r\n","import moment from 'moment';\r\nimport { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes';\r\nimport API from '../helpers/api';\r\n\r\nexport function login({ email, password }) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.LOGIN_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.auth.login(email, password);\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.LOGIN_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingSubmit: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.LOGIN_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: false\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst { type, admin, staff } = response.data;\r\n\r\n\t\t// store response\r\n\t\tlocalStorage.setItem('app', JSON.stringify({\r\n\t\t\ttoken: response.data.auth.token,\r\n\t\t\ttype,\r\n\t\t\t...(admin && { admin }),\r\n\t\t\t...(staff && { staff }),\r\n\t\t\tlast_login: moment()\r\n\t\t}));\r\n\t\tdispatch(push('/tickets?type=all'));\r\n\r\n\t\t// Navigate to next page\r\n\t};\r\n}\r\n\r\nexport function reset() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_LOGIN_PAGE\r\n\t\t});\r\n\t};\r\n}\r\n\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_LOGIN_PAGE_META\r\n\t\t});\r\n\t};\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Spinner from 'react-spinkit';\r\n\r\nexport class Loading extends Component {\r\n\trender() {\r\n\t\tconst { onTop, color } = this.props;\r\n\t\tconst style = {\r\n\t\t\twidth: 60,\r\n\t\t\theight: 20,\r\n\t\t\tzIndex: 1,\r\n\t\t\t...(onTop && {\r\n\t\t\t\tposition: 'absolute',\r\n\t\t\t\ttop: '50%',\r\n\t\t\t\tleft: '50%',\r\n\t\t\t\tmarginTop: -10,\r\n\t\t\t\tmarginLeft: -30\r\n\t\t\t}),\r\n\t\t\t...(!onTop && {\r\n\t\t\t\tmargin: '0 auto',\r\n\t\t\t\tpaddingTop: 150,\r\n\t\t\t\tpaddingBottom: 100\r\n\t\t\t})\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Spinner\r\n\t\t\t\tcolor={color}\r\n\t\t\t\tfadeIn=\"none\"\r\n\t\t\t\tname=\"three-bounce\"\r\n\t\t\t\tstyle={style}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nLoading.propTypes = {\r\n\tcolor: PropTypes.string,\r\n\twidth: PropTypes.number,\r\n\tpaddingTop: PropTypes.number,\r\n\tpaddingBottom: PropTypes.number\r\n};\r\n\r\nLoading.defaultProps = {\r\n\tcolor: '#444',\r\n\twidth: 60,\r\n\tpaddingTop: 150,\r\n\tpaddingBottom: 100\r\n};\r\n\r\nexport default Loading;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loading from '../../components/loading';\r\n\r\nclass LogoutPage extends Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.props.logout();\r\n\t}\r\n\trender() {\r\n\t\treturn <Loading />;\r\n\t}\r\n}\r\n\r\nLogoutPage.propTypes = {\r\n\tlogout: PropTypes.func.isRequired\r\n};\r\n\r\nLogoutPage.defaultProps = {};\r\n\r\nexport default LogoutPage;\r\n","import { connect } from 'react-redux';\r\nimport { logout } from '../../actions/LogoutPage';\r\nimport LogoutPage from './LogoutPage';\r\n\r\nfunction mapsStateToProps(state) {\r\n\treturn {};\r\n}\r\n\r\nfunction mapsDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tlogout() {\r\n\t\t\tdispatch(logout());\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(LogoutPage);\r\n","import API from '../helpers/api';\r\n\r\nexport function logout() {\r\n\treturn async dispatch => {\r\n\t\tconst res = await API.auth.logout();\r\n\t\tif (res.meta.code !== 200) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlocalStorage.removeItem('app');\r\n\t\twindow.location.href = res.data.logout_url;\r\n\t};\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nclass UnauthorizedPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Unauthorized</h2>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default UnauthorizedPage;\r\n","/* eslint-disable jsx-a11y/anchor-has-content */\r\n/* eslint-disable react/jsx-max-props-per-line */\r\n/* eslint-disable react/jsx-no-target-blank */\r\nimport React, { Component } from 'react';\r\nimport { Button, Form, FormLayout, Card, DisplayText, TextStyle, Layout } from '@shopify/polaris';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport GeneralHelper from '../../helpers/general';\r\nimport { renderFormInput, renderCheckbox,  validateRequired } from '../../helpers/redux_form';\r\n\r\nclass CustomerForm extends Component {\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.reset();\r\n\t}\r\n\tcomponentDidMount() {\r\n\t}\r\n\trender() {\r\n\t\tconst { registerPageProps } = this.props;\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t<Layout.Section>\r\n\t\t\t\t\t<div style={{ width: '50%', margin: 'auto', marginBottom: 100 }}>\r\n\t\t\t\t\t\t<center>\r\n\t\t\t\t\t\t\t<DisplayText \r\n\t\t\t\t\t\t\t\tsize=\"large\" \r\n\t\t\t\t\t\t\t\telement=\"h2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tWe need more information about you.\r\n\t\t\t\t\t\t\t</DisplayText>\r\n\t\t\t\t\t\t\t<DisplayText \r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tPlease fill up the form.\r\n\t\t\t\t\t\t\t</DisplayText>\r\n\t\t\t\t\t\t</center>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tFor Facebook Business Manager ID:\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\tTo locate your Facebook Business Manager ID, click &nbsp; \r\n\t\t\t\t\t\t\t\t\t<a \r\n\t\t\t\t\t\t\t\t\t\thref=\"https://business.facebook.com/settings/info\" target=\"_blank\" \r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\there\r\n\t\t\t\t\t\t\t\t\t</a>.\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\tIf you do not have a Facebook Business Manager ID yet, click  &nbsp;\r\n\t\t\t\t\t\t\t\t\t<a \r\n\t\t\t\t\t\t\t\t\t\thref=\"https://www.facebook.com/business/help/1710077379203657\" target=\"_blank\" \r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\there\r\n\t\t\t\t\t\t\t\t\t</a>.\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\tFor Business Verification field;\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\tCheck your business information under Business &nbsp;\r\n\t\t\t\t\t\t\t\t\t<a \r\n\t\t\t\t\t\t\t\t\t\thref=\"https://business.facebook.com/settings/info\" target=\"_blank\" \r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tVerification\r\n\t\t\t\t\t\t\t\t\t</a> Status.\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\tFor the <a \r\n\t\t\t\t\t\t\t\t\t\thref=\"https://www.facebook.com/business/help/2058515294227817\" target=\"_blank\"\n\t\t\t\t\t\t\t\t\t        >\r\n\t\t\t\t\t\t\t\t\t\tUnverified\r\n\t\t\t\t\t\t\t\t\t</a> account.\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</Card.Section>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"first_name\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"First Name*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"last_name\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Last Name*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"phone_number\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Phone Number\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"email_address\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Email Address*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"company_name\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Company Name*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"company_website\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Company Website*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"company_hq_country\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Company HQ Country*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"twilio_account_sid\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Twilio Account SID*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"company_vertical\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Company Vertical*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"use_case\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"What is your use case?*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"region_sending_messages\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Which regions are you sending messages to?*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"how_many_messages\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"How many messages are you sending per month during the first year?*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"provision\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"I wish to provision this account with a third party vendor*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"assign_approval\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Assign approval to alternate account SID (Optional)*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"twilio_can_modify\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"I understand twilio can modify my SMS/VOICE URL and that approval is only for the brand submitted.*\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"agree_policies\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Do you agree that all information you provide can be used to screen your application and ensure compliance with WhatsApp and Facebook policies?\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderCheckbox}\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\t\t\tprimary \r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tCreate Account\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t</Card.Section>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Layout.Section>\r\n\t\t\t</Layout>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'CustomerForm'\r\n\t})\r\n)(CustomerForm);","import { connect } from 'react-redux';\r\nimport CustomerForm from './CustomerForm';\r\nimport { reset } from '../../actions/CustomerForm';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tregisterPageProps: state.registerPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tresetPage() {\r\n\t\tdispatch(reset());\r\n\t}\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(CustomerForm);\r\n","import moment from 'moment';\r\nimport { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes';\r\nimport API from '../helpers/api';\r\n\r\nexport function reset() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_LOGIN_PAGE\r\n\t\t});\r\n\t};\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Form, FormLayout, DisplayText, TextStyle, Layout, Card, Modal, TextContainer } from '@shopify/polaris';\r\nimport { Checkbox } from 'antd';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { renderFormInput, validateRequired, validateEmail } from '../../helpers/redux_form';\r\n\r\nclass RegisterPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsuccess: false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { meta: prevMeta } = prevProps.registerPageProps;\r\n\t\tconst { meta } = this.props.registerPageProps;\r\n\r\n\t\tif (meta && meta !== prevMeta) {\r\n\t\t\tconst alertOptions = {\r\n\t\t\t\ttype: meta.code === 200 ? 'success' : 'error',\r\n\t\t\t\t...(meta.code === 40399 && { timeout: 0 })\r\n\t\t\t};\r\n\t\t\tif (meta.code === 200) {\r\n\t\t\t\tthis.setState({ success: true });\r\n\t\t\t}\r\n\r\n\t\t\tthis.props.alert.show(meta.message, alertOptions);\r\n\t\t\tthis.props.resetMeta();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\r\n\trender() {\r\n\t\t// const { registerPageProps } = this.props;\r\n\t\tconst { pristine, submitting, invalid, loadingSubmit } = this.props;\r\n\t\tconst checkbox = (e) => {\r\n\t\t\treturn (e.target.checked);\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t<Layout.Section>\r\n\t\t\t\t\t<div style={{ width: '25%', margin: 'auto' }}>\r\n\t\t\t\t\t\t{/* <center>\r\n\t\t\t\t\t\t\t<DisplayText size=\"large\" element=\"h2\">\r\n\t\t\t\t\t\t\t\tWelcome\r\n\t\t\t\t\t\t\t</DisplayText>\r\n\t\t\t\t\t\t\t<DisplayText size=\"small\">Create your account</DisplayText>\r\n\t\t\t\t\t\t</center> */}\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<center style={{ float: 'center', padding: '50px' }}>\r\n\t\t\t\t\t\t\t\t<DisplayText\r\n\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\telement=\"h2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tSign up to <span style={{ color: '#0088ff' }}>anndesk</span>\r\n\t\t\t\t\t\t\t\t</DisplayText>\r\n\t\t\t\t\t\t\t\t<DisplayText size=\"small\">Enter your details below</DisplayText>\r\n\t\t\t\t\t\t\t</center>\r\n\t\t\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t\t\t<Form onSubmit={this.props.handleSubmit(data => this.props.submitPage(data))}>\r\n\t\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Full name\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"business_name\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Business Name\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"mobile_number\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Mobile Number\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"industry\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Industry\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email Address\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired, validateEmail]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"confirm_password\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Confirm Password\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox onChange={checkbox}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tAccept\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: 'none' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong style={{color: '#09509d'}}> Terms and Conditions</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t</Checkbox>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={pristine || submitting || invalid || loadingSubmit}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.handleSubmit(data => this.props.submitPage(data))}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tCreate Account\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<center>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\tAlready have an account? &nbsp;\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: 'none' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<strong style={{color: '#09509d'}}>Sign In</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</center>\r\n\t\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t</Card.Section>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Layout.Section>\r\n\t\t\t\t{/* show only if success creating an account */}\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={this.state.success}\r\n\t\t\t\t\tonClose={() => this.setState({ success: false })}\r\n\t\t\t\t\ttitle=\"Success\"\r\n\t\t\t\t\tprimaryAction={{\r\n\t\t\t\t\t\tcontent: 'Login',\r\n\t\t\t\t\t\tonAction: () => this.props.history.push('/login')\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t\t<TextContainer>\r\n\t\t\t\t\t\t\t<p>You have created successfuly your account, you can log in now.</p>\r\n\t\t\t\t\t\t</TextContainer>\r\n\t\t\t\t\t</Modal.Section>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Layout>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'RegisterPage'\r\n\t})\r\n)(RegisterPage);\r\n","import { connect } from 'react-redux';\r\nimport RegisterPage from './RegisterPage';\r\nimport { reset, resetMeta, submitPage } from '../../actions/RegisterPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tregisterPageProps: state.registerPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tsubmitPage(options) {\r\n\t\tdispatch(submitPage(options));\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(reset());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(RegisterPage);\r\n","import moment from 'moment';\r\nimport { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes';\r\nimport API from '../helpers/api';\r\n\r\n\r\nexport function submitPage(body) {\r\n\treturn async dispatch => {\r\n\t\tconst { password, confirm_password } = body;\r\n\t\tif (password !== confirm_password) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.SUBMIT_REGISTER_PAGE_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: { code: 201, message: 'Password did not matched.' }\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SUBMIT_REGISTER_PAGE_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.auth.signUp(body);\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.SUBMIT_REGISTER_PAGE_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingSubmit: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SUBMIT_REGISTER_PAGE_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: false,\r\n\t\t\t\tmeta: response.meta\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function reset() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_REGISTER_PAGE\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_REGISTER_PAGE_META\r\n\t\t});\r\n\t};\r\n}\r\n","import _ from 'lodash';\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport { Form, FormLayout, Card, DisplayText, TextStyle, Layout } from '@shopify/polaris';\r\nimport { Button, Row } from 'antd';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { renderFormInput } from '../../helpers/redux_form';\r\n\r\nclass ForgotPasswordPage extends Component {\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.reset();\r\n\t}\r\n\tcomponentDidMount() {\r\n\t}\r\n\trender() {\r\n\t\tconst { forgotPasswordPageProps } = this.props;\r\n\t\treturn (\r\n\t\t\t<Row\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: '92vh'\r\n\t\t\t\t}}\r\n\t\t\t\tjustify=\"center\"\r\n\t\t\t\talign=\"middle\"\r\n\t\t\t>\r\n\t\t\t\t<div style={{ width: '30%', margin: 'auto'}}>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t\t<div style={{padding: '1em'}}>\r\n\t\t\t\t\t\t\t\t<div style={{ marginBottom: '2em'}}>\r\n\t\t\t\t\t\t\t\t\t<span style={{fontSize: '1.5em'}}><strong>Forgot your password?</strong></span>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\tPlease enter your email address associated with your account.\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"email_address\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Email Address\"\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t{/* <center>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tAlready have an account? &nbsp;\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/login\">Login</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</center> */}\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{background: '#09509d', borderColor: '#09509d'}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Card.Section>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t</Row>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'ForgotPasswordPage'\r\n\t})\r\n)(ForgotPasswordPage);","import { connect } from 'react-redux';\r\nimport ForgotPasswordPage from './ForgotPasswordPage';\r\nimport { reset } from '../../actions/ForgotPasswordPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tforgotPasswordPageProps: state.forgotPasswordReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tresetPage() {\r\n\t\tdispatch(reset());\r\n\t}\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(ForgotPasswordPage);\r\n","import moment from 'moment';\r\nimport { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes';\r\nimport API from '../helpers/api';\r\n\r\nexport function reset() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_LOGIN_PAGE\r\n\t\t});\r\n\t};\r\n}\r\n","/* eslint-disable indent */\r\nimport React, { Component } from 'react';\r\nimport { Card, Avatar, Icon, TextField, Layout, TextContainer, SkeletonDisplayText, SkeletonBodyText } from '@shopify/polaris';\r\nimport {\r\n\tCircleInformationMajorFilled, ChevronDownMinor, SmileyHappyMajorMonotone, SendMajorMonotone, ThumbsUpMajorMonotone\r\n} from '@shopify/polaris-icons';\r\nimport Picker, { SKIN_TONE_NEUTRAL } from 'emoji-picker-react';\r\nimport Moment from 'moment';\r\nimport { compose } from 'redux';\r\nimport { reduxForm } from 'redux-form';\r\nimport _ from 'lodash';\r\nimport UrlParse from 'url-parse';\r\nimport Dropzone from 'react-dropzone';\r\nimport ioClient from 'socket.io-client';\r\nimport { withAlert } from 'react-alert';\r\nimport GeneralHelper from '../../../helpers/general';\r\nimport config from './../../../config';\r\nimport FileTypes from '../../../constants/FileTypes';\r\nimport LocalStorageHelper from '../../../helpers/local_storage';\r\nconst moment = Moment;\r\n\r\nclass FacebookChatView extends Component {\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmessageValue: '',\r\n\t\t\tshowEmojisPicker: false,\r\n\t\t\tticket_id: null,\r\n\t\t\tloggedIn: null,\r\n\t\t\tfile: null\r\n\t\t};\r\n\r\n\t\tthis._handleClick = this._handleClick.bind(this);\r\n\t\tthis._handleOutsideClick = this._handleOutsideClick.bind(this);\r\n\r\n\t\tthis.socket = ioClient(config.socket.host, {\r\n\t\t\tpath: config.socket.path,\r\n\t\t\tforceNew: true\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { getTicketById, getFbMessages, getFbMessagesByID,\r\n\t\t\tgetUsers, history, location } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { socket } = this;\r\n\t\tconst { ticket_id } = query;\r\n\t\t// const loggedInUser = JSON.parse(localStorage.getItem('app'));\r\n\t\tif (!ticket_id) {\r\n\t\t\treturn history.push('/tickets?type=all');\r\n\t\t}\r\n\r\n\t\tconst loggedIn = LocalStorageHelper.getLoggedIn();\r\n\t\tconst loggedInType = LocalStorageHelper.getLoginType();\r\n\r\n\t\t// get ticket by id .\r\n\t\tgetTicketById({ ticket_id });\r\n\r\n\t\t// get messages\r\n\t\tgetFbMessages({ ticket_id });\r\n\r\n\t\t// get users list, so it ticket can change the asignee\r\n\t\tgetUsers();\r\n\r\n\t\tsocket.on('connection', () => { });\r\n\t\tsocket.on('valid_connection', () => {\r\n\t\t\tthis.socketJoinTicket({ ticket_id, user_id: loggedIn.user_id || loggedIn._id, staff_id: loggedIn._id });\r\n\t\t\t// open chat emiting to inform that all messages are read.\r\n\t\t\t// socket.emit('open_chat',{ session_id, user_id: loggedInUserId  });\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.messagesEnd && this.messagesEnd.scrollIntoView({ behavior: 'auto' });\r\n\t\t\t}, 500);\r\n\t\t});\r\n\t\tthis.socket.on('message', async message => {\r\n\t\t\t// RECEIVER\r\n\t\t\tif (message) {\r\n\t\t\t\tgetFbMessagesByID({ message_id: message.facebook_message_id });\r\n\t\t\t\t// emit || receiver able read the message.\r\n\t\t\t\tsocket.emit('open_chat',{ user_id: loggedIn.user_id || loggedIn._id, ticket_id, staff_id: loggedIn._id  });\r\n\r\n\t\t\t\t// get twillio message by id.\r\n\t\t\t\tthis.messagesEnd.scrollIntoView({ behavior: 'smooth' });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tthis.setState({\r\n\t\t\tloggedIn: {...loggedIn, loggedInType },\r\n\t\t\tticket_id\r\n\t\t});\r\n\t}\r\n\r\n\t// show this if the chatview is loading.\r\n\tskeletonConversation = () => {\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t<Layout.Section>\r\n\t\t\t\t\t<Card sectioned>\r\n\t\t\t\t\t\t<TextContainer>\r\n\t\t\t\t\t\t\t<SkeletonDisplayText size=\"extraLarge\" />\r\n\t\t\t\t\t\t\t<SkeletonBodyText lines={2}/>\r\n\t\t\t\t\t\t\t<SkeletonBodyText lines={4}/>\r\n\t\t\t\t\t\t\t<SkeletonBodyText lines={8}/>\r\n\t\t\t\t\t\t\t<SkeletonBodyText lines={4}/>\r\n\t\t\t\t\t\t</TextContainer>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Layout.Section>\r\n\t\t\t</Layout>\r\n\t\t);\r\n\t};\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { location: prevLocation, ticketPageProps: prev_ticketPageprops } = prevProps;\r\n\t\tconst { location, getFbMessages, getTicketById, ticketPageProps } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { query: prevQuery } = UrlParse(prevLocation.search, true);\r\n\t\tconst { ticket_id } = query;\r\n\t\tif (ticket_id && ticket_id !== prevQuery.ticket_id) {\r\n\t\t\t\r\n\t\t\tgetFbMessages({ ticket_id });\r\n\t\t\tgetTicketById({ ticket_id });\r\n\t\t\tthis.socketJoinTicket({ ticket_id });\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.messagesEnd.scrollIntoView && this.messagesEnd.scrollIntoView({ behavior: 'auto' });\r\n\t\t\t}, 500);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tticket_id\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// if(this.props.ticketPageProps.fb_messages.length !== prevProps.ticketPageProps.fb_messages.length){\r\n\t\t// \tsetTimeout(() => {\r\n\t\t// \t\tthis.messagesEnd.scrollIntoView && this.messagesEnd.scrollIntoView({ behavior: 'smooth' });\r\n\t\t// \t}, 500);\r\n\t\t// }\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.socket.disconnect();\r\n\t\tthis.props.resetTicket();\r\n\t}\r\n\r\n\t\r\n\tsocketJoinTicket = ({ ticket_id, user_id, staff_id }) => {\r\n\t\tconst { socket } = this;\r\n\t\tsocket.emit('join_ticket', { ticket_id });\r\n\t\tsocket.emit('open_chat',{ user_id, ticket_id, staff_id  });\r\n\r\n\t}\r\n\r\n\tsocketConnection = () => {\r\n\t\tconst { socket } = this;\r\n\t\tconst { getFbMessagesByID, location } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { ticket_id } = query;\r\n\t\tsocket.on('connection', () => { });\r\n\t\tsocket.on('valid_connection', () => {\r\n\t\t\tsocket.emit('join_ticket', { ticket_id });\r\n\t\t\t// open chat emiting to inform that all messages are read.\r\n\t\t\t// socket.emit('open_chat',{ session_id, user_id: loggedInUserId  });\r\n\t\t\tthis.messagesEnd.scrollIntoView({ behavior: 'auto' });\r\n\t\t});\r\n\t\tthis.socket.on('message', async message => {\r\n\t\t\t// RECEIVER\r\n\t\t\tif (message) {\r\n\t\t\t\tgetFbMessagesByID({ message_id: message.facebook_message_id });\r\n\t\t\t\t// get twillio message by id.\r\n\t\t\t\tthis.messagesEnd.scrollIntoView({ behavior: 'smooth' });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_chatBubble = (v) => {\r\n\t\treturn (\r\n\t\t\t<div style={{display: 'flex', margin: v.flow === \"inbound\" ? '15px 20px 15px 0px' : '15px 0px 20px 0px', justifyContent: v.flow === \"outbound\" ? 'flex-end' : null}}>\r\n\t\t\t\t<div style={styles.chatBubble}>\r\n\t\t\t\t\t<div style={styles.dFlex}>\r\n\t\t\t\t\t\t<div style={styles.bubbleMessageHolder}>\r\n\t\t\t\t\t\t\t<p style={styles.tJustify}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tv.message\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"fb-chatview-btn\"\r\n\t\t\t\t\t\t\t\tonClick={()=>console.log('Hello World')}\r\n\t\t\t\t\t\t\t\tstyle={styles.transparentBtn}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tsource={ChevronDownMinor}\r\n\t\t\t\t\t\t\t\t\tcolor=\"skyDark\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={styles.bubbleDateHolder}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<small style={styles.bubbleDate}>{ moment(v.flow === \"outbound\" ? v.timestamp * 1000 : v.timestamp).format('hh:mm A') }</small>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n    _handeMessageValue = v => this.setState({messageValue: v});\r\n\r\n    _handleEmojiPicked = v => this.setState({messageValue: this.state.messageValue.concat(v.emoji)});\r\n\r\n    _handleClick() {\r\n\r\n    \tif (!this.state.showEmojisPicker) {\r\n\t\t\tdocument.addEventListener('click', this._handleOutsideClick, false);\r\n    \t} else {\r\n\t\t\tdocument.removeEventListener('click', this._handleOutsideClick, false);\r\n    \t}\r\n    \r\n    \tthis.setState(prevState => ({\r\n    \t\tshowEmojisPicker: !prevState.showEmojisPicker\r\n    \t}));\r\n    }\r\n\r\n    _handleOutsideClick(e) {\r\n\r\n    \tif (this.node.contains(e.target)) {\r\n    \t\treturn;\r\n    \t}\r\n        \r\n    \tthis._handleClick();\r\n    }\r\n\r\n    _handleOnClickSend = (type) => this._handleMessageRequest(type);\r\n\r\n    _handleMessageRequest = async (type) => {\r\n\r\n\t\tconst { messageValue, ticket_id, file } = this.state;\r\n\t\tif (messageValue && type === \"send\") {\r\n\t\t\t// text message type\r\n\t\t\tawait this.props.sendMessageFb({ message: messageValue, ticket_id });\r\n\r\n\t\t} else {\r\n\t\t\tawait this.props.sendMessageFb({ message: \"👍\", ticket_id });\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tmessageValue: '',\r\n\t\t\tfile: null\r\n\t\t});\r\n    }\r\n\r\n    render(){\r\n\r\n\t\tconst { messageValue, file, loggedIn, showEmojisPicker } = this.state;\r\n\t\tconst { updateTicketStatus, ticketPageProps } = this.props;\r\n\t\tconst { fb_messages, ticket, loadingSelectedTicket, loadingUpdateTicket, loadingSendMessage, loadingMessages } = ticketPageProps;\r\n\t\tconst { renderPreviewModal, handleSendMessage, dropZoneAttachment } = this;\r\n\t\tconst customer_phone_number = _.get(ticket, 'twilio_contact.phone');\r\n\t\tconst customer_name = _.get(ticket, 'twilio_contact.name');\r\n\t\tconst ticket_status = _.get(ticket, 'status');\r\n\t\tconst loggedInType = _.get(loggedIn, 'loggedInType'); //user or staff\r\n\t\tconst isStaffLoggedIn = loggedInType === 'staff' ? true : false;\r\n\t\tconst loggedInId = _.get(loggedIn, '_id');\r\n\t\tconst ticketAssigneeId = _.get(ticket, 'staff_id');\r\n\t\tconst isAssigned = loggedInId === ticketAssigneeId; //identify if the ticket is assigned to the logged in staff.\r\n\t\tconst ticketIsPendingAcceptance = isAssigned && ticket_status === 'pending_acceptance'; //check if the ticket is assigned to the logged in staff & ticket status is pending_acceptance\r\n\t\tconst ticketIsResolved = ticket_status === 'resolved';\r\n\t\tconst showChatInput = isAssigned && !ticketIsResolved && !ticketIsPendingAcceptance;\r\n\t\tconst sortMessagesBasedOnTime = fb_messages.sort(function (left, right) {\r\n\t\t\treturn moment.utc(left.created_at).diff(moment.utc(right.created_at));\r\n\t\t});\r\n\t\tconst messagesGroupByDate = sortMessagesBasedOnTime && _(sortMessagesBasedOnTime)\r\n\t\t\t.groupBy(message => message && moment(message.created_at).format('ddd, D MMM YYYY'))\r\n\t\t\t.map((value, key) => ({ dateTime: key, messages: value }))\r\n\t\t\t.value();\r\n\t\tif (loadingSelectedTicket || loadingMessages) {\r\n\t\t\treturn (\r\n\t\t\t\tthis.skeletonConversation()\r\n\t\t\t);\r\n\t\t}\r\n        \r\n    \tconst sampleData = [\r\n    \t\t{\r\n    \t\t\tsenderPhoto: \"https://picsum.photos/100/100\",\r\n    \t\t\tsenderName: \"Lee Chan\"\r\n    \t\t}\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<Card>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style={styles.chatHeader}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Avatar \r\n\t\t\t\t\t\t\t\tcustomer\r\n\t\t\t\t\t\t\t\tsource={sampleData[0].senderPhoto}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style={styles.chatHeaderName}>\r\n\t\t\t\t\t\t\t{sampleData[0].senderName}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tsource={CircleInformationMajorFilled}\r\n\t\t\t\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tstyle={styles.chatBubbleHolder}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{messagesGroupByDate && messagesGroupByDate.map((item, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<React.Fragment  key={index}>\r\n\t\t\t\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t\t\t\tstyle={{ textAlign: 'center', fontSize: 11, marginBottom: 5, marginTop: 5 }}\r\n\t\t\t\t\t\t\t\t\t>{item.dateTime}</div>\r\n\t\t\t\t\t\t\t\t\t{_.get(item, 'messages').map((msg, idx) => {\r\n\t\t\t\t\t\t\t\t\t\tif (msg) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={idx}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this._chatBubble(msg)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t);})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\tref={el => { this.messagesEnd = el; }}\r\n\t\t\t\t\t\t\tstyle={{ float: 'left', clear: 'both' }}\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tshowChatInput &&\r\n\t\t\t\t\t\t<div style={styles.bgWhite}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Type message...\"\r\n\t\t\t\t\t\t\t\t\tvalue={messageValue}\r\n\t\t\t\t\t\t\t\t\tonChange={this._handeMessageValue}\r\n\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={styles.chatBottomHolder}\r\n\t\t\t\t\t\t\t\t\tref={node => { this.node = node; }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tshowEmojisPicker ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={styles.pRelative}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={styles.pAbsolute}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Picker\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tskinTone={SKIN_TONE_NEUTRAL}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonEmojiClick={(e,emoji) => this._handleEmojiPicked(emoji)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fb-chatview-btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this._handleClick}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={styles.transparentBtn}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsource={SmileyHappyMajorMonotone}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={showEmojisPicker ? \"blue\" : \"skyDark\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div style={styles.mLeft}>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tmessageValue.trim() === \"\" ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fb-chatview-btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={styles.transparentBtn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this._handleOnClickSend('like')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={ThumbsUpMajorMonotone}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fb-chatview-btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={styles.transparentBtn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>this._handleOnClickSend('send')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={SendMajorMonotone}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n    \t);\r\n    }\r\n}\r\n\r\nconst styles = {\r\n\tchatHeader: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\talignItems: 'center',\r\n\t\tpadding: '15px',\r\n\t\tbackgroundColor: '#3b5998 ',\r\n\t\tcolor: '#f2f2f2',\r\n\t\tfontWeight: 600,\r\n\t\tborderTopLeftRadius: 3,\r\n\t\tborderTopRightRadius: 3\r\n\t},\r\n\tchatHeaderName: {\r\n\t\tmarginLeft: '15px',\r\n\t\tmarginRight: 'auto'\r\n\t},\r\n\tchatBubbleHolder: {\r\n\t\theight: 600,\r\n\t\tbackgroundColor: '#f2f2f2',\r\n\t\tpadding: '20px 15px 15px 15px',\r\n\t\toverflowY: 'auto',\r\n\t\tflexDirection: 'column',\r\n\t\tdisplay: 'flex',\r\n\t\tzIndex: 1000\r\n\t},\r\n\tbgWhite: {\r\n\t\tbackgroundColor: 'white'\r\n\t},\r\n\tinputMessage: {\r\n\t\tcolor: '#555',\r\n\t\twidth: '100%',\r\n\t\tborder: '0px none',\r\n\t\toutline: 'none',\r\n\t\tfontSize: '55px !important',\r\n\t\tresize: 'none',\r\n\t\theight: '50px !important'\r\n\t},\r\n\tchatBottomHolder: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tpadding: '2px 15px 5px 10px'\r\n\t},\r\n\tpRelative: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\tpAbsolute: {\r\n\t\tposition: 'absolute',\r\n\t\tbottom: 35\r\n\t},\r\n\ttransparentBtn: {\r\n\t\tbackgroundColor: 'inherit',\r\n\t\tborder: '0px none',\r\n\t\toutline: 'none'\r\n\t},\r\n\tmLeft: {\r\n\t\tmarginLeft: 'auto'\r\n\t},\r\n\tchatBubble: {\r\n\t\tpadding: '10px 13px 15px 15px',\r\n\t\twidth: '250px',\r\n\t\tbackgroundColor: 'white',\r\n\t\tborderRadius: 5,\r\n\t\tboxShadow: '1px 1px #d9d9d9'\r\n\t},\r\n\tdFlex: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\tbubbleMessageHolder: {\r\n\t\tfontSize: '14px',\r\n\t\tcolor: '#555',\r\n\t\talignSelf: 'center',\r\n\t\tflex: 1,\r\n\t\tlineHeight: 1.3,\r\n\t\tfontWeight: 'bold'\r\n\t},\r\n\ttJustify: {\r\n\t\ttextAlign: 'left'\r\n\t},\r\n\tbubbleDateHolder: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\tmarginTop: 5\r\n\t},\r\n\tbubbleDate: {\r\n\t\tfontSize: '11px',\r\n\t\tcolor: '#999',\r\n\t\tfontWeight: 600\r\n\t}\r\n};\r\n\r\nexport default FacebookChatView;","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Avatar, Card, Space } from 'antd';\r\nclass Customer extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\trender(){\r\n  \r\n\t\tconst { name, _id, status, img, lastMessage, date, channel } = this.props.customer;\r\n\t\treturn(\r\n\t\t\t<div style={styles.parentContainer}>\r\n\t\t\t\t<div style={styles.childContainer}>\r\n\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\tsrc={img}\r\n\t\t\t\t\t\t\tsize={64}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h1 style={{margin: 0}}>{name}</h1>\r\n\t\t\t\t\t\t\t<h2 style={{color: 'grey'}}>{lastMessage}</h2>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h1 style={{margin: 0}}>{date}</h1>\r\n\t\t\t\t\t<h2>{channel}</h2>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\thover: {\r\n\t\t\t\r\n\t},\r\n\tparentContainer: {\r\n\t\tpaddingBottom: 16,\r\n\t\twidth: '100%', \r\n\t\tdisplay: 'flex', \r\n\t\talignItems: 'center', \r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\tchildContainer: {\r\n\t\tdisplay: 'flex', \r\n\t\talignItems: 'center'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(Customer);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Card, DatePicker, Divider, Image, Input, Select, Space } from 'antd';\r\nimport Customer from './Customer';\r\nimport tickets from '../../../helpers/api/admin/tickets';\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nclass CustomerList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttest: 'Hello World',\r\n\t\t\tfilters: {\r\n\t\t\t\tcustomer: '',\r\n\t\t\t\tchannel: '',\r\n\t\t\t\tdate: ''\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\trender(){\r\n\t\tconst { filters } = this.state;\r\n\t\tconst { tickets } = this.props.ticketPageProps;\r\n\r\n\t\tconst searchResult = () => {\r\n\t\t\treturn tickets.filter((element)=> {\r\n\t\t\t\t//If filter state is empty return true.\r\n\t\t\t\tconst customerFilter = (\"\" === filters.customer) ? true : element.name.toLowerCase().includes(filters.customer.toLowerCase());\r\n\t\t\t\tconst channelFilter = (\"\" === filters.channel) ? true : element.channel === filters.channel;\r\n\t\t\t\tconst dateFilter = ('' === filters.date) ? true : element.date === filters.date;\r\n\t\t\t\t//return data that satisfies filtering\r\n\t\t\t\treturn (customerFilter && channelFilter && dateFilter);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst modalHandle = (type, e) => {\r\n\t\t\t//Check if 'e' has value and return the value else return empty string.\r\n\t\t\tconst value = (e) ? e: '';\r\n\t\t\tconst newFilter = filters;\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 'customer':\r\n\t\t\t\t\tnewFilter.customer = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'channel':\r\n\t\t\t\t\tnewFilter.channel = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'date':\r\n\t\t\t\t\tnewFilter.date = e.dateString;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t}\r\n\t\t\tthis.setState({filters: newFilter});\t\r\n\t\t};\r\n\r\n\r\n\r\n\t\tconst SearchFilter = \r\n\t\t\t<Space\r\n\t\t\t\tdirection=\"vertical\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\twidth: '100%'\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Search\r\n\t\t\t\t\tplaceholder=\"Search Customer\"\r\n\t\t\t\t\tallowClear\r\n\t\t\t\t\tonSearch={(value) => modalHandle('customer', value)}\r\n\t\t\t\t/>\r\n\t\t\t\t<Space>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tplaceholder=\"Search by Date\"\r\n\t\t\t\t\t\tformat={\"MM-DD-YYYY\"}\r\n\t\t\t\t\t\tonChange={(date, dateString) => {const e = {date, dateString}; modalHandle(\"date\", e);}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tstyle={styles.filterBox}\r\n\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\tplaceholder=\"Search by Channel\"\r\n\t\t\t\t\t\tonChange={(value) => modalHandle('channel', value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Option value=\"Messenger\">Messenger</Option>\r\n\t\t\t\t\t\t<Option value=\"Instagram\">Instagram</Option>\r\n\t\t\t\t\t\t<Option value=\"Email\">Email</Option>\r\n\t\t\t\t\t\t<Option value=\"WhatsApp\">WhatsApp</Option>\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</Space>\r\n\t\t\t</Space>;\r\n\r\n\t\treturn(\r\n\t\t\t<Card\r\n\t\t\t\ttitle={SearchFilter}\r\n\t\t\t\tstyle={{width: '100%', marginRight: '16px'}}\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{searchResult().map(customer => {\r\n\t\t\t\t\t\tcustomer.img = '/images/generic_facebook_photo.jpeg';\r\n\t\t\t\t\t\treturn <Customer\r\n\t\t\t\t\t\t\tkey={customer._id}\r\n\t\t\t\t\t\t\tcustomer={customer}\r\n\t\t\t\t\t\t       />;\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tfilterBox: {\r\n\t\twidth: '12em'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(CustomerList);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Avatar, Button, Card, DatePicker, Divider, Image, Input, Row, Select, Space, Typography } from 'antd';\r\nimport Icon from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport GeneralHelper from '../../../helpers/general';\r\nconst { Title } = Typography;\r\nclass ChatBox extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tselected: 'NON'\r\n\t\t};\r\n\t}\r\n\trender(){\r\n\t\t\r\n\t\tconst { selected } = this.state;\r\n\r\n\r\n\t\treturn(\r\n\t\t\t<Card style={{width: '100%', padding: 0, marginRight: '16px'}}>\r\n\t\t\t\t<Row\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\theight: '80vh'\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\talign=\"middle\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Space\r\n\t\t\t\t\t\tdirection=\"vertical\"\r\n\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tsrc={`${GeneralHelper.getImageBasePath()}/images/anndesk-logo.png`}\r\n\t\t\t\t\t\t\tpreview={false}\r\n\t\t\t\t\t\t\tstyle={{width: '16em', marginBottom: 16}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Title\r\n\t\t\t\t\t\t\tlevel={3}\r\n\t\t\t\t\t\t\tstyle={{textAlign: 'center'}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\tClick the tickets in the left side to start chat here\r\n\t\t\t\t\t\t</Title>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tfilterBox: {\r\n\t\twidth: '12em'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(ChatBox);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Avatar, Button, Card, DatePicker, Divider, Form, Image, Input, Row, Select, Space, Typography } from 'antd';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport Icon from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport GeneralHelper from '../../../helpers/general';\r\nimport Customer from './Customer';\r\nimport { renderFormInput } from '../../../helpers/redux_form';\r\nclass CustomerInformation extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tselected: 'NON'\r\n\t\t};\r\n\t}\r\n\trender(){\r\n\t\t\r\n\t\tconst { selected } = this.state;\r\n\r\n\t\treturn(\r\n\t\t\t<Card\r\n\t\t\t\ttitle=\"Customer Information\"\r\n\t\t\t\tstyle={{width: '100%', padding: 0, marginBottom: '16px'}}\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Item label=\"Name\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tvalue={\"Joshua Kenan Cinches\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item label=\"Email\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tvalue={\"kenanjoshua3454@gmail.com\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item label=\"Phone Number\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tvalue={\"+639955690227\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tfilterBox: {\r\n\t\twidth: '12em'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert(), \r\n\treduxForm({\r\n\t\tform: 'ForgotPasswordPage'\r\n\t})\r\n)(CustomerInformation);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Avatar, Button, Card, Col, DatePicker, Divider, Form, Image, Input, Row, Select, Space, Typography } from 'antd';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport Icon from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport GeneralHelper from '../../../helpers/general';\r\nimport Customer from './Customer';\r\nimport { renderFormInput } from '../../../helpers/redux_form';\r\nconst { Title } = Typography;\r\nconst { Option } = Select;\r\nclass TicketInfo extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tselected: 'NON',\r\n\t\t\tcurrentStatus: 'In Progress',\r\n\t\t\tcurrentPriority: 'High'\r\n\t\t};\r\n\t}\r\n\trender(){\r\n\t\t\r\n\t\tconst { selected, currentStatus, currentPriority } = this.state;\r\n\r\n\t\treturn(\r\n\t\t\t<Card\r\n\t\t\t\ttitle=\"Ticket Information\"\r\n\t\t\t\tstyle={{width: '100%', padding: 0, marginBottom: '1em'}}\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Item label=\"Ticket Number\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\tvalue={\"001\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item label=\"Status\">\r\n\t\t\t\t\t\t\t<Select defaultValue={currentStatus}>\r\n\t\t\t\t\t\t\t\t<Option value=\"Pending\">Pending</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"In Progress\">In Progress</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"Resolved\">Resolved</Option>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item label=\"Status\">\r\n\t\t\t\t\t\t\t<Select defaultValue={currentPriority}>\r\n\t\t\t\t\t\t\t\t<Option value=\"Low\">Low</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"Medium\">Medium</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"High\">High</Option>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t<Row justify=\"space-between\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tstyle={{width: '10em'}}\r\n\t\t\t\t\t\t>\r\n                Transfer Ticket\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tstyle={{width: '10em', background: '#09509d', borderColor: '#09509d'}}\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t>\r\n                Save\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tfilterBox: {\r\n\t\twidth: '12em'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert(), \r\n\treduxForm({\r\n\t\tform: 'ForgotPasswordPage'\r\n\t})\r\n)(TicketInfo);\r\n","import React, { Component } from 'react';\r\nimport { TextContainer, Layout, Card, Icon, Modal, TextField, Form, FormLayout,\r\n\tSelect, SkeletonBodyText, SkeletonDisplayText, TextStyle } from '@shopify/polaris';\r\nimport _ from 'lodash';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport UrlParse from 'url-parse';\r\nimport moment from 'moment';\r\nimport { CirclePlusMinor, EditMinor } from '@shopify/polaris-icons';\r\nimport LocalStorageHelper from '../../../helpers/local_storage';\r\nimport { renderFormInput, validateRequired } from '../../../helpers/redux_form';\r\n\r\n\r\n// show this if the chatview is loading.\r\nconst skeletonConversation = () => {\r\n\treturn (\r\n\t\t<Layout>\r\n\t\t\t<Layout.Section>\r\n\t\t\t\t<Card sectioned>\r\n\t\t\t\t\t<TextContainer>\r\n\t\t\t\t\t\t<SkeletonDisplayText size=\"extraLarge\" />\r\n\t\t\t\t\t\t<SkeletonBodyText lines={8}/>\r\n\t\t\t\t\t\t<SkeletonBodyText lines={4}/>\r\n\t\t\t\t\t</TextContainer>\r\n\t\t\t\t</Card>\r\n\t\t\t</Layout.Section>\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nclass TicketInformation extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tticket_id: '',\r\n\t\t\tloggedIn: null,\r\n\t\t\topenNoteModal: false,\r\n\t\t\tnote: '',\r\n\t\t\topenCustomerInformationModal: false,\r\n\t\t\tcustomerName: ''\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { location } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { ticket_id } = query;\r\n\t\tconst loggedIn = LocalStorageHelper.getLoggedIn();\r\n\t\tconst loggedInType = LocalStorageHelper.getLoginType();\r\n\r\n\t\tthis.setState({\r\n\t\t\tloggedIn: {...loggedIn, loggedInType },\r\n\t\t\tticket_id\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { location: prevLocation } = prevProps;\r\n\t\tconst { location} = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { query: prevQuery } = UrlParse(prevLocation.search, true);\r\n\t\tconst { ticket_id } = query;\r\n\t\tif (ticket_id && ticket_id !== prevQuery.ticket_id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tticket_id\r\n\t\t\t});\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tnoteModalHandle = (action) => {\r\n\t\tthis.setState({\r\n\t\t\topenNoteModal: action\r\n\t\t});\r\n\t}\r\n\r\n\tcustomerModalHandle = (action) => {\r\n\t\tconst { ticketPageProps } = this.props;\r\n\t\tconst { ticket } = ticketPageProps;\r\n\t\tthis.props.initialize({ name: ticket.twilio_contact.name  });\r\n\r\n\t\tthis.setState({\r\n\t\t\topenCustomerInformationModal: action\r\n\t\t});\r\n\t}\r\n\r\n\trenderNoteModal = () => {\r\n\t\tconst { pristine, submitting, invalid } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\topen={this.state.openNoteModal}\r\n\t\t\t\tonClose={() => this.noteModalHandle(false)}\r\n\t\t\t\ttitle=\"Add note\"\r\n\t\t\t\tprimaryAction={{\r\n\t\t\t\t\tcontent: 'Add',\r\n\t\t\t\t\tonAction: this.props.handleSubmit((fields) => [this.props.addTicketNote({ fields, id: this.state.ticket_id }), this.noteModalHandle(false) ]),\r\n\t\t\t\t\tdisabled: pristine || submitting || invalid\r\n\t\t\t\t}}\r\n\t\t\t\tsecondaryActions={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontent: 'Cancel',\r\n\t\t\t\t\t\tonAction: () => this.noteModalHandle(false)\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t<div style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t{/* <TextField\r\n\t\t\t\t\t\t\tlabel=\"Note\"\r\n\t\t\t\t\t\t\tvalue={this.state.note}\r\n\t\t\t\t\t\t\tonChange={(value) => this.setState({ note: value })}\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\tname=\"note\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Note\"\r\n\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t</Form>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</Modal.Section>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n\r\n\trenderCustomerInformationModal = () => {\r\n\t\tconst { pristine, submitting, invalid, ticketPageProps } = this.props;\r\n\t\tconst { ticket } = ticketPageProps;\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\topen={this.state.openCustomerInformationModal}\r\n\t\t\t\tonClose={() => this.customerModalHandle(false)}\r\n\t\t\t\ttitle=\"Edit Customer Information\"\r\n\t\t\t\tprimaryAction={{\r\n\t\t\t\t\tcontent: 'Save',\r\n\t\t\t\t\tonAction: this.props.handleSubmit((fields) => [this.props.updateCustomerInformation({ fields, id: ticket.twilio_contact_id }), this.customerModalHandle(false) ]),\r\n\t\t\t\t\tdisabled: pristine || submitting || invalid\r\n\t\t\t\t}}\r\n\t\t\t\tsecondaryActions={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontent: 'Cancel',\r\n\t\t\t\t\t\tonAction: () => this.customerModalHandle(false)\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t<div style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\t\t\t\tvalue={_.get(ticket, 'twilio_contact.name')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tlabel=\"Phone Number\"\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tvalue={_.get(ticket, 'twilio_contact.phone')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</Modal.Section>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { loggedIn, ticket_id } = this.state;\r\n\t\tconst { updateTicketStatus, updateTicketAsignee, ticketPageProps } = this.props;\r\n\t\tconst { users, ticket, loadingSelectedTicket, loadingUpdateTicket, loadingMessages } = ticketPageProps;\r\n\t\tconst ticketStatusOptions = [\r\n\t\t\t{ label: 'Pending Acceptance', value: 'pending_acceptance', disabled: true },\r\n\t\t\t{ label: 'Pending', value: 'pending', disabled: true },\r\n\t\t\t{ label: 'In progress', value: 'in-progress' },\r\n\t\t\t{ label: 'Resolved', value: 'resolved' }\r\n\t\t];\r\n\t\tconst userOptions = users && users.map((user => {\r\n\t\t\treturn (\r\n\t\t\t\t{ label: user.name, value: user._id  }\r\n\t\t\t);\r\n\t\t}));\r\n\t\tconst customer_phone_number = _.get(ticket, 'twilio_contact.phone');\r\n\t\tconst customer_name = _.get(ticket, 'twilio_contact.name');\r\n\t\tconst ticket_status = _.get(ticket, 'status');\r\n\t\tconst loggedInType = _.get(loggedIn, 'loggedInType'); //user or staff\r\n\t\tconst loggedInId = _.get(loggedIn, '_id');\r\n\t\tconst ticketAssigneeId = _.get(ticket, 'staff_id');\r\n\t\tconst notes = _.sortBy(_.get(ticket, 'notes'), function(o) { return new moment(_.get(o, 'created_at')); }).reverse();\r\n\r\n\t\tconst isAssigned = loggedInId === ticketAssigneeId; //identify if the ticket is assigned to the logged in staff.\r\n\t\tconst ticketIsPendingAcceptance = isAssigned && ticket_status === 'pending_acceptance'; //check if the ticket is assigned to the logged in staff & ticket status is pending_acceptance\r\n\t\tconst ticketIsResolved = ticket_status === 'resolved';\r\n\t\tif (loadingSelectedTicket || loadingMessages) {\r\n\t\t\treturn (\r\n\t\t\t\tskeletonConversation()\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t<TextStyle variation=\"subdued\">Ticket No. </TextStyle>\r\n\t\t\t\t\t\t<TextContainer>\r\n\t\t\t\t\t\t\t<p style={{ fontWeight: 'bold', wordWrap: 'break-word' }}>{_.get(ticket, '_id')}</p>\r\n\t\t\t\t\t\t</TextContainer>\r\n\t\t\t\t\t</Card.Section>\r\n\t\t\t\t</Card>\r\n\t\t\t\t\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t<TextStyle variation=\"subdued\">Ticket Status</TextStyle>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tname=\"status\"\r\n\t\t\t\t\t\t\tlabelHidden\r\n\t\t\t\t\t\t\toptions={ticketStatusOptions}\r\n\t\t\t\t\t\t\tvalue={ticket_status}\r\n\t\t\t\t\t\t\tdisabled={loadingUpdateTicket || ticketIsResolved || loggedInType === 'user' || !isAssigned || ticketIsPendingAcceptance}\r\n\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\tif (value === 'resolved') {\r\n\t\t\t\t\t\t\t\t\tif (window.confirm('Are you sure to resolve this ticket now?')) {\r\n\t\t\t\t\t\t\t\t\t\tupdateTicketStatus({ ticket_id, status: value });\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tupdateTicketStatus({ ticket_id, status: value });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Card.Section>\r\n\t\t\t\t</Card>\r\n\r\n\t\t\t\t{ticket_status !== 'pending' && <Card>\r\n\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t<TextStyle variation=\"subdued\">Asignee</TextStyle>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tname=\"asignee\"\r\n\t\t\t\t\t\t\tlabelHidden\r\n\t\t\t\t\t\t\toptions={userOptions}\r\n\t\t\t\t\t\t\tvalue={_.get(ticket, 'staff_id')}\r\n\t\t\t\t\t\t\tdisabled={loggedInType === 'user' || loadingUpdateTicket || ticketIsResolved || !isAssigned}\r\n\t\t\t\t\t\t\tonChange={(value) => updateTicketAsignee({ ticket_id, user_id: value })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Card.Section>\r\n\t\t\t\t</Card>}\r\n\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Customer Information</TextStyle>\r\n\t\t\t\t\t\t\t{isAssigned && !ticketIsResolved && <span\r\n\t\t\t\t\t\t\t\tonClick={() => this.customerModalHandle(true)}\r\n\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer', color: '#006FBB' }}\n\t\t\t\t\t\t\t                                    >\r\n\t\t\t\t\t\t\t\t<Icon \r\n\t\t\t\t\t\t\t\t\tsource={EditMinor} \r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</span>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Name: </TextStyle>\r\n\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{customer_name}</TextStyle>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Phone Number: </TextStyle>\r\n\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{customer_phone_number}</TextStyle>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Card.Section>\r\n\t\t\t\t</Card>\r\n\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<Card.Section>\r\n\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Notes</TextStyle>\r\n\t\t\t\t\t\t\t{isAssigned && !ticketIsResolved &&  <span\r\n\t\t\t\t\t\t\t\tonClick={() => this.noteModalHandle(true)}\r\n\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer', color: '#006FBB' }}\n\t\t\t\t\t\t\t                                     >\r\n\t\t\t\t\t\t\t\t<Icon \r\n\t\t\t\t\t\t\t\t\tsource={CirclePlusMinor} \r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</span>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{notes && notes.map((note, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t\t\tstyle={styles.noteList} \r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span style={styles.noteDate}>{moment(note.created_at).format('MMM DD, YYYY HH:mm')}</span>\r\n\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 12}}>{note.note}</p>\r\n\t\t\t\t\t\t\t\t\t<span style={{...styles.noteDate, fontStyle: 'italic' }}>{_.get(note, 'user.name')}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Card.Section>\r\n\t\t\t\t</Card>\r\n\t\t\t\t{this.renderNoteModal()}\r\n\t\t\t\t{this.renderCustomerInformationModal()}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tcontainer: {\r\n\t\tmarginBottom: 10,\r\n\t\tmarginTop: 10\r\n\t},\r\n\tnoteList: {\r\n\t\tborderBottom: '1px solid black',\r\n\t\tmarginBottom: 5\r\n\t},\r\n\tnoteDate: {\r\n\t\tfontSize: 11,\r\n\t\tcolor: '#919EAB'\r\n\t}\r\n};\r\n\r\nexport default reduxForm({\r\n\tform: 'TicketInformation'\r\n})(TicketInformation);","import React, { Component } from 'react';\r\nimport moment from 'moment';\r\nimport UrlParse from 'url-parse';\r\nimport _ from 'lodash';\r\nimport { Autocomplete, ResourceItem, ResourceList, Card, Badge, Icon, TextStyle, Avatar } from '@shopify/polaris';\r\nimport { Col, Row, DatePicker, Input, Select, Space, Tabs } from 'antd';\r\nimport { SearchMinor } from '@shopify/polaris-icons';\r\nimport ioClient from 'socket.io-client';\r\nimport config from './../../../config';\r\nimport LocalStorageHelper from '../../../helpers/local_storage';\r\nimport FacebookChatView from './FacebookChatView';\r\nimport CustomerList from './CustomerList';\r\nimport ChatBox from './ChatBox';\r\nimport CustomerInformation from './CustomerInformation';\r\nimport TicketInfo from './TicketInfo';\r\nimport TicketInformation from './TicketInformation';\r\nimport { MessengerChat } from \"react-messenger-chat-plugin\";\r\nconst { TabPane } = Tabs;\r\n\r\nconst testOptions = [\r\n\t{ value: 'rustic', label: 'Rustic' },\r\n\t{ value: 'antique', label: 'Antique' },\r\n\t{ value: 'vinyl', label: 'Vinyl' },\r\n\t{ value: 'vintage', label: 'Vintage' },\r\n\t{ value: 'refurbished', label: 'Refurbished' }\r\n];\r\n\r\nclass TicketList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tnewTicket: false,\r\n\t\t\tselectedTabIndex: 0,\r\n\t\t\toptions: [],\r\n\t\t\tloading: false,\r\n\t\t\tsearchInputValue: '',\r\n\t\t\tselected: '',\r\n\t\t\tticketTabs: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 'my',\r\n\t\t\t\t\tcontent: 'My Tickets',\r\n\t\t\t\t\tpanelID: 'my-tickets'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 'unassigned',\r\n\t\t\t\t\tcontent: 'Unassigned',\r\n\t\t\t\t\tpanelID: 'unassigned-tickets'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 'resolved',\r\n\t\t\t\t\tcontent: 'Resolved',\r\n\t\t\t\t\tpanelID: 'resolved-tickets'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 'all',\r\n\t\t\t\t\tcontent: 'All',\r\n\t\t\t\t\tpanelID: 'all-tickets'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t\tthis.socket = ioClient(config.socket.host, {\r\n\t\t\tpath: config.socket.path,\r\n\t\t\tforceNew: true\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { query } = UrlParse(this.props.location.search, true);\r\n\t\tconst { history, newTicket } = this.props;\r\n\t\tconst listOfTabs = this.state.ticketTabs.map(a => a.id);\r\n\t\tconst { type, ticket_id } = query;\r\n\t\tconst { socket } = this;\r\n\t\tif (!listOfTabs.includes(query.type)) {\r\n\t\t\tif (ticket_id) {\r\n\t\t\t\thistory.push(`/tickets?type=all&ticket_id=${ticket_id}`);\r\n\t\t\t} else {\r\n\t\t\t\thistory.push('/tickets?type=all');\r\n\t\t\t}\r\n\t\t\tthis.getTickets({ type: 'all' });\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedTabIndex: listOfTabs.indexOf(type)\r\n\t\t\t});\r\n\t\t\tif (ticket_id) {\r\n\t\t\t\thistory.push(`/tickets?type=${type}&ticket_id=${ticket_id}`);\r\n\t\t\t} else {\r\n\t\t\t\thistory.push(`/tickets?type=${type}`);\r\n\t\t\t}\r\n\t\t\tthis.getTickets({ type });\r\n\t\t}\r\n\t\tconst user_id = LocalStorageHelper.getUserId();\r\n\t\tsocket.on('connection', () => {});\r\n\t\tsocket.on('valid_connection', () => {\r\n\t\t\tthis.joinUserSession({ user_id });\r\n\t\t});\r\n\t\tthis.socket.on('ticket', async ticket => {\r\n\t\t\tconst { ticket_id, user_id } = ticket;\r\n\t\t\tconsole.log({ ticket });\r\n\t\t\tconst getLoggedInUserId = LocalStorageHelper.getLoggedIn()._id;\r\n\t\t\tconsole.log({ getLoggedInUserId });\r\n\t\t\t// RECEIVER STAFF NEW TICKET.\r\n\t\t\tif (ticket_id && user_id === getLoggedInUserId) {\r\n\t\t\t\tnewTicket({ ticket_id: ticket.ticket_id });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { ticketPageProps: prev_ticketPageProps, location: prev_location } = prevProps;\r\n\t\tconst { loadingUpdateTicket: prev_loadingUpdateTicket, loadingNewTicket: prev_loadingNewTicket } = prev_ticketPageProps;\r\n\r\n\t\tconst { ticketPageProps } = this.props;\r\n\t\tconst { loadingUpdateTicket, loadingNewTicket, ticket } = ticketPageProps;\r\n\r\n\t\tconst { query } = UrlParse(this.props.location.search, true);\r\n\t\tconst { history } = this.props;\r\n\t\tconst { query: prevQuery } = UrlParse(prev_location.search, true);\r\n\r\n\t\tconst listOfTabs = this.state.ticketTabs.map(a => a.id);\r\n\t\tconst { ticket_id, type } = query;\r\n\t\tif ((!loadingUpdateTicket && loadingUpdateTicket !== prev_loadingUpdateTicket) || (ticket && !loadingNewTicket && loadingNewTicket !== prev_loadingNewTicket)) {\r\n\t\t\t// change the active tab in list of tickets\r\n\t\t\tif (!listOfTabs.includes(query.type)) {\r\n\t\t\t\tif (ticket_id) {\r\n\t\t\t\t\thistory.push(`/tickets?type=all&ticket_id=${ticket_id}`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thistory.push('/tickets?type=all');\r\n\t\t\t\t}\r\n\t\t\t\tthis.getTickets({ type: 'all' });\r\n\t\t\t} else {\r\n\t\t\t\t// history.push(`/tickets?type=${type}&ticket_id=${ticket_id}`);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tselectedTabIndex: listOfTabs.indexOf(type)\r\n\t\t\t\t});\r\n\t\t\t\tthis.getTickets({ type });\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (type && type !== prevQuery.type) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedTabIndex: listOfTabs.indexOf(type)\r\n\t\t\t});\r\n\t\t\tthis.getTickets({ type });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.socket.disconnect();\r\n\t\tthis.props.resetTicket();\r\n\t}\r\n\r\n\tjoinUserSession = ({ user_id }) => {\r\n\t\tconst { socket } = this;\r\n\t\tsocket.emit('join_user_session', { user_id });\r\n\t};\r\n\r\n\tgetTickets = ({ type }) => {\r\n\t\tconst { query } = UrlParse(this.props.location.search, true);\r\n\t\tthis.props.getTickets({ type, ticket_id: query.ticket_id });\r\n\t};\r\n\r\n\thandleTabChange = index => {\r\n\t\tthis.getTickets({ type: this.state.ticketTabs[index].id });\r\n\t\tthis.setState({\r\n\t\t\tselectedTabIndex: index\r\n\t\t});\r\n\t};\r\n\trenderTicketsTypeBadge = typeBadge => {\r\n\t\tlet ticketbadge;\r\n\t\tif (typeBadge === 'fb_comment') {\r\n\t\t\tticketbadge = (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tstatus=\"info\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tFacebook Comment\r\n\t\t\t\t</Badge>\r\n\t\t\t);\r\n\t\t} else if (typeBadge === 'whatsapp') {\r\n\t\t\tticketbadge = (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tstatus=\"success\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tWhatsApp Message\r\n\t\t\t\t</Badge>\r\n\t\t\t);\r\n\t\t} else if (typeBadge === 'fb_messenger') {\r\n\t\t\tticketbadge = (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tstatus=\"success\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tFacebook Message\r\n\t\t\t\t</Badge>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn ticketbadge;\r\n\t};\r\n\trenderStatusBadge = ({ status }) => {\r\n\t\tlet badge;\r\n\t\tif (status === 'pending_acceptance') {\r\n\t\t\tbadge = (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tstatus=\"attention\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tPending Acceptance\r\n\t\t\t\t</Badge>\r\n\t\t\t);\r\n\t\t} else if (status === 'resolved') {\r\n\t\t\tbadge = (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tprogress=\"complete\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tResolved\r\n\t\t\t\t</Badge>\r\n\t\t\t);\r\n\t\t} else if (status === 'in-progress') {\r\n\t\t\tbadge = (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tprogress=\"partiallyComplete\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tIn Progress\r\n\t\t\t\t</Badge>\r\n\t\t\t);\r\n\t\t} else if (status === 'pending') {\r\n\t\t\tbadge = (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\tstatus=\"incomplete\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t>\r\n\t\t\t\t\tPending\r\n\t\t\t\t</Badge>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn badge;\r\n\t};\r\n\r\n\trenderTicketList = ({ tickets, loadingTickets }) => {\r\n\t\tconst { query } = UrlParse(this.props.location.search, true);\r\n\t\treturn (\r\n\t\t\t<ResourceList\r\n\t\t\t\tloading={loadingTickets}\r\n\t\t\t\tresourceName={{ singular: 'staff', plural: 'staffs' }}\r\n\t\t\t\titems={tickets}\r\n\t\t\t\tselectedItems={[query.ticket_id]}\r\n\t\t\t\trenderItem={item => {\r\n\t\t\t\t\tconst { _id, facebook_contact_id, facebook_message, twilio_contact, twilio_message, unread_messages, status, type: ticketType } = item;\r\n\t\t\t\t\tconst phone = item.type === \"fb_messenger\" ? _.get(facebook_contact_id, 'phone') : _.get(twilio_contact, 'phone');\r\n\t\t\t\t\tconst message = item.type === \"fb_messenger\" ? _.get(facebook_message[0], 'message') : _.get(twilio_message, 'message');\r\n\t\t\t\t\tconst date = item.type === \"fb_messenger\" ? moment(_.get(facebook_message[0], 'timestamp')).format('YYYY-MM-DD') : _.get(twilio_message, 'date');\r\n\t\t\t\t\tconst media = <Avatar\r\n\t\t\t\t\t\tname={phone}\r\n\t\t\t\t\t\tcustomer\r\n\t\t\t\t\t              />;\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<ResourceItem\r\n\t\t\t\t\t\t\t\tid={_id}\r\n\t\t\t\t\t\t\t\tmedia={media}\r\n\t\t\t\t\t\t\t\taccessibilityLabel={`View details for ${phone}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div onClick={() => this.props.history.push(`/tickets?type=${this.state.ticketTabs[this.state.selectedTabIndex].id}&ticket_id=${_id}&ticket_type=${ticketType}`)}>\r\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{facebook_contact_id}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t<span style={{ fontSize: 11 }}>{date}</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t\t\t\t\t<p style={styles.messagePreview}>{message}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t\t\t\t\t{this.renderTicketsTypeBadge(ticketType)}\r\n\t\t\t\t\t\t\t\t\t\t{['my', 'all'].includes(query.type) && this.renderStatusBadge({ status })}\r\n\t\t\t\t\t\t\t\t\t\t{unread_messages > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t\t<Badge\r\n\t\t\t\t\t\t\t\t\t\t\t\tstatus=\"critical\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{unread_messages}\r\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</ResourceItem>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\tupdateText = value => {\r\n\t\tconst { loading, options } = this.state;\r\n\t\tthis.setState({ searchInputValue: value });\r\n\t\tif (!loading) {\r\n\t\t\tthis.setState({ loading: true });\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\tthis.setState({ options: testOptions, loading: true });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst filterRegex = new RegExp(value, 'i');\r\n\t\t\tconst resultOptions = options.filter(option => option.label.match(filterRegex));\r\n\t\t\tthis.setState({\r\n\t\t\t\toptions: resultOptions,\r\n\t\t\t\tloading: false\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tupdateSelection = selected => {\r\n\t\tconst selectedText = selected.map(selectedItem => {\r\n\t\t\tconst matchedOption = this.state.options.find(option => {\r\n\t\t\t\treturn option.value.match(selectedItem);\r\n\t\t\t});\r\n\t\t\treturn matchedOption && matchedOption.label;\r\n\t\t});\r\n\t\tthis.setState({ selected, searchInputValue: selectedText });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { ticketPageProps, location } = this.props;\r\n\t\tconst { selectedTabIndex, searchInputValue, ticketTabs } = this.state;\r\n\t\tconst { tickets, loadingTickets } = ticketPageProps;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst sortedTickets =\r\n\t\t\ttickets &&\r\n\t\t\t_.orderBy(\r\n\t\t\t\ttickets,\r\n\t\t\t\tfunction(o) {\r\n\t\t\t\t\tif(query.ticket_type && query.ticket_type === 'fb_messenger'){\r\n\t\t\t\t\t\treturn new moment(_.get(o, 'facebook_message.created_at'));\r\n\t\t\t\t\t} else if(query.ticket_type && query.ticket_type === 'fb_messenger'){\r\n\t\t\t\t\t\treturn new moment(_.get(o, 'twilio_message.created_at'));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t['desc']\r\n\t\t\t);\r\n\r\n\t\tconst textField = (\r\n\t\t\t<Autocomplete.TextField\r\n\t\t\t\tonChange={value => this.updateText(value)}\r\n\t\t\t\tvalue={searchInputValue}\r\n\t\t\t\tprefix={<Icon\r\n\t\t\t\t\tsource={SearchMinor}\r\n\t\t\t\t\tcolor=\"inkLighter\"\r\n\t\t\t\t        />}\r\n\t\t\t\tdisabled={loadingTickets}\r\n\t\t\t\tplaceholder=\"Search customer\"\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\tconst onChange = (key) => {\r\n\t\t\tconsole.log(key);\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Tabs\r\n\t\t\t\t\tstyle={{backgroundColor: 'white', marginBottom: '1em', padding: 20, paddingBottom: 0}}\r\n\t\t\t\t\tdefaultActiveKey=\"1\"\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\ttab=\"All\"\r\n\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\ttab=\"Assigned\"\r\n\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\ttab=\"Unassigned\"\r\n\t\t\t\t\t\tkey=\"3\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\ttab=\"Resolved\"\r\n\t\t\t\t\t\tkey=\"4\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t</Tabs>\r\n\t\t\t\t\t\r\n\t\t\t\t<div style={{backgroundColor: '#f0f2f5', display: 'flex', justifyContent: 'space-between'}}>\r\n\t\t\t\t\t<CustomerList {...this.props} />\r\n\t\t\t\t\t<MessengerChat\r\n\t\t\t\t\t\tpageId=\"286645431852598\"\r\n\t\t\t\t\t\tlanguage=\"sv_SE\"\r\n\t\t\t\t\t\tthemeColor={\"#000000\"}\r\n\t\t\t\t\t\tbottomSpacing={300}\r\n\t\t\t\t\t\tloggedInGreeting=\"loggedInGreeting\"\r\n\t\t\t\t\t\tloggedOutGreeting=\"loggedOutGreeting\"\r\n\t\t\t\t\t\tgreetingDialogDisplay={\"show\"}\r\n\t\t\t\t\t\tdebugMode={true}\r\n\t\t\t\t\t\tonMessengerShow={() => {\r\n\t\t\t\t\t\t\tconsole.log(\"onMessengerShow\");\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMessengerHide={() => {\r\n\t\t\t\t\t\t\tconsole.log(\"onMessengerHide\");\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMessengerDialogShow={() => {\r\n\t\t\t\t\t\t\tconsole.log(\"onMessengerDialogShow\");\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMessengerDialogHide={() => {\r\n\t\t\t\t\t\t\tconsole.log(\"onMessengerDialogHide\");\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMessengerMounted={() => {\r\n\t\t\t\t\t\t\tconsole.log(\"onMessengerMounted\");\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMessengerLoad={() => {\r\n\t\t\t\t\t\t\tconsole.log(\"onMessengerLoad\");\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ChatBox />\r\n\t\t\t\t\t<div style={{width: '100%'}}>\r\n\t\t\t\t\t\t<CustomerInformation />\r\n\t\t\t\t\t\t<TicketInfo />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tmessagePreview: {\r\n\t\twhiteSpace: 'nowrap',\r\n\t\ttextOverflow: 'ellipsis',\r\n\t\tmaxWidth: '90%',\r\n\t\tdisplay: 'block',\r\n\t\toverflow: 'hidden',\r\n\t\tfontSize: 11,\r\n\t\tcolor: '#3596eb'\r\n\t}\r\n};\r\n\r\nexport default TicketList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport moment from 'moment';\r\nimport { Modal, Icon } from '@shopify/polaris';\r\nimport {\r\n\tCircleDownMajorMonotone, ClockMinor\r\n} from '@shopify/polaris-icons';\r\n\r\nimport Loading from '../../../components/loading';\r\nimport FileTypes from '../../../constants/FileTypes';\r\n\r\n\r\nconst styles = {\r\n\tcontainer: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\tbubble: {\r\n\t\tmaxWidth: 230,\r\n\t\toverflowWrap: 'break-word',\r\n\t\twhiteSpace: 'pre-wrap',\r\n\t\tpadding: '5px 8px 3px 8px',\r\n\t\tmarginBottom: 15,\r\n\t\tboxShadow: '0 2px 5px 0 rgba(0, 0, 0, 0.2), 0 1px 2px 0 rgba(0, 0, 0, 0.19)',\r\n\t\tmarginLeft: '5px',\r\n\t\tmarginRight: '5px'\r\n\t},\r\n\tmessage: {\r\n\t\tmargin: 0\r\n\t},\r\n\tdateTime: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\talignContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\tcolor: '#8c8c8c',\r\n\t\tfontSize: 10\r\n\t},\r\n\tmediaContainer: {\r\n\t\tmaxWidth: 200,\r\n\t\t// height: 'auto',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tfileAttachmentContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\ticon: {\r\n\t\t\tpadding: 10,\r\n\t\t\tcursor: 'pointer'\r\n\t\t},\r\n\t\tfileType: {\r\n\t\t\tfontSize: '10px',\r\n\t\t\tmarginTop: -5\r\n\t\t},\r\n\t\tfileName: {\r\n\t\t\tfontSize: '15px'\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n\r\nconst MessageBubble = (props) => {\r\n\tconst { _id, twilio_file_id, twilio_file, flow, created_at, message, outbound_status, loading } = props.message;\r\n\t// const { mime } = twilio_file || '';\r\n\tconst [preview, setPreview] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getFile = async() => (\r\n\t\t\tprops.getTwilioFileById({ message_id: _id })\r\n\t\t);\r\n\t\tif (twilio_file_id && !twilio_file) {\r\n\t\t\tgetFile(); \r\n\t\t}\r\n\t}, [_id, loading, props, twilio_file, twilio_file_id]);\r\n\r\n\r\n\tconst modalHandle = (value) => {\r\n\t\tsetPreview(value);\r\n\t};\r\n\r\n\tconst modalPreview = (file) => {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\topen={preview}\r\n\t\t\t\tonClose={() => modalHandle(false)}\r\n\t\t\t\ttitle=\"Attachment Preview\"\r\n\t\t\t\tlarge={true}\r\n\t\t\t\tsecondaryActions={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontent: 'Close',\r\n\t\t\t\t\t\tonAction: () => modalHandle(false)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t<div style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\tsrc={file.remote_url || file.file}\r\n\t\t\t\t\t\t\t// style={{  maxWidth: 500, maxHeight: 300 }}\r\n\t\t\t\t\t\t\talt=\"attached\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</Modal.Section>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{ ...styles.container, justifyContent: flow === 'outbound' ? 'flex-end' : 'flex-start' }}\r\n\t\t>\r\n\t\t\t{preview && modalPreview(twilio_file)}\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\t...styles.bubble,\r\n\t\t\t\t\tbackground: flow === 'outbound' ? '#ceff91' : '#F4F6F8',\r\n\t\t\t\t\tborderRadius: flow === 'outbound' ? '10px 10px 0px 10px' : '10px 10px 10px 0px'\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{/* {flow === 'outbound' &&\r\n\t\t\t\t\t<span style={{ fontSize: 10 }}>\"Staff name</span>\r\n\t\t\t\t} */}\r\n\t\t\t\t{loading ? <Loading />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t!twilio_file\r\n\t\t\t\t\t\t? <p style={styles.message}>{message}</p>\r\n\t\t\t\t\t\t: \r\n\t\t\t\t\t\t<RenderAttachment\r\n\t\t\t\t\t\t\ttype={twilio_file.mime}\r\n\t\t\t\t\t\t\tfile={twilio_file}\r\n\t\t\t\t\t\t\tmodalHandle={modalHandle}\r\n\t\t\t\t\t\t\tfilename={message}\r\n\t\t\t\t\t\t/> \r\n\t\t\t\t}\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={styles.dateTime}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>{moment(created_at).format('hh:mm A')}</span>\r\n\t\t\t\t\t{flow === 'outbound' && outbound_status ==='sending' && <span style={{ fontSize: 11, width: 15, height: 15}}> \r\n\t\t\t\t\t\t<Icon \r\n\t\t\t\t\t\t\tsource={ClockMinor} \r\n\t\t\t\t\t\t\tcolor=\"inkLighter\" \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</span>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst RenderAttachment = ({ type, file, modalHandle, filename }) => {\r\n\tconst downloadFile = ({ file, filename }) => {\r\n\t\tlet tempLink = document.createElement('a');\r\n\t\ttempLink.href= file;\r\n\t\ttempLink.setAttribute('target', '_blank');\r\n\t\ttempLink.setAttribute('download', filename || 'attachment_download');\r\n\t\ttempLink.click();\r\n\t};\r\n\r\n\tif (type.includes('image')) {\r\n\t\tif (file) {\r\n\t\t\treturn (\r\n\t\t\t\t<img\r\n\t\t\t\t\tonClick= {() => modalHandle(true)}\r\n\t\t\t\t\tstyle={styles.mediaContainer}\r\n\t\t\t\t\tsrc={file.remote_url || file.file}\r\n\t\t\t\t\talt={type}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t} else if (type.includes('video')) {\r\n\t\tif (file) {\r\n\t\t\treturn (\r\n\t\t\t\t<video\r\n\t\t\t\t\tstyle={styles.mediaContainer}\r\n\t\t\t\t\tsrc={file.remote_url || file.file}\r\n\t\t\t\t\tcontrols\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t} else if (type.includes('audio')) {\r\n\t\treturn (\r\n\t\t\t<audio \r\n\t\t\t\tstyle={styles.mediaContainer}\r\n\t\t\t\tcontrols\r\n\t\t\t>\r\n\t\t\t\t<source \r\n\t\t\t\t\tsrc={file.remote_url || file.file}\r\n\t\t\t\t\ttype=\"audio/mpeg\" \r\n\t\t\t\t/>\r\n\t\t\t</audio>\r\n\t\t);\r\n\t}\r\n\telse if (FileTypes.document.indexOf(type) !== -1) {\r\n\t\treturn (\r\n\t\t\t<div style={styles.fileAttachmentContainer}>\r\n\t\t\t\t<span \r\n\t\t\t\t\tstyle={styles.fileAttachmentContainer.icon}\r\n\t\t\t\t\tonClick={ () => downloadFile({ filename, file: file.remote_url || file.file })}\r\n\t\t\t\t>\t\r\n\t\t\t\t\t<Icon \r\n\t\t\t\t\t\tsource={CircleDownMajorMonotone} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\t\t\t\t\t<span style={styles.fileAttachmentContainer.fileName}>{filename}</span>\r\n\t\t\t\t\t<span style={styles.fileAttachmentContainer.fileType}>{type}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\treturn <span>File not supported.</span>;\r\n\t}\r\n};\r\n\r\nexport default MessageBubble;","import React, { Component } from 'react';\r\nimport { TextContainer, Layout, Caption, Card, Avatar, Modal, Banner, SkeletonBodyText, SkeletonDisplayText, Icon } from '@shopify/polaris';\r\nimport { SendMajorMonotone, AttachmentMajorMonotone } from '@shopify/polaris-icons';\r\nimport { compose } from 'redux';\r\nimport { reduxForm } from 'redux-form';\r\nimport _ from 'lodash';\r\nimport UrlParse from 'url-parse';\r\nimport moment from 'moment';\r\nimport Dropzone from 'react-dropzone';\r\nimport ioClient from 'socket.io-client';\r\nimport { withAlert } from 'react-alert';\r\nimport GeneralHelper from '../../../helpers/general';\r\nimport config from './../../../config';\r\nimport FileTypes from '../../../constants/FileTypes';\r\nimport LocalStorageHelper from '../../../helpers/local_storage';\r\nimport './index.css';\r\nimport MessageBubble from './MessageBubble';\r\n\r\nconst FILE_SIZE_MB = 4; //mb 5mb is maximum for twilio (https://www.twilio.com/docs/sms/accepted-mime-types)\r\nconst MAX_FILE_SIZE = FILE_SIZE_MB * 1e+6; //converted the mb to byte\r\n\r\n// show this if the chatview is loading.\r\nconst skeletonConversation = () => {\r\n\treturn (\r\n\t\t<Layout>\r\n\t\t\t<Layout.Section>\r\n\t\t\t\t<Card sectioned>\r\n\t\t\t\t\t<TextContainer>\r\n\t\t\t\t\t\t<SkeletonDisplayText size=\"extraLarge\" />\r\n\t\t\t\t\t\t<SkeletonBodyText lines={2}/>\r\n\t\t\t\t\t\t<SkeletonBodyText lines={4}/>\r\n\t\t\t\t\t\t<SkeletonBodyText lines={8}/>\r\n\t\t\t\t\t\t<SkeletonBodyText lines={4}/>\r\n\t\t\t\t\t</TextContainer>\r\n\t\t\t\t</Card>\r\n\t\t\t</Layout.Section>\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nclass TicketList extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinputText: '',\r\n\t\t\tfile: null,\r\n\t\t\tticket_id: null,\r\n\t\t\tloggedIn: null\r\n\t\t};\r\n\t\tthis.socket = ioClient(config.socket.host, {\r\n\t\t\tpath: config.socket.path,\r\n\t\t\tforceNew: true\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { getTicketById, getTwilioMessages, getTwilioMessageById,\r\n\t\t\tgetUsers, history, location } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { socket } = this;\r\n\t\tconst { ticket_id } = query;\r\n\t\t// const loggedInUser = JSON.parse(localStorage.getItem('app'));\r\n\t\tif (!ticket_id) {\r\n\t\t\treturn history.push('/tickets?type=all');\r\n\t\t}\r\n\r\n\t\tconst loggedIn = LocalStorageHelper.getLoggedIn();\r\n\t\tconst loggedInType = LocalStorageHelper.getLoginType();\r\n\r\n\t\t// get ticket by id .\r\n\t\tgetTicketById({ ticket_id });\r\n\r\n\t\t// get messages\r\n\t\tgetTwilioMessages({ ticket_id });\r\n\r\n\t\t// get users list, so it ticket can change the asignee\r\n\t\tgetUsers();\r\n\r\n\t\tsocket.on('connection', () => { });\r\n\t\tsocket.on('valid_connection', () => {\r\n\t\t\tthis.socketJoinTicket({ ticket_id, user_id: loggedIn.user_id || loggedIn._id, staff_id: loggedIn._id });\r\n\t\t\t// open chat emiting to inform that all messages are read.\r\n\t\t\t// socket.emit('open_chat',{ session_id, user_id: loggedInUserId  });\r\n\t\t\tthis.messagesEnd && this.messagesEnd.scrollIntoView({ behavior: 'auto' });\r\n\t\t});\r\n\t\tthis.socket.on('message', async message => {\r\n\t\t\t// RECEIVER\r\n\t\t\tif (message) {\r\n\t\t\t\tgetTwilioMessageById({ message_id: message.twilio_message_id });\r\n\t\t\t\t// emit || receiver able read the message.\r\n\t\t\t\tsocket.emit('open_chat',{ user_id: loggedIn.user_id || loggedIn._id, ticket_id, staff_id: loggedIn._id  });\r\n\r\n\t\t\t\t// get twillio message by id.\r\n\t\t\t\tthis.messagesEnd.scrollIntoView({ behavior: 'smooth' });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tthis.setState({\r\n\t\t\tloggedIn: {...loggedIn, loggedInType },\r\n\t\t\tticket_id\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { location: prevLocation, ticketPageProps: prev_ticketPageprops } = prevProps;\r\n\t\tconst { location, getTwilioMessages, getTicketById, ticketPageProps } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { query: prevQuery } = UrlParse(prevLocation.search, true);\r\n\t\tconst { ticket_id } = query;\r\n\t\tif (ticket_id && ticket_id !== prevQuery.ticket_id) {\r\n\t\t\t\r\n\t\t\tgetTwilioMessages({ ticket_id });\r\n\t\t\tgetTicketById({ ticket_id });\r\n\t\t\tthis.socketJoinTicket({ ticket_id });\r\n\t\t\tthis.messagesEnd.scrollIntoView && this.messagesEnd.scrollIntoView({ behavior: 'auto' });\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tticket_id\r\n\t\t\t});\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.socket.disconnect();\r\n\t\tthis.props.resetTicket();\r\n\t}\r\n\r\n\t\r\n\tsocketJoinTicket = ({ ticket_id, user_id, staff_id }) => {\r\n\t\tconst { socket } = this;\r\n\t\tsocket.emit('join_ticket', { ticket_id });\r\n\t\tsocket.emit('open_chat',{ user_id, ticket_id, staff_id  });\r\n\r\n\t}\r\n\r\n\tsocketConnection = () => {\r\n\t\tconst { socket } = this;\r\n\t\tconst { getTwilioMessageById, location } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst { ticket_id } = query;\r\n\t\tsocket.on('connection', () => { });\r\n\t\tsocket.on('valid_connection', () => {\r\n\t\t\tsocket.emit('join_ticket', { ticket_id });\r\n\t\t\t// open chat emiting to inform that all messages are read.\r\n\t\t\t// socket.emit('open_chat',{ session_id, user_id: loggedInUserId  });\r\n\t\t\tthis.messagesEnd.scrollIntoView({ behavior: 'auto' });\r\n\t\t});\r\n\t\tthis.socket.on('message', async message => {\r\n\t\t\t// RECEIVER\r\n\t\t\tif (message) {\r\n\t\t\t\tgetTwilioMessageById({ message_id: message.twilio_message_id });\r\n\t\t\t\t// get twillio message by id.\r\n\t\t\t\tthis.messagesEnd.scrollIntoView({ behavior: 'smooth' });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleChange = (value) => {\r\n\t\tthis.setState({\r\n\t\t\tinputText: value\r\n\t\t});\r\n\t}\r\n\t\r\n\thandleSendMessage = async() => {\r\n\t\tconst { inputText, ticket_id, file } = this.state;\r\n\t\tif (inputText) {\r\n\t\t\t// text message type\r\n\t\t\tawait this.props.sendMessage({ message: inputText, ticket_id });\r\n\r\n\t\t} else {\r\n\t\t\tawait this.props.sendMessage({ ticket_id, file, filename: file.name, mime: file.type });\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tinputText: '',\r\n\t\t\tfile: null\r\n\t\t});\r\n\t}\r\n\r\n\tonKeyDownHandle = (e) => {\r\n\t\tif(e.keyCode == 13 && e.shiftKey == false) {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.handleSendMessage();\r\n\t\t}\r\n\t}\r\n\r\n\tonRejectedAttachFile = (files) => {\r\n\t\tif (!_.isEmpty(files)) {\r\n\t\t\tconst file = files[0];\r\n\t\t\tif (file && file.errors[0].code === 'file-too-large') {\r\n\t\t\t\tthis.props.alert.show(`File too large. Maximum file size is ${FILE_SIZE_MB} MB`, { type: 'error' });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tattachFile = (files) => {\r\n\t\tif (files){\r\n\t\t\tthis.setState({\r\n\t\t\t\tfile: files[0]\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tdropZoneAttachment = () => (\r\n\t\t<Dropzone \r\n\t\t\tonDrop={this.attachFile}\r\n\t\t\taccept={FileTypes.image.concat(FileTypes.document).concat(FileTypes.video).concat(FileTypes.audio).join(',')}\r\n\t\t\tonDropRejected={this.onRejectedAttachFile}\r\n\t\t\tmultiple={false}\r\n\t\t\tmaxSize={MAX_FILE_SIZE}\r\n\t\t>\r\n\t\t\t{({getRootProps, getInputProps}) => (\r\n\t\t\t\t<section style={{ display: 'flex',  width: '10%', cursor: 'pointer', alignItems: 'center', justifyContent: 'center', marginBottom: 5 }}>\r\n\t\t\t\t\t<div {...getRootProps()}>\r\n\t\t\t\t\t\t<input {...getInputProps()} />\r\n\t\t\t\t\t\t<Icon \r\n\t\t\t\t\t\t\tsource={AttachmentMajorMonotone} \r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t)}\r\n\t\t</Dropzone>\r\n\t)\r\n\r\n\r\n\tcloseAttachmentPreview = () => {\r\n\t\tthis.setState({ file: '' });\r\n\t}\r\n\r\n\trenderPreviewModal = () => {\r\n\t\tconst { file } = this.state;\r\n\t\tconst { type, name } = file;\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\topen={Boolean(file)}\r\n\t\t\t\tonClose={() => this.closeAttachmentPreview()}\r\n\t\t\t\ttitle=\"Attachment Preview\"\r\n\t\t\t\tprimaryAction={{\r\n\t\t\t\t\tcontent: 'Send',\r\n\t\t\t\t\tonAction: () => this.handleSendMessage()\r\n\t\t\t\t}}\r\n\t\t\t\tsecondaryActions={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontent: 'Cancel',\r\n\t\t\t\t\t\tonAction: () => this.closeAttachmentPreview()\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t<div style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t{type.includes('image') \r\n\t\t\t\t\t\t\t? <img \r\n\t\t\t\t\t\t\t\tsrc={URL.createObjectURL(file && file)}\r\n\t\t\t\t\t\t\t\talt={ file && file.name}\r\n\t\t\t\t\t\t\t\tstyle={{  maxWidth: 250, maxHeight: 250 }}\n\t\t\t\t\t\t\t  />\r\n\t\t\t\t\t\t\t: type.includes('video')\r\n\t\t\t\t\t\t\t\t? <video\r\n\t\t\t\t\t\t\t\t\tsrc={URL.createObjectURL(file)}\r\n\t\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 250, maxHeight: 250 }}\n\t\t\t\t\t\t\t\t  />\r\n\t\t\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</Modal.Section>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n\t\t\r\n\trender() {\r\n\t\tconst { inputText, file, loggedIn } = this.state;\r\n\t\tconst { updateTicketStatus, ticketPageProps } = this.props;\r\n\t\tconst { twilio_messages, ticket, loadingSelectedTicket, loadingUpdateTicket, loadingSendMessage, loadingMessages } = ticketPageProps;\r\n\t\tconst { renderPreviewModal, handleSendMessage, dropZoneAttachment } = this;\r\n\t\tconst customer_phone_number = _.get(ticket, 'twilio_contact.phone');\r\n\t\tconst customer_name = _.get(ticket, 'twilio_contact.name');\r\n\t\tconst ticket_status = _.get(ticket, 'status');\r\n\t\tconst loggedInType = _.get(loggedIn, 'loggedInType'); //user or staff\r\n\t\tconst isStaffLoggedIn = loggedInType === 'staff' ? true : false;\r\n\t\tconst loggedInId = _.get(loggedIn, '_id');\r\n\t\tconst ticketAssigneeId = _.get(ticket, 'staff_id');\r\n\t\tconst isAssigned = loggedInId === ticketAssigneeId; //identify if the ticket is assigned to the logged in staff.\r\n\t\tconst ticketIsPendingAcceptance = isAssigned && ticket_status === 'pending_acceptance'; //check if the ticket is assigned to the logged in staff & ticket status is pending_acceptance\r\n\t\tconst ticketIsResolved = ticket_status === 'resolved';\r\n\t\tconst showChatInput = isAssigned && !ticketIsResolved && !ticketIsPendingAcceptance;\r\n\t\tconst messagesGroupByDate = twilio_messages && _(twilio_messages)\r\n\t\t\t.groupBy(message => message && moment(message.created_at).format('ddd, D MMM YYYY'))\r\n\t\t\t.map((value, key) => ({ dateTime: key, messages: value }))\r\n\t\t\t.value();\r\n\t\tif (loadingSelectedTicket || loadingMessages) {\r\n\t\t\treturn (\r\n\t\t\t\tskeletonConversation()\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Card>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<div style={styles.conversationHeader}>\r\n\t\t\t\t\t\t\t<Avatar \r\n\t\t\t\t\t\t\t\tname={customer_phone_number}\r\n\t\t\t\t\t\t\t\tcustomer\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div style={{ marginLeft: 10 }}>\r\n\t\t\t\t\t\t\t\t{customer_name && <span style={{ fontSize: 15 }}>{customer_name}</span>}\r\n\t\t\t\t\t\t\t\t<span><Caption>{customer_phone_number}</Caption></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/* Pending ticket acceptance */}\r\n\t\t\t\t\t\t{ticketIsPendingAcceptance && \r\n\t\t\t\t\t\t\t// <div style={styles.pendingAcceptance}>\r\n\t\t\t\t\t\t\t// \t<Card\r\n\t\t\t\t\t\t\t// \t\tsubdued={true} \r\n\t\t\t\t\t\t\t// \t\tsectioned={true}\r\n\t\t\t\t\t\t\t// \t\tprimaryFooterAction={{ \r\n\t\t\t\t\t\t\t// \t\t\tcontent: 'Accept', \r\n\t\t\t\t\t\t\t// \t\t\tonAction: () => updateTicketStatus({ ticket_id, status: 'in-progress' }),\r\n\t\t\t\t\t\t\t// \t\t\tdisabled: loadingUpdateTicket\r\n\t\t\t\t\t\t\t// \t\t}}\r\n\t\t\t\t\t\t\t// \t>\r\n\t\t\t\t\t\t\t// \t\t<p>\r\n\t\t\t\t\t\t\t// \t\t\tYou have new ticket assigned for you. Accept to start chatting.\r\n\t\t\t\t\t\t\t// \t\t</p>\r\n\t\t\t\t\t\t\t// \t</Card>\r\n\t\t\t\t\t\t\t// </div>\r\n\t\t\t\t\t\t\t<div style={{ width: 400, position: 'absolute', right: 0, top: 0, zIndex: 999, margin: 5}}> \r\n\t\t\t\t\t\t\t\t{!loadingUpdateTicket && \r\n\t\t\t\t\t\t\t\t<Banner\r\n\t\t\t\t\t\t\t\t\ttitle=\"Notification\"\r\n\t\t\t\t\t\t\t\t\tstatus=\"success\"\r\n\t\t\t\t\t\t\t\t\tonDismiss={() => this.props.history.push('/tickets?type=my')}\r\n\t\t\t\t\t\t\t\t\taction={{content: 'Accept', onAction: () => updateTicketStatus({ ticket_id: ticket._id, status: 'in-progress' }) }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tNew ticket has been assigned to you.\r\n\t\t\t\t\t\t\t\t\tClick Accept and start chatting.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</Banner>}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<div style={styles.conversation}>\r\n\t\t\t\t\t\t\t{messagesGroupByDate && messagesGroupByDate.map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center', fontSize: 11, marginBottom: 5, marginTop: 5 }}>{item.dateTime}</div>\r\n\t\t\t\t\t\t\t\t\t\t{_.get(item, 'messages').map((msg, idx) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (msg) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MessageBubble\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={msg}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetAssetFileById={this.props.getAssetFileById}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetTwilioFileById={this.props.getTwilioFileById}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t);})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t\tref={el => { this.messagesEnd = el; }}\r\n\t\t\t\t\t\t\t\tstyle={{ float: 'left', clear: 'both' }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{ showChatInput &&\r\n\t\t\t\t\t\t\t<div style={styles.inputContainer}>\r\n\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\tstyle={{ width: '90%', marginLeft: 5 }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{/* <TextField \r\n\t\t\t\t\t\t\t\t\t\tvalue={inputText} \r\n\t\t\t\t\t\t\t\t\t\tonChange={ (value) => this.handleChange(value)}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus={true}\r\n\t\t\t\t\t\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete={false}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Send a message.\"\r\n\t\t\t\t\t\t\t\t\t\tdisabled={loadingSendMessage}\r\n\t\t\t\t\t\t\t\t\t\t// maxLength={300}\t\r\n\t\t\t\t\t\t\t\t\t\t// showCharacterCount\r\n\t\t\t\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tautoFocus={true}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ (e) => this.handleChange(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"chat-input-text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Send a message\"\r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) => this.onKeyDownHandle(e)}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={inputText}\r\n\t\t\t\t\t\t\t\t\t\tmaxLength=\"1600\" // twilio max characters is 1600 (https://support.twilio.com/hc/en-us/articles/360033806753-Maximum-Message-Length-with-Twilio-Programmable-Messaging)\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{inputText ?\r\n\t\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\t\tonClick={ \r\n\t\t\t\t\t\t\t\t\t\t\t() => !loadingSendMessage && handleSendMessage()\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'flex',  width: '10%', cursor: 'pointer', marginBottom: 5 }}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Icon \r\n\t\t\t\t\t\t\t\t\t\t\tsource={SendMajorMonotone} \r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\tdropZoneAttachment()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t\t{file && renderPreviewModal()}\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nconst styles = {\r\n\tconversationHeader: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\theight: 60,\r\n\t\tbackground: '#173630',\r\n\t\tpadding: 15,\r\n\t\tcolor: 'white'\r\n\t},\r\n\tconversation: {\r\n\t\theight: '400px',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\toverflowY: 'auto',\r\n\t\toverflowX: 'hidden',\r\n\t\tpaddingTop: 20,\r\n\t\tpaddingBottom: 20,\r\n\t\tbackgroundImage: `url(${GeneralHelper.getImageBasePath()}/images/bg.png)`\r\n\t},\r\n\tinputContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tbackgroundColor: '#f1f3f4',\r\n\t\tborderTop: '0.1px solid #d4d4d4',\r\n\t\tpadding: '5px 0px 0px 0px'\r\n\t},\r\n\tpendingAcceptance: {\r\n\t\tbackground: '#173630',\r\n\t\tpadding: 5\r\n\t}\r\n};\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'TicketList'\r\n\t})\r\n)(TicketList);","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { TextField, Caption, Card, Avatar, Icon, Modal } from '@shopify/polaris';\r\nimport { SmileyHappyMajorMonotone, ThumbsUpMajorMonotone, AttachmentMajorMonotone } from '@shopify/polaris-icons';\r\nimport EmojiPicker from 'emoji-picker-react';\r\nimport Dropzone from 'react-dropzone';\r\nimport FileTypes from '../../../constants/FileTypes';\r\n\r\nconst FILE_SIZE_MB = 4;\r\nconst MAX_FILE_SIZE = FILE_SIZE_MB * 1e6;\r\n\r\nclass FacebookPostComment extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfbCommentValue: '',\r\n\t\t\tinputText: '',\r\n\t\t\tfile: null\r\n\t\t};\r\n\t}\r\n\thandleEmojiPicker = () => {\r\n\t\tconst showEmojiPicker = this.state.emojipicker;\r\n\t\tthis.setState({ emojipicker: !showEmojiPicker });\r\n\t};\r\n\tonClickEmoji = (event, emojiObject) => {\r\n\t\tconst prevEmojiText = [...this.state.inputText];\r\n\t\tconst dataEmojiPicker = emojiObject.emoji;\r\n\r\n\t\tconst emojiData = prevEmojiText.concat(dataEmojiPicker);\r\n\t\tconst newEmojiData = emojiData.join('');\r\n\t\tthis.setState({ inputText: newEmojiData });\r\n\t};\r\n\thandleInputChange = value => {\r\n\t\tthis.setState({ inputText: value });\r\n\t};\r\n\tattachFile = files => {\r\n\t\tif (files) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfile: files[0]\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tonRejectedAttachFile = files => {\r\n\t\tif (!_.isEmpty(files)) {\r\n\t\t\tconst file = files[0];\r\n\t\t\tif (file && file.errors[0].code === 'file-too-large') {\r\n\t\t\t\tthis.props.alert.show(`File too large. Maximum file size is ${FILE_SIZE_MB} MB`, { type: 'error' });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\thandleSendMessage = async () => {\r\n\t\tconst { inputText, file } = this.state;\r\n\t\tif (inputText) {\r\n\t\t\t// text message type\r\n\t\t\tawait this.props.sendMessage({ message: inputText });\r\n\t\t} else {\r\n\t\t\tawait this.props.sendMessage({ file, filename: file.name, mime: file.type });\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tinputText: '',\r\n\t\t\tfile: null\r\n\t\t});\r\n\t};\r\n\tcloseAttachmentPreview = () => {\r\n\t\tthis.setState({ file: '' });\r\n\t};\r\n\trenderPreviewModal = () => {\r\n\t\tconst { file } = this.state;\r\n\t\tconst { type, name } = file;\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\topen={Boolean(file)}\r\n\t\t\t\tonClose={() => this.closeAttachmentPreview()}\r\n\t\t\t\ttitle=\"Attachment Preview\"\r\n\t\t\t\tprimaryAction={{\r\n\t\t\t\t\tcontent: 'Send',\r\n\t\t\t\t\tonAction: () => this.handleSendMessage()\r\n\t\t\t\t}}\r\n\t\t\t\tsecondaryActions={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontent: 'Cancel',\r\n\t\t\t\t\t\tonAction: () => this.closeAttachmentPreview()\r\n\t\t\t\t\t}\r\n\t\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t<div style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t{type.includes('image') ? (\r\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={URL.createObjectURL(file && file)}\n\t\t\t\t\t\t\t\talt={file && file.name}\n\t\t\t\t\t\t\t\tstyle={{ maxWidth: 250, maxHeight: 250 }}\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : type.includes('video') ? (\r\n\t\t\t\t\t\t\t<video\n\t\t\t\t\t\t\t\tsrc={URL.createObjectURL(file)}\n\t\t\t\t\t\t\t\tcontrols\n\t\t\t\t\t\t\t\tstyle={{ maxWidth: 250, maxHeight: 250 }}\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<p>{name}</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal.Section>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t};\r\n\r\n\tdropZoneAttachment = () => (\r\n\t\t<Dropzone\r\n\t\t\tonDrop={this.attachFile}\r\n\t\t\taccept={FileTypes.image\r\n\t\t\t\t.concat(FileTypes.document)\r\n\t\t\t\t.concat(FileTypes.video)\r\n\t\t\t\t.concat(FileTypes.audio)\r\n\t\t\t\t.join(',')}\r\n\t\t\tonDropRejected={this.onRejectedAttachFile}\r\n\t\t\tmultiple={false}\r\n\t\t\tmaxSize={MAX_FILE_SIZE}\r\n\t\t>\r\n\t\t\t{({ getRootProps, getInputProps }) => (\r\n\t\t\t\t<section style={{ display: 'flex', width: '10%', cursor: 'pointer', alignItems: 'center', justifyContent: 'center', marginBottom: 5 }}>\r\n\t\t\t\t\t<div {...getRootProps()}>\r\n\t\t\t\t\t\t<input {...getInputProps()} />\r\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tsource={AttachmentMajorMonotone}\n\t\t\t\t\t\t\tcolor=\"inkLightest\"\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t)}\r\n\t\t</Dropzone>\r\n\t);\r\n\trender() {\r\n\t\tconst { fbCommentValue, inputText, file } = this.state;\r\n\t\tconst postData = [\r\n\t\t\t{\r\n\t\t\t\tcomments: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprofilePhoto: 'https://www.gstatic.com/tv/thumb/persons/287557/287557_v9_ba.jpg',\r\n\t\t\t\t\t\tcreated_at: '2020-06-03T08:05:46.311Z',\r\n\t\t\t\t\t\tdate: '2020-06-03T08:05:43.000Z',\r\n\t\t\t\t\t\tflow: 'inbound',\r\n\t\t\t\t\t\tfrom: 'Lebron James',\r\n\t\t\t\t\t\tmessage: 'Has the order shipped already ?'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tPageName: 'Facepalm Store',\r\n\t\t\t\tcommentDiscription: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',\r\n\t\t\t\tpagePhoto: 'https://res.cloudinary.com/grohealth/image/upload/f_auto,fl_lossy,q_auto/v1581678662/DCUK/Content/iStock-959080376.jpg'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<div style={styles.conversationHeader}>\r\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\tcustomer\n\t\t\t\t\t\t\tsource={postData[0].pagePhoto}\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div style={{ marginLeft: 10 }}>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<Caption>{postData[0].PageName}</Caption>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={styles.bgWhite}>\r\n\t\t\t\t\t\t<div className=\"post-text\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p style={styles.postDiscription}>\r\n\t\t\t\t\t\t\t\t\t<strong>{postData[0].commentDiscription}</strong>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{postData[0].comments.map((data, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div style={styles.postDetails}>\r\n\t\t\t\t\t\t\t\t\t\t<span style={styles.avatarPhoto}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomer\n\t\t\t\t\t\t\t\t\t\t\t\t\tsource={data.profilePhoto}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<div style={styles.commentData}>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong style={styles.senderFrom}>{data.from}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{data.message}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', marginLeft: '15%', marginTop: -10 }}>\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 10, color: '#777' }}>2h</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div style={{ height: 400 }}>\r\n\t\t\t\t\t\t\t\t\t\t<div style={styles.postCommentInput}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ marginRight: 10, paddingTop: 15, paddingBottom: 10 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={styles.avatarPhoto}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={postData[0].pagePhoto}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={styles.commentInput}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ marginLeft: 10 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Write a comment...\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={inputText}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.emojipicker ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={styles.emojiPicker}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EmojiPicker\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonEmojiClick={this.onClickEmoji}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', padding: 10 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleEmojiPicker}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ float: 'left', width: 32, height: 32 }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={SmileyHappyMajorMonotone}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"inkLightest\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ float: 'left', width: 32, height: 32, marginLeft: 20 }}>{this.dropZoneAttachment()}</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ float: 'left', width: 32, height: 32 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={ThumbsUpMajorMonotone}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"inkLightest\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{file && this.renderPreviewModal()}\r\n\t\t\t\t</Card>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\nconst styles = {\r\n\tconversationHeader: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\theight: 52,\r\n\t\tbackground: '#4267b2',\r\n\t\tpadding: 15,\r\n\t\tcolor: 'white'\r\n\t},\r\n\tinputContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tbackgroundColor: '#f1f3f4',\r\n\t\tborderTop: '0.1px solid #d4d4d4',\r\n\t\tpadding: '0px 0px 0px 0px'\r\n\t},\r\n\tpendingAcceptance: {\r\n\t\tbackground: '#173630',\r\n\t\tpadding: 5\r\n\t},\r\n\ticonSize: {},\r\n\tbgWhite: {\r\n\t\tbackgroundColor: 'white'\r\n\t},\r\n\tpostDiscription: {\r\n\t\tfontSize: '14px',\r\n\t\tfontWeight: 'normal',\r\n\t\tlineHeight: 1.38\r\n\t},\r\n\tcommentData: {\r\n\t\tpadding: '5px',\r\n\t\tbackgroundColor: '#EEECEC',\r\n\t\tborderRadius: '18px',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\tsenderFrom: {\r\n\t\tdisplay: 'flex',\r\n\t\tfontSize: 12,\r\n\t\tcolor: '#0077FC',\r\n\t\tpaddingRight: 5\r\n\t},\r\n\tpostDetails: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'flex-end',\r\n\t\tflexDirection: 'row',\r\n\t\tjustifyContent: 'space-around',\r\n\t\tmarginBottom: 10,\r\n\t\tmarginTop: 100,\r\n\t\tpaddingLeft: 10,\r\n\t\tpaddingRight: 10\r\n\t},\r\n\tpostCommentInput: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tjustifyContent: 'space-around',\r\n\t\tmarginBottom: 10,\r\n\t\tpadding: 10,\r\n\t\tborderTop: '2px solid #EEECEC'\r\n\t},\r\n\tavatarPhoto: {\r\n\t\tfloat: 'left',\r\n\t\twidth: 32,\r\n\t\theight: 32\r\n\t},\r\n\tcommentInput: {\r\n\t\tbackground: '#fff',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tborder: '1px solid #dfe1e5',\r\n\t\tboxShadow: 'none',\r\n\t\tborderRadius: 24,\r\n\t\theight: 30,\r\n\t\tjustifyContent: ' space-around',\r\n\t\twidth: '90%',\r\n\t\theight: 'auto',\r\n\t\tpadding: 5\r\n\t},\r\n\tcommentTextArea: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tborder: 'none',\r\n\t\tresize: 'none',\r\n\t\theight: 40,\r\n\t\tfloat: 'left',\r\n\t\twidth: '100%',\r\n\t\tmarginLeft: 10\r\n\t},\r\n\tagoHolder: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttimeAgo: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: -4,\r\n\t\tfontSize: 10,\r\n\t\tcolor: '#777'\r\n\t},\r\n\temojiPicker: {\r\n\t\tmarginTop: 50,\r\n\t\tmarginLeft: -200,\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'absolute'\r\n\t}\r\n};\r\nexport default FacebookPostComment;\r\n","/* eslint-disable jsx-a11y/alt-text */\r\nimport React, { Component } from 'react';\r\nimport { Card, Avatar, TextField } from '@shopify/polaris';\r\n\r\nclass InstagramPostComment extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinstagramCommentValue: ''\r\n\t\t};\r\n\t}\r\n\r\n\thandleInstagramCommentValue = value => {\r\n\t\tthis.setState({ instagramCommentValue: value });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { instagramCommentValue } = this.state;\r\n\t\tconst sampleData = [\r\n\t\t\t{\r\n\t\t\t\tcomments: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcreated_at: '2020-06-03T08:05:46.311Z',\r\n\t\t\t\t\t\tdate: '2020-06-03T08:05:43.000Z',\r\n\t\t\t\t\t\tflow: 'inbound',\r\n\t\t\t\t\t\tfrom: 'Cong TV',\r\n\t\t\t\t\t\tmessage: 'Hello there jay'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcreated_at: '2020-06-03T08:05:46.311Z',\r\n\t\t\t\t\t\tdate: '2020-06-03T08:05:43.000Z',\r\n\t\t\t\t\t\tflow: 'outbound',\r\n\t\t\t\t\t\tfrom: 'Jay Cruzada',\r\n\t\t\t\t\t\tmessage: 'Hello there morlak'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcreated_at: '2020-06-03T08:05:46.311Z',\r\n\t\t\t\t\t\tdate: '2020-06-03T08:05:43.000Z',\r\n\t\t\t\t\t\tflow: 'inbound',\r\n\t\t\t\t\t\tfrom: 'Cong TV',\r\n\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t'Non amet proident pariatur est non. Laboris aliquip sit nulla enim enim reprehenderit veniam sunt reprehenderit consectetur mollit irure. Reprehenderit adipisicing proident irure consectetur cillum proident incididunt aliquip sint.'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcreated_at: '2020-06-03T08:05:46.311Z',\r\n\t\t\t\t\t\tdate: '2020-06-03T08:05:43.000Z',\r\n\t\t\t\t\t\tflow: 'inbound',\r\n\t\t\t\t\t\tfrom: 'Jay Cruzada',\r\n\t\t\t\t\t\tmessage: 'Up? naas babaw'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tdateTime: 'Wed, 3 June 2020',\r\n\t\t\t\tpagePhoto: 'https://picsum.photos/200/300',\r\n\t\t\t\tpagePostedPhoto: 'https://picsum.photos/600/600',\r\n\t\t\t\tpageName: 'Morlak STORE',\r\n\t\t\t\tdescription:\r\n\t\t\t\t\t'Sint nulla ad anim eu ullamco pariatur ullamco aliqua cillum irure aliqua mollit ipsum voluptate. Exercitation aliqua et duis labore veniam do.Nulla aute amet ex consectetur proident magna est mollit cillum enim. Est do elit et mollit dolore. Amet in voluptate id commodo Lorem sint quis culpa sit anim.'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<div style={styles.instagramCommentHeader}>\r\n\t\t\t\t\t\t<div style={styles.avatarAndTitleHolder}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tcustomer\n\t\t\t\t\t\t\t\t\tsource={sampleData[0].pagePhoto}\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style={styles.titleHolder}>{sampleData[0].pageName}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={styles.bgWhite}>\r\n\t\t\t\t\t\t<div style={styles.commentSectionHolder}>\r\n\t\t\t\t\t\t\t<div className=\"ig-post-details\">\r\n\t\t\t\t\t\t\t\t<div style={{ marginBottom: 12 }}>\r\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={sampleData[0].pagePostedPhoto}\n\t\t\t\t\t\t\t\t\t\tstyle={styles.igPostImage}\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<p style={styles.igPostDescription}>\r\n\t\t\t\t\t\t\t\t\t\t<strong style={styles.name}>{sampleData[0].pageName} </strong>\r\n\t\t\t\t\t\t\t\t\t\t{sampleData[0].description}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"ig-users-comment\"\n\t\t\t\t\t\t\t\tstyle={styles.userCommentHolder}\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div style={styles.comment}>\r\n\t\t\t\t\t\t\t\t\t{sampleData[0].comments.map((v, i) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment key={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ marginTop: 20 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong style={styles.name}>{v.from} </strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style={styles.commentMessage}>{v.message}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={styles.agoHolder}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p style={styles.timeAgo}>2h</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div style={styles.inputHolder}>\r\n\t\t\t\t\t\t\t\t\t<div style={styles.inputBorder}>\r\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"textfield-holder\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={styles.textFieldHolder}\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Add comment...\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={instagramCommentValue}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInstagramCommentValue}\n\t\t\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div style={styles.buttonHolder}>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ig-post-btn\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={styles.postBtn}\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tPOST\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tinstagramCommentHeader: {\r\n\t\tbackgroundColor: 'white',\r\n\t\tpadding: '7px 15px 7px 15px',\r\n\t\tborderBottom: '1px solid #e6e6e6'\r\n\t},\r\n\tavatarAndTitleHolder: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\talignItems: 'center',\r\n\t\tpadding: 8\r\n\t},\r\n\ttitleHolder: {\r\n\t\tmarginLeft: 15,\r\n\t\tfontWeight: 500,\r\n\t\tfontSize: '14px'\r\n\t},\r\n\tbgWhite: {\r\n\t\tbackgroundColor: 'white'\r\n\t},\r\n\tcommentSectionHolder: {\r\n\t\tpadding: 30\r\n\t},\r\n\tigPostImage: {\r\n\t\twidth: '100%',\r\n\t\tborderRadius: 1\r\n\t},\r\n\tigPostDescription: {\r\n\t\tlineHeight: 1.4,\r\n\t\tfontSize: '13px',\r\n\t\tmarginLeft: '3px'\r\n\t},\r\n\tname: {\r\n\t\tfontSize: 12,\r\n\t\tcolor: '#333'\r\n\t},\r\n\tuserCommentHolder: {\r\n\t\tmarginTop: 5,\r\n\t\theight: '600px'\r\n\t},\r\n\tcomment: {\r\n\t\tmarginTop: 12,\r\n\t\tflexDirection: 'column',\r\n\t\tfontSize: '14px'\r\n\t},\r\n\tcommentMessage: {\r\n\t\tfontSize: '13px',\r\n\t\tmarginLeft: '3px'\r\n\t},\r\n\tagoHolder: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttimeAgo: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: -4,\r\n\t\tfontSize: 10,\r\n\t\tcolor: '#777'\r\n\t},\r\n\tinputHolder: {\r\n\t\tmarginTop: 25,\r\n\t\tflexDirection: 'column'\r\n\t},\r\n\tinputBorder: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tborder: '1px solid #e6e6e6'\r\n\t},\r\n\ttextFieldHolder: {\r\n\t\tmarginRight: 'auto',\r\n\t\tflex: 1\r\n\t},\r\n\tbuttonHolder: {\r\n\t\talignSelf: 'center',\r\n\t\tmarginRight: '10px'\r\n\t},\r\n\tpostBtn: {\r\n\t\tcolor: '#33adff',\r\n\t\tfontWeight: 600,\r\n\t\tbackgroundColor: 'inherit',\r\n\t\toutline: 'none',\r\n\t\tborder: 'none'\r\n\t}\r\n};\r\nexport default InstagramPostComment;\r\n","import React, { Component } from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport { Banner, Layout } from '@shopify/polaris';\r\nimport { withAlert } from 'react-alert';\r\nimport UrlParse from 'url-parse';\r\nimport { compose } from 'redux';\r\nimport TicketList from './components/TicketList';\r\nimport Conversation from './components/Conversation';\r\nimport FacebookPostComment from './components/FacebookPostComment';\r\nimport TicketInformation from './components/TicketInformation';\r\nimport LocalStorageHelper from '../../helpers/local_storage';\r\n// import PendingIntegration from './components/PendingIntegration';\r\nimport InstagramPostComment from './components/InstagramPostComment';\r\nimport FacebookChatView from './components/FacebookChatView';\r\n\r\nclass TicketPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tshowNewTicketAssignedModal: false,\r\n\t\t\tnewTicketId: null\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { meta: prevMeta, loadingNewTicket: prev_loadingNewTicket } = prevProps.ticketPageProps;\r\n\t\tconst { meta, loadingNewTicket, newTicket } = this.props.ticketPageProps;\r\n\r\n\t\tif (meta && meta !== prevMeta) {\r\n\t\t\tconst alertOptions = {\r\n\t\t\t\ttype: meta.code === 200 ? 'success' : 'error',\r\n\t\t\t\t...(meta.code === 40399 && { timeout: 0 })\r\n\t\t\t};\r\n\r\n\t\t\tthis.props.alert.show(meta.message, alertOptions);\r\n\t\t\tthis.props.resetMeta();\r\n\t\t}\r\n\r\n\t\t// // check if pending ticket and the ticket is assigned to the logged in staff.\r\n\t\tif (newTicket && !loadingNewTicket && loadingNewTicket !== prev_loadingNewTicket) {\r\n\t\t\tconst loggedInUserId = LocalStorageHelper.getLoggedIn()._id;\r\n\t\t\t// this will show notification on upper right.\r\n\t\t\tif (newTicket.status === 'pending_acceptance' && newTicket.staff_id === loggedInUserId) {\r\n\t\t\t\tthis.setState({ showNewTicketAssignedModal: true, newTicketId: newTicket._id });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonAcceptTicket = () => {\r\n\t\tthis.setState({ showNewTicketAssignedModal: false, newTicketId: null });\r\n\t\tthis.props.updateTicketStatus({ ticket_id: this.state.newTicketId, status: 'in-progress' });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { location } = this.props;\r\n\t\tconst { showNewTicketAssignedModal } = this.state;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t{/* Pending Twilio account for integration */}\r\n\t\t\t\t{/* <Layout.Section>\r\n\t\t\t\t\t<PendingIntegration />\r\n\t\t\t\t</Layout.Section> */}\r\n\r\n\t\t\t\t<Layout.Section oneThird>\r\n\t\t\t\t\t<TicketList {...this.props} />\r\n\t\t\t\t</Layout.Section>\r\n\t\t\t\t{query.ticket_id && (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<Layout.Section oneThird>\r\n\t\t\t\t\t\t\t{query.ticket_type && query.ticket_type === 'whatsapp' && <Conversation {...this.props} />}\r\n\t\t\t\t\t\t\t{query.ticket_type && query.ticket_type === 'ig_comment' && <InstagramPostComment {...this.props} />}\r\n\t\t\t\t\t\t\t{query.ticket_type && query.ticket_type === 'fb_comment' && <FacebookPostComment {...this.props} />}\r\n\t\t\t\t\t\t\t{query.ticket_type && query.ticket_type === 'fb_messenger' && <FacebookChatView {...this.props} />}\r\n\t\t\t\t\t\t</Layout.Section>\r\n\t\t\t\t\t\t<Layout.Section oneThird>\r\n\t\t\t\t\t\t\t<TicketInformation {...this.props} />\r\n\t\t\t\t\t\t</Layout.Section>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* Show a modal if there is new ticket assigned to the staff */}\r\n\t\t\t\t{showNewTicketAssignedModal && (\r\n\t\t\t\t\t<div style={{ width: 400, position: 'absolute', right: 0, top: 0, zIndex: 999, margin: 5 }}>\r\n\t\t\t\t\t\t<Banner\r\n\t\t\t\t\t\t\ttitle=\"Notification\"\r\n\t\t\t\t\t\t\tstatus=\"success\"\r\n\t\t\t\t\t\t\tonDismiss={() => this.setState({ showNewTicketAssignedModal: false, newTicketId: null })}\r\n\t\t\t\t\t\t\taction={{ content: 'Accept', onAction: () => this.onAcceptTicket() }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<p>New ticket has been assigned to you. Click Accept and start chatting.</p>\r\n\t\t\t\t\t\t</Banner>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Layout>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(withAlert())(TicketPage);\r\n","import { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes';\r\nimport API from '../helpers/api';\r\nimport FileHelper from '../helpers/file';\r\nimport LocalStorageHelper from '../helpers/local_storage';\r\n\r\n\r\nconst MAX_FILE_LOAD_RETRIES = 50;\r\n\r\n\r\nexport function getTickets({ type, ticket_id }) {\r\n\treturn async dispatch => {\r\n\t\tconst optionsQuery = [`type=${type}`];\r\n\t\tif (ticket_id) {\r\n\t\t\toptionsQuery.push(`ticket_id=${ticket_id}`);\r\n\t\t}\r\n\t\tdispatch(push(`/tickets?${optionsQuery.join('&')}`));\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TICKETS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingTickets: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tlet response;\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.tickets.getTickets({ type });\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.tickets.getTickets({ type });\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TICKETS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingTickets: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\r\n\t\tconst { tickets } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TICKETS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\ttickets: []\r\n\t\t\t}\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TICKETS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\ttickets,\r\n\t\t\t\tloadingTickets: false\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t};\r\n}\r\n\r\nexport function getTwilioMessages({ ticket_id }) {\r\n\treturn async dispatch => {\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_MESSAGES_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingMessages: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tlet response;\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.messages.getTwilioMessages(ticket_id);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.messages.getTwilioMessages(ticket_id);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_MESSAGES_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingMessages: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst { twilio_messages } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_MESSAGES_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingMessages: false,\r\n\t\t\t\ttwilio_messages\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function getTwilioMessageById({ message_id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { twilio_messages } = getState().ticketPageReducer;\r\n\t\t// const copyTwilioMessagesOld = [...twilio_messages];\r\n\t\t// const getIndex = copyTwilioMessagesOld.findIndex(x => x._id === message_id);\r\n\t\t// const copyMessage = {...copyTwilioMessagesOld[getIndex]};\r\n\t\t// if (getIndex !== -1 && twilio_messages[getIndex].twilio_file_id\t && !twilio_messages[getIndex].twilio_file) {\r\n\t\t// \tcopyMessage.loading = true;\r\n\t\t// \tcopyTwilioMessagesOld[getIndex] = copyMessage;\r\n\t\t// }\r\n\t\t// if (getIndex !== -1 && twilio_messages[getIndex].twilio_file) {\r\n\t\t// \tcopyMessage.loading = false;\r\n\t\t// }\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_MESSAGE_BY_ID_REQUEST\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.messages.getTwilioMessageById(message_id);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.messages.getTwilioMessageById(message_id);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TWILIO_MESSAGE_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst { twilio_message } = response.data;\r\n\t\t\r\n\t\tconst copyTwilioMessagesNew = [...twilio_messages];\r\n\r\n\t\t// if new twilio_message still not exist on the list, add it.\r\n\t\tconst getNewMessageIndex = twilio_messages.findIndex(x => x._id === twilio_message._id);\r\n\t\tif (getNewMessageIndex === -1) {\r\n\t\t\tconst lastMessage = copyTwilioMessagesNew[copyTwilioMessagesNew.length-1];\r\n\t\t\t// check the last sent message if status ('frontend only') sending and change it with this new message\r\n\t\t\tif (lastMessage.flow === 'outbound' && lastMessage.outbound_status === 'sending') {\r\n\t\t\t\tcopyTwilioMessagesNew[copyTwilioMessagesNew.length-1] = {...twilio_message};\r\n\t\t\t} else {\r\n\t\t\t\tcopyTwilioMessagesNew.push(twilio_message);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcopyTwilioMessagesNew[getNewMessageIndex] = {...twilio_message};\r\n\t\t}\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_MESSAGE_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\ttwilio_messages: copyTwilioMessagesNew\r\n\t\t\t\t// tickets: copyTickets\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function getTwilioFileById({ message_id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { twilio_messages } = getState().ticketPageReducer;\r\n\t\tconst copyTwilioMessagesOld = [...twilio_messages];\r\n\t\tconst getIndex = copyTwilioMessagesOld.findIndex(x => x._id === message_id && x.twilio_file_id && !x.twilio_file);\r\n\t\tif (getIndex !== -1) {\r\n\t\t\tcopyTwilioMessagesOld[getIndex].loading = true;\r\n\t\t}\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_MESSAGE_BY_ID_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\ttwilio_messages: copyTwilioMessagesOld\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.messages.getTwilioMessageById(message_id);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.messages.getTwilioMessageById(message_id);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TWILIO_MESSAGE_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst { twilio_message } = response.data;\r\n\r\n\t\tconst { twilio_messages: newMessages } = getState().ticketPageReducer;\r\n\t\t\r\n\t\tconst copyTwilioMessagesNew = [...newMessages];\r\n\r\n\t\t// if new twilio_message still not exist on the list, add it.\r\n\t\tconst getNewMessageIndex = twilio_messages.findIndex(x => x._id === twilio_message._id  && x.twilio_file_id && !x.twilio_file);\r\n\t\t// if (getNewMessageIndex === -1) {\r\n\t\t// \tcopyTwilioMessagesNew.push(twilio_message);\r\n\t\t// }\r\n\t\tif (getNewMessageIndex !== -1) {\r\n\t\t\tcopyTwilioMessagesNew[getNewMessageIndex] = {...twilio_message };\r\n\t\t\t// const copyMessage = {...copyTwilioMessagesNew[getNewMessageIndex]};\r\n\t\t\tif (!twilio_message.twilio_file) {\r\n\t\t\t\tif (copyTwilioMessagesNew[getNewMessageIndex].retry >= MAX_FILE_LOAD_RETRIES) {\r\n\t\t\t\t\t// Set loading to false\r\n\t\t\t\t\tcopyTwilioMessagesNew[getNewMessageIndex].loading = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Set loading to true if there is no file yet\r\n\t\t\t\t\t// and increment retry to record how many retries in loading the file\r\n\t\t\t\t\tcopyTwilioMessagesNew[getNewMessageIndex].loading = true;\r\n\t\t\t\t\tcopyTwilioMessagesNew[getNewMessageIndex].retry = copyTwilioMessagesNew[getNewMessageIndex].retry + 1;\r\n\t\t\t\t\tcopyTwilioMessagesNew[getNewMessageIndex].loading = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcopyTwilioMessagesNew[getNewMessageIndex].loading = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_MESSAGE_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\ttwilio_messages: copyTwilioMessagesNew\r\n\t\t\t\t// tickets: copyTickets\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\n\r\n\r\n\r\nexport function getTicketById({ ticket_id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { tickets } = getState().ticketPageReducer;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TICKET_BY_ID_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSelectedTicket: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.tickets.getTicketById(ticket_id);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.tickets.getTicketById(ticket_id);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\tdispatch(push(`/tickets?type=all`));\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TICKET_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSelectedTicket: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst { ticket } = response.data;\r\n\t\tconst copyTickets = tickets && tickets.length > 0 && [...tickets];\r\n\t\t// clear unread messages count on ticket detail page in frontend (already cleared on backend on chatpage didmount)\r\n\t\tconst getIndex = tickets.findIndex(x => x._id === ticket_id);\r\n\t\tif (getIndex !== -1) {\r\n\t\t\tcopyTickets[getIndex].unread_messages = 0;\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TICKET_BY_ID_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\ttickets: []\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TICKET_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSelectedTicket: false,\r\n\t\t\t\tticket,\r\n\t\t\t\t...(tickets.length > 0 && { tickets: copyTickets }),\r\n\t\t\t\tshowNewTicketAssignedModal: ticket.status === 'pending_acceptance' && ticket.staff_id === LocalStorageHelper.getLoggedIn()._id ? true: false\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function sendMessage({ ticket_id, message = '', file = null, filename = null, mime = null }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { twilio_messages, tickets } = getState().ticketPageReducer;\r\n\t\t// show in the message list after staff sent the message, put \"sending\" status for FRONTEND only.\r\n\t\t// and wait for the frontend to return if successfully created the message.\r\n\t\tconst copyOldMessages = [...twilio_messages];\r\n\t\tconst fileDataToUrl = file && await FileHelper.fileToDataUrl(file);\r\n\t\tconst newMessage = {\r\n\t\t\tcreated_at: new Date(),\r\n\t\t\tflow: 'outbound',\r\n\t\t\tmessage,\r\n\t\t\tticket_id,\r\n\t\t\t...(file && { twilio_file: { file: fileDataToUrl, mime } }),\r\n\t\t\toutbound_status: 'sending'\r\n\t\t};\r\n\t\t// add the newly created message to list of messages\r\n\t\tcopyOldMessages.push(newMessage);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SEND_MESSAGE_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSendMessage: true,\r\n\t\t\t\ttwilio_messages: copyOldMessages\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst body = {\r\n\t\t\ttwilio_message: {\r\n\t\t\t\tticket_id,\r\n\t\t\t\t...(!message && file ? { message: filename } : { message }),\r\n\t\t\t\t...(file && { file: fileDataToUrl }),\r\n\t\t\t\t...(filename && { filename }),\r\n\t\t\t\t...(mime && { mime })\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.messages.createTwilioMessage(body);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.messages.createTwilioMessage(body);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.SEND_MESSAGE_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSendMessage: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { twilio_messages: newMessages } = getState().ticketPageReducer;\r\n\t\tconst { twilio_message } = response.data;\r\n\t\tconst copyTwilioMessages = [...newMessages];\r\n\t\tconst copyTickets = tickets && tickets.length > 0 && [...tickets];\r\n\t\t// clear unread messages count on ticket detail page in frontend (already cleared on backend on chatpage didmount)\r\n\t\tconst getIndex = tickets.findIndex(x => x._id === ticket_id);\r\n\t\tif (getIndex !== -1) {\r\n\t\t\tcopyTickets[getIndex].twilio_message = {...twilio_message};\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.SEND_MESSAGE_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\ttickets: []\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// push new messge in list of messages\r\n\t\tcopyTwilioMessages.push(twilio_message);\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SEND_MESSAGE_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSendMessage: false,\r\n\t\t\t\t// twilio_messages: copyTwilioMessages\r\n\t\t\t\ttickets: copyTickets\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\n//FB Messages\r\nexport function getFbMessages({ ticket_id }) {\r\n\treturn async dispatch => {\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_FACEBOOK_MESSAGES_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingMessages: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tlet response;\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.messages.getFbMessages(ticket_id);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.messages.getFbMessages(ticket_id);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_FACEBOOK_MESSAGES_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingMessages: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst { facebook_messages } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_FACEBOOK_MESSAGES_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingMessages: false,\r\n\t\t\t\tfb_messages: facebook_messages\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\n\r\nexport function getFbMessagesByID({ message_id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { fb_messages } = getState().ticketPageReducer;\r\n\t\t// const copyTwilioMessagesOld = [...twilio_messages];\r\n\t\t// const getIndex = copyTwilioMessagesOld.findIndex(x => x._id === message_id);\r\n\t\t// const copyMessage = {...copyTwilioMessagesOld[getIndex]};\r\n\t\t// if (getIndex !== -1 && twilio_messages[getIndex].twilio_file_id\t && !twilio_messages[getIndex].twilio_file) {\r\n\t\t// \tcopyMessage.loading = true;\r\n\t\t// \tcopyTwilioMessagesOld[getIndex] = copyMessage;\r\n\t\t// }\r\n\t\t// if (getIndex !== -1 && twilio_messages[getIndex].twilio_file) {\r\n\t\t// \tcopyMessage.loading = false;\r\n\t\t// }\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_FACEBOOK_MESSAGE_BY_ID_REQUEST\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.messages.getFbMessagesByID(message_id);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.messages.getFbMessagesByID(message_id);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_FACEBOOK_MESSAGE_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst { facebook_message } = response.data;\r\n\t\t\r\n\t\tconst copyFacebookMessagesNew = [...fb_messages];\r\n\r\n\t\t// if new twilio_message still not exist on the list, add it.\r\n\t\tconst getNewMessageIndex = fb_messages.findIndex(x => x._id === facebook_message._id);\r\n\t\tif (getNewMessageIndex === -1) {\r\n\t\t\tconst lastMessage = copyFacebookMessagesNew[copyFacebookMessagesNew.length-1];\r\n\t\t\t// check the last sent message if status ('frontend only') sending and change it with this new message\r\n\t\t\tif (lastMessage.flow === 'outbound' && lastMessage.outbound_status === 'sending') {\r\n\t\t\t\tcopyFacebookMessagesNew[copyFacebookMessagesNew.length-1] = {...facebook_message};\r\n\t\t\t} else {\r\n\t\t\t\tcopyFacebookMessagesNew.push(facebook_message);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcopyFacebookMessagesNew[getNewMessageIndex] = {...facebook_message};\r\n\t\t}\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_FACEBOOK_MESSAGE_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tfb_messages: copyFacebookMessagesNew\r\n\t\t\t\t// tickets: copyTickets\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function sendMessageFb({ ticket_id, message = '', file = null, filename = null, mime = null }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { fb_messages, tickets } = getState().ticketPageReducer;\r\n\t\tconsole.log('testing',getState().ticketPageReducer);\r\n\t\t// show in the message list after staff sent the message, put \"sending\" status for FRONTEND only.\r\n\t\t// and wait for the frontend to return if successfully created the message.\r\n\t\tconst copyOldMessages = [...fb_messages];\r\n\t\tconst fileDataToUrl = file && await FileHelper.fileToDataUrl(file);\r\n\t\tconst newMessage = {\r\n\t\t\tcreated_at: new Date(),\r\n\t\t\tflow: 'outbound',\r\n\t\t\tmessage,\r\n\t\t\tticket_id,\r\n\t\t\t...(file && { fb_file: { file: fileDataToUrl, mime } }),\r\n\t\t\toutbound_status: 'sending'\r\n\t\t};\r\n\t\t// add the newly created message to list of messages\r\n\t\tcopyOldMessages.push(newMessage);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SEND_FACEBOOK_MESSAGE_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSendMessage: true,\r\n\t\t\t\tfb_messages: copyOldMessages\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst body = {\r\n\t\t\tfacebook_message: {\r\n\t\t\t\tticket_id,\r\n\t\t\t\t...(!message && file ? { message: filename } : { message }),\r\n\t\t\t\t...(file && { file: fileDataToUrl }),\r\n\t\t\t\t...(filename && { filename }),\r\n\t\t\t\t...(mime && { mime }),\r\n\t\t\t\tfacebook_page_id: fb_messages[0].facebook_page_id,\r\n\t\t\t\tuser_id: fb_messages[0].user_id,\r\n\t\t\t\tfacebook_connection_id: fb_messages[0].facebook_connection_id,\r\n\t\t\t\tfacebook_contact_id: fb_messages[0].facebook_contact_id,\r\n\t\t\t\tfacebook_chat_id: fb_messages[0].facebook_chat_id\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.messages.createFbMessage(body);\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.messages.createFbMessage(body);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.SEND_FACEBOOK_MESSAGE_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSendMessage: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { fb_messages: newMessages } = getState().ticketPageReducer;\r\n\t\tconst { facebook_message } = response.data;\r\n\t\tconst copyFbMessages = [...newMessages];\r\n\t\tconst copyTickets = tickets && tickets.length > 0 && [...tickets];\r\n\t\t// clear unread messages count on ticket detail page in frontend (already cleared on backend on chatpage didmount)\r\n\t\tconst getIndex = tickets.findIndex(x => x._id === ticket_id);\r\n\t\tif (getIndex !== -1) {\r\n\t\t\tcopyTickets[getIndex].facebook_message = {...facebook_message};\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.SEND_MESSAGE_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\ttickets: []\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// push new messge in list of messages\r\n\t\tcopyFbMessages.push(facebook_message);\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SEND_FACEBOOK_MESSAGE_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSendMessage: false,\r\n\t\t\t\t// twilio_messages: copyFbMessages\r\n\t\t\t\ttickets: copyTickets\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function newTicket({ ticket_id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { tickets } = getState().ticketPageReducer;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.NEW_TICKET_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingTickets: true,\r\n\t\t\t\tloadingNewTicket: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.tickets.getTickets({ ticket_id });\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.tickets.getTickets({ ticket_id });\r\n\t\t}\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.NEW_TICKET_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingTickets: false,\r\n\t\t\t\t\tloadingNewTicket: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// dirty fix, clear first all tickets and update new, after this dispatch.\r\n\t\t// it's not re rendering even the state is already changed.\r\n\r\n\t\tconst { tickets: responseTickets } = response.data;\r\n\t\tconst ticket = responseTickets[0];\r\n\t\t// success\r\n\t\tconst copyTickets = tickets && tickets.length > 0 ? [...tickets] : [];\r\n\t\t// check if the new ticket is already in the list, if yes: update it so the last message will update,\r\n\t\t// else add it to the new list of tickets.\r\n\t\tconst getTicketIndex = copyTickets.findIndex( x => x._id === ticket_id);\r\n\t\tif (getTicketIndex === -1) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.NEW_TICKET_SUCCESS,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\t// loadingTickets: true,\r\n\t\t\t\t\ttickets: []\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// add new\r\n\t\t\tcopyTickets.push(ticket);\r\n\t\t} else {\r\n\t\t\t// update,\r\n\t\t\tcopyTickets[getTicketIndex] = {...ticket};\t\r\n\t\t}\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.NEW_TICKET_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingTickets: false,\r\n\t\t\t\tloadingNewTicket: false,\r\n\t\t\t\tnewTicket: ticket //this will use to show notification in ticket page.\r\n\t\t\t}\r\n\t\t});\r\n\t\t// clear new ticket after\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.NEW_TICKET_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tnewTicket: null\r\n\t\t\t}\r\n\t\t});\r\n\t\t// dispatch(push(`/tickets?type=my&ticket_id=${ticket._id}`));\r\n\t};\r\n}\r\n\r\nexport function updateTicketStatus({ ticket_id, status }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { tickets, ticket: stateTicket } = getState().ticketPageReducer;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_TICKET_STATUS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUpdateTicket: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'staff') {\r\n\t\t\tresponse = await API.staff.tickets.updateTicketStatusById({ id: ticket_id, status });\r\n\t\t} else {\r\n\t\t\tresponse = await API.admin.tickets.updateTicketStatusById({ id: ticket_id, status });\r\n\t\t}\r\n\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_TICKET_STATUS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingUpdateTicket: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// success\r\n\t\tconst { ticket } = response.data;\r\n\t\tconst copyTickets = [...tickets];\r\n\t\tconst getIndex = copyTickets.findIndex(x => x._id === ticket_id);\r\n\t\tif (getIndex !== -1) {\r\n\t\t\tcopyTickets[getIndex] = { ...copyTickets[getIndex], ...ticket };\r\n\t\t}\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_TICKET_STATUS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tmeta: response.meta,\r\n\t\t\t\tloadingUpdateTicket: false,\r\n\t\t\t\ttickets: copyTickets,\r\n\t\t\t\tticket: { ...stateTicket, ...ticket }\r\n\t\t\t}\r\n\t\t});\r\n\t\t// redirect to assigned ticket list tab\r\n\t\tif (status === 'in-progress') {\r\n\t\t\tdispatch(push(`/tickets?type=my&ticket_id=${ticket._id}`));\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function updateTicketAsignee({ ticket_id, user_id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { ticket: stateTicket } = getState().ticketPageReducer;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_TICKET_ASIGNEE_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUpdateTicket: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'staff') {\r\n\t\t\tresponse = await API.staff.tickets.updateTicketAsigneeById({ id: ticket_id, user_id });\r\n\t\t} else {\r\n\t\t\tresponse = await API.admin.tickets.updateTicketAsigneeById({ id: ticket_id, user_id });\r\n\t\t}\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_TICKET_ASIGNEE_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingUpdateTicket: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { ticket } = response.data;\r\n\t\t// const copyTickets = [...tickets];\r\n\t\t// const getIndex = copyTickets.findIndex(x => x._id === ticket_id);\r\n\t\t// if (getIndex !== -1) {\r\n\t\t// \tcopyTickets[getIndex] = { ...ticket };\r\n\t\t// \tdispatch({\r\n\t\t// \t\ttype: ActionTypes.UPDATE_TICKET_ASIGNEE_REQUEST,\r\n\t\t// \t\tpayload: {\r\n\t\t// \t\t\ttickets: []\r\n\t\t// \t\t}\r\n\t\t// \t});\r\n\t\r\n\t\t// }\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_TICKET_ASIGNEE_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tmeta: response.meta,\r\n\t\t\t\tloadingUpdateTicket: false,\r\n\t\t\t\t// tickets: copyTickets,\r\n\t\t\t\tticket: {...stateTicket, ...ticket}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdispatch(push(`/tickets?type=my`));\r\n\t};\r\n}\r\n\r\nexport function updateCustomerInformation({ fields, id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { ticket: stateTicket } = getState().ticketPageReducer;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_CUSTOMER_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUpdateTicket: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst body = {\r\n\t\t\ttwilio_contact: {\r\n\t\t\t\t...fields\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'staff') {\r\n\t\t\tresponse = await API.staff.contacts.updateTwilioContact({ body, id });\r\n\t\t} else {\r\n\t\t\tresponse = await API.admin.contacts.updateTwilioContact({ body, id });\r\n\t\t}\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_CUSTOMER_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingUpdateTicket: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { twilio_contact } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_CUSTOMER_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tticket: {...stateTicket, twilio_contact: { ...twilio_contact }},\r\n\t\t\t\tloadingUpdateTicket: false,\r\n\t\t\t\tmeta: response.meta\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\n\r\nexport function addTicketNote({ id, fields }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { ticket: stateTicket } = getState().ticketPageReducer;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.ADD_TICKET_NOTE_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUpdateTicket: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst body = {\r\n\t\t\tnote: {\r\n\t\t\t\tnote: fields.note\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'staff') {\r\n\t\t\tresponse = await API.staff.tickets.createTicketNote({ body, id });\r\n\t\t} else {\r\n\t\t\tresponse = await API.admin.tickets.createTicketNote({ body, id });\r\n\t\t}\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.ADD_TICKET_NOTE_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingUpdateTicket: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { ticket } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.ADD_TICKET_NOTE_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tticket: {...stateTicket, ...ticket},\r\n\t\t\t\tloadingUpdateTicket: false,\r\n\t\t\t\tmeta: response.meta\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\n\r\nexport function getUsers() {\r\n\treturn async dispatch => {\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TICKET_STAFFS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUsers: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet response;\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.users.getUsers();\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.users.getUsers();\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TICKET_STAFFS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingUsers: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { users } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TICKET_STAFFS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUsers: false,\r\n\t\t\t\tusers\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\n\r\nexport function resetTicket() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_MESSAGES\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_TICKETS_PAGE_META\r\n\t\t});\r\n\t};\r\n}\r\n\r\n\r\nexport function resetPage() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_TICKETS_PAGE\r\n\t\t});\r\n\t};\r\n}\r\n","import { connect } from 'react-redux';\r\nimport TicketPage from './TicketPage';\r\nimport { sendMessage, getTickets, getTwilioMessages, getTwilioFileById, addTicketNote, updateCustomerInformation,\r\n\tupdateTicketStatus, updateTicketAsignee, getTicketById, getTwilioMessageById, newTicket,\r\n\tgetUsers, resetTicket, resetMeta, resetPage, getFbMessages, getFbMessagesByID, sendMessageFb } from '../../actions/TicketPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tticketPageProps: state.ticketPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tsendMessage(options) {\r\n\t\tdispatch(sendMessage(options));\r\n\t},\r\n\tgetTickets(options) {\r\n\t\tdispatch(getTickets(options));\r\n\t},\r\n\tgetTwilioMessages(options) {\r\n\t\tdispatch(getTwilioMessages(options));\r\n\t},\r\n\tgetTwilioMessageById(options) {\r\n\t\tdispatch(getTwilioMessageById(options));\r\n\t},\r\n\tgetTicketById(options) {\r\n\t\tdispatch(getTicketById(options));\r\n\t},\r\n\tnewTicket(options) {\r\n\t\tdispatch(newTicket(options));\r\n\t},\r\n\tgetTwilioFileById(options) {\r\n\t\tdispatch(getTwilioFileById(options));\r\n\t},\r\n\tupdateTicketAsignee(options) {\r\n\t\tdispatch(updateTicketAsignee(options));\r\n\t},\r\n\tupdateTicketStatus(options) {\r\n\t\tdispatch(updateTicketStatus(options));\r\n\t},\r\n\tupdateCustomerInformation(options) {\r\n\t\tdispatch(updateCustomerInformation(options));\r\n\t},\r\n\taddTicketNote(options) {\r\n\t\tdispatch(addTicketNote(options));\r\n\t},\r\n\tgetUsers(){\r\n\t\tdispatch(getUsers());\r\n\t},\r\n\tresetTicket() {\r\n\t\tdispatch(resetTicket());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(resetPage());\r\n\t},\r\n\tgetFbMessages(options) {\r\n\t\tdispatch(getFbMessages(options));\r\n\t},\r\n\tgetFbMessagesByID(options) {\r\n\t\tdispatch(getFbMessagesByID(options));\r\n\t},\r\n\tsendMessageFb(options){\r\n\t\tdispatch(sendMessageFb(options));\r\n\t}\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(TicketPage);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button, Form, Caption, Card, FormLayout,\r\n\tTextField, Modal, TextContainer, Icon } from '@shopify/polaris';\r\nimport { SendMajorMonotone } from '@shopify/polaris-icons';\r\nimport { compose } from 'redux';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { withAlert } from 'react-alert';\r\nimport { renderFormInput, validateRequired, validateEmail } from '../../../helpers/redux_form';\r\n\r\nclass AccountDetailsForm extends Component {\r\n\tcomponentDidMount(){\r\n\t\tthis.props.initialize({ ...this.props.data });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { pristine, submitting, invalid, isOpen, modalHandle, updateAccount, loadingSubmit } = this.props;\r\n\t\treturn (\r\n\t\t\t<Card>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={isOpen}\r\n\t\t\t\t\tonClose={() => modalHandle('accountDetails', false)}\r\n\t\t\t\t\ttitle=\"Account Information\"\r\n\t\t\t\t\tprimaryAction={{\r\n\t\t\t\t\t\tcontent: 'Save',\r\n\t\t\t\t\t\tdisabled: pristine || submitting || invalid || loadingSubmit,\r\n\t\t\t\t\t\tonAction: this.props.handleSubmit((data) => updateAccount(data))\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"Full\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\tonSubmit={this.props.handleSubmit((data) => updateAccount(data))}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tname=\"details.business_name\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Company Name\"\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Business owner's name\"\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tname=\"details.mobile_number\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Mobile Number\"\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Email Address (Username)\"\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\tvalidate={[validateRequired, validateEmail]}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tname=\"old_password\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"New Password\"\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Confirm Password\"\r\n\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t</Form>\r\n\r\n\t\t\t\t\t</Modal.Section>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'AccountDetailsForm'\r\n\t})\r\n)(AccountDetailsForm);","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button, Form, Caption, Card, FormLayout, TextField, Modal, TextContainer, Icon } from '@shopify/polaris';\r\nimport { compose } from 'redux';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { withAlert } from 'react-alert';\r\nimport { renderFormInput, validateRequired, validateEmail } from '../../../helpers/redux_form';\r\nimport Loading from '../../../components/loading';\r\n\r\nclass StaffForm extends Component {\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { loadingStaffModal: prevLoading } = prevProps;\r\n\t\tconst { loadingStaffModal, staffFormType } = this.props;\r\n\r\n\t\tif (prevLoading && prevLoading !== loadingStaffModal && staffFormType === 'updating') {\r\n\t\t\tthis.props.initialize({ ...this.props.data });\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { data: selectedStaff, pristine, submitting, invalid, loadingStaffModal, loadingSubmit, isOpen, submitStaff, modalHandle, staffFormType } = this.props;\r\n\t\treturn (\r\n\t\t\t<Card>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={isOpen}\r\n\t\t\t\t\tonClose={e => modalHandle('staffForm', false)}\r\n\t\t\t\t\ttitle={staffFormType === 'adding' ? 'Add Staff' : 'Update Staff'}\r\n\t\t\t\t\tprimaryAction={{\r\n\t\t\t\t\t\tcontent: 'Save',\r\n\t\t\t\t\t\tdisabled: pristine || submitting || invalid || loadingSubmit,\r\n\t\t\t\t\t\tonAction: this.props.handleSubmit(data => submitStaff({ ...data, selectedStaff }))\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t// secondaryActions={[{\r\n\t\t\t\t\t// \tcontent: 'Learn more',\r\n\t\t\t\t\t// \tonAction: (e) => modalHandle\r\n\t\t\t\t\t// }]}\r\n\t\t\t\t\tsize=\"Full\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t\t{loadingStaffModal ? (\r\n\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={this.props.handleSubmit(data => submitStaff({ ...data, selectedStaff }))}>\r\n\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Full Name\"\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Email Address\"\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired, validateEmail]}\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"old_password\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\n\t\t\t\t\t\t\t\t\t\tvalidate={staffFormType === 'adding' && [validateRequired]}\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Confirm Password\"\n\t\t\t\t\t\t\t\t\t\tvalidate={staffFormType === 'adding' && [validateRequired]}\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Modal.Section>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'StaffForm'\r\n\t})\r\n)(StaffForm);\r\n","import React, { Component } from 'react';\r\nimport { Modal, Card, Form, FormLayout } from '@shopify/polaris';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { renderFormInput, validateRequired, renderCheckbox } from '../../../helpers/redux_form';\r\nimport Loading from '../../../components/loading';\r\nimport { compose } from 'redux';\r\n\r\nclass TwilioConnectionForm extends Component {\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { loadingTwilioForm: prevLoading } = prevProps;\r\n\t\tconst { loadingTwilioForm } = this.props;\r\n\t\tif (prevLoading && prevLoading !== loadingTwilioForm) {\r\n\t\t\tthis.props.initialize({ ...this.props.data });\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { data: selectedTwilio_connection, loadingTwilioForm, isOpen, modalHandle, submitTwilioConnection, invalid, twilioFormType } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Card>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={isOpen}\r\n\t\t\t\t\tonClose={() => modalHandle('twilioConnectionForm', false)}\r\n\t\t\t\t\ttitle={twilioFormType === 'adding' ? 'Add WhatsApp Connection' : 'Edit WhatsApp Connection'}\r\n\t\t\t\t\tprimaryAction={{\r\n\t\t\t\t\t\tcontent: 'Save',\r\n\t\t\t\t\t\tdisabled: invalid,\r\n\t\t\t\t\t\tonAction: this.props.handleSubmit(data => submitTwilioConnection({ ...data, selectedTwilio_connection }))\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t\t{loadingTwilioForm ? (\r\n\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={this.props.handleSubmit(data => submitTwilioConnection({ ...data, selectedTwilio_connection }))}>\r\n\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Connection Name\"\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"enabled\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Enabled Status\"\n\t\t\t\t\t\t\t\t\t\tcomponent={renderCheckbox}\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"account_sid\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Account SID\"\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname=\"auth_token\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Account Token\"\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Modal.Section>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\nexport default compose(reduxForm({ form: 'TwilioConnectionForm' }))(TwilioConnectionForm);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button, Form, ChoiceList, Card, FormLayout, TextField, Modal, TextContainer, Icon, Layout } from '@shopify/polaris';\r\nimport { compose } from 'redux';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { withAlert } from 'react-alert';\r\nimport FacebookLogin from 'react-facebook-login';\r\n// import { renderCheckbox, validateRequired, validateEmail } from '../../../helpers/redux_form';\r\nimport config from './../../../config';\r\nimport Loading from '../../../components/loading';\r\nimport TwilioConnectionForm from './TwilioConnectionForm';\r\n\r\nclass ConnectionForm extends Component {\r\n\t// componentDidUpdate(prevProps) {\r\n\t// \tconst { loadingStaffModal: prevLoading } = prevProps;\r\n\t// \tconst { loadingStaffModal, staffFormType } = this.props;\r\n\r\n\t// \tif (prevLoading && prevLoading !== loadingStaffModal && staffFormType === 'updating') {\r\n\t// \t\tthis.props.initialize({ ...this.props.data });\r\n\t// \t}\r\n\t// }\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tselected: 'facebook',\r\n\t\t\ttriggerFacebookLogin: false,\r\n\t\t\tsuccessFacebookLogin: false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// window.fbAsyncInit = function() {\r\n\t\t// \twindow.FB.init({\r\n\t\t// \t\tappId: '263681584835753',\r\n\t\t// \t\tautoLogAppEvents: true,\r\n\t\t// \t\txfbml: true,\r\n\t\t// \t\tversion: 'v7.0'\r\n\t\t// \t  });\r\n\t\t// \t  console.log\r\n\t\t// \t// window.FB.getLoginStatus(function(response) {\r\n\t\t// \t// \tconsole.log({response})\r\n\t\t// \t// \tthis.statusChangeCallback(response);\r\n\t\t// \t// }\r\n\t\t// };\r\n\t\t// window.FB.logout(function(response) {\r\n\t\t// \t// Person is now logged out\r\n\t\t// \tconsole.log({response})\r\n\t\t// });\r\n\t\t// window.FB.login(function(response) {\r\n\t\t// \tif (response.authResponse) {\r\n\t\t// \t console.log('Welcome!  Fetching your information.... ');\r\n\t\t// \t\twindow.FB.api('/me', function(response) {\r\n\t\t// \t   console.log('Good to see you, ' + response.name + '.');\r\n\t\t// \t });\r\n\t\t// \t} else {\r\n\t\t// \t console.log('User cancelled login or did not fully authorize.');\r\n\t\t// \t}\r\n\t\t// });\r\n\t\t// window.FB.getLoginStatus(function (response) {\r\n\t\t// \tif (response && response.status === 'connected') {\r\n\t\t// \t\tconsole.log({ response })\r\n\t\t// \t//   ezfb.logout();\r\n\t\t// \t}\r\n\t\t//   });\r\n\t}\r\n\r\n\tstatusChangeCallback(response) {\r\n\t\tconsole.log('statusChangeCallback');\r\n\t\tconsole.log(response);\r\n\t\tif (response.status === 'connected') {\r\n\t\t\tthis.loggedIn(response);\r\n\t\t\tconsole.log(this.state);\r\n\t\t} else if (response.status === 'not_authorized') {\r\n\t\t\tthis.loggedOut();\r\n\t\t\tconsole.log(this.state.loggedStatus);\r\n\t\t} else {\r\n\t\t\tthis.loggedOut();\r\n\t\t\tconsole.log(this.state.loggedStatus);\r\n\t\t}\r\n\t}\r\n\r\n\ttriggerFacebookLogin = () => {\r\n\t\t// window.FB.logout(function(response) {\r\n\t\t// \tconsole.log({ response });\r\n\t\t// });\r\n\t\tconst responseFacebook = response => {\r\n\t\t\t// loggedOut();\r\n\t\t\tconsole.log({ response });\r\n\t\t\tif (response.accessToken) {\r\n\t\t\t\tthis.closeModal();\r\n\t\t\t\t// add the connection, call API.\r\n\t\t\t\tthis.props.addFacebokConnection({ ...response });\r\n\t\t\t\t// await this.props.modalHandle('connectionForm', false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<FacebookLogin\n\t\t\t\tappId={config.facebook.app_id}\n\t\t\t\tfields=\"name\"\n\t\t\t\tscope=\"pages_show_list,pages_messaging,pages_manage_metadata,pages_manage_engagement,pages_messaging\"\n\t\t\t\tcallback={responseFacebook}\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\tcloseModal = () => {\r\n\t\tthis.props.modalHandle('connectionForm', false);\r\n\t};\r\n\thandleTwilioModal = () => {\r\n\t\tthis.props.handleTwilioModal(true);\r\n\t\tthis.closeModal();\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { selected } = this.state;\r\n\t\tconst { loadingSubmit, isOpen } = this.props;\r\n\t\treturn (\r\n\t\t\t<Card>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={isOpen}\r\n\t\t\t\t\tonClose={e => this.closeModal()}\r\n\t\t\t\t\ttitle=\"Select Connection\"\r\n\t\t\t\t\tprimaryAction={{\r\n\t\t\t\t\t\tcontent: 'Close',\r\n\t\t\t\t\t\tdisabled: loadingSubmit,\r\n\t\t\t\t\t\tonAction: () => this.closeModal()\r\n\t\t\t\t\t\t// onAction: this.props.handleSubmit((data) => submitStaff({...data, selectedStaff }))\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsecondaryActions={selected === 'whatsapp' ? { content: 'Okay', onAction: () => this.handleTwilioModal() } : null}\r\n\t\t\t\t\tsize=\"Full\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t\t{loadingSubmit ? (\r\n\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form >\r\n\t\t\t\t\t\t\t\t{selected === 'facebook' && this.triggerFacebookLogin()}\r\n\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t<ChoiceList\r\n\t\t\t\t\t\t\t\t\t\tchoices={[\r\n\t\t\t\t\t\t\t\t\t\t\t{ label: 'Facebook', value: 'facebook' },\r\n\t\t\t\t\t\t\t\t\t\t\t{ label: 'WhatsApp', value: 'whatsapp' },\r\n\t\t\t\t\t\t\t\t\t\t\t{ label: 'Instagram', value: 'instagram' },\r\n\t\t\t\t\t\t\t\t\t\t\t{ label: 'WeChat', value: 'wechat' }\r\n\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t\tselected={this.state.selected}\r\n\t\t\t\t\t\t\t\t\t\tonChange={value => this.setState({ selected: value[0] })}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Modal.Section>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'ConnectionForm'\r\n\t})\r\n)(ConnectionForm);\r\n","const LabelHelper = {\r\n\tstaffStatus(casUserType) {\r\n\t\tswitch (casUserType) {\r\n\t\t\tcase 'online':\r\n\t\t\t\treturn 'Online';\r\n\t\t\tcase 'offline':\r\n\t\t\t\treturn 'Offline';\r\n\t\t\tdefault:\r\n\t\t}\r\n\t\treturn '';\r\n\t},\r\n\tconnectionType(connection) {\r\n\t\tswitch (connection) {\r\n\t\t\tcase 'facebook':\r\n\t\t\t\treturn { title: 'Facebook', description: 'Create tickets from Facebook messages and comments.' };\r\n\t\t\tcase 'whatsapp':\r\n\t\t\t\treturn { title: 'WhatsApp', description: 'Create tickets from WhatsApp messages' };\r\n\t\t\tdefault:\r\n\t\t}\r\n\t\treturn { title: '', description: '' };\r\n\t},\r\n\tstaffStatus(status) {\r\n\t\tswitch (status) {\r\n\t\t\tcase 'active':\r\n\t\t\t\treturn 'Active';\r\n\t\t\tcase 'inactive':\r\n\t\t\t\treturn 'Inactve';\r\n\t\t\tdefault:\r\n\t\t\t\treturn status;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default LabelHelper;\r\n","import React, { Component } from 'react';\r\nimport { Caption, Checkbox, Avatar, ResourceItem, TextStyle, ResourceList, TextContainer, Icon } from '@shopify/polaris';\r\nimport { EditMinor, DeleteMinor } from '@shopify/polaris-icons';\r\nimport Loading from '../../../components/loading';\r\nimport LabelHelper from '../../../helpers/Label';\r\n\r\nclass ConnectionList extends Component {\r\n\trenderFacebookConnections = facebook_connections => {\r\n\t\tconst changeStatusHandle = ({ type, status, facebook_connection_id, facebook_page_id }) => {\r\n\t\t\tif (window.confirm(`Are you sure to ${status ? 'enable' : 'disable'} this feature?`)) {\r\n\t\t\t\t// call action and API call change status\r\n\t\t\t\tthis.props.updatePageSubcribedFieldById({ type, status, facebook_connection_id, facebook_page_id });\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<ResourceList\r\n\t\t\t\tloading={false}\r\n\t\t\t\tresourceName={{ singular: 'connection', plural: 'connections' }}\r\n\t\t\t\titems={facebook_connections}\r\n\t\t\t\trenderItem={item => {\r\n\t\t\t\t\tconst { _id, facebook_pages } = item;\r\n\t\t\t\t\tconst connection = LabelHelper.connectionType('facebook');\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<ResourceItem id={_id}>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t// onClick= {()=> !loadingDelete && !loadingStaffModal && !loadingSubmit &&\r\n\t\t\t\t\t\t\t\t// \tthis.modalHandle('staffForm', true, _id)\r\n\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\tstyle={styles.connectionsContainer}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div style={styles.connectionHeader}>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{connection.title}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t<Caption>{connection.description}</Caption>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\tsource={DeleteMinor}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{facebook_pages.length < 0 ? (\r\n\t\t\t\t\t\t\t\t\t<span>display TBD</span>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\tfacebook_pages.map(page => {\r\n\t\t\t\t\t\t\t\t\t\tconst { loadingSubcribedFieldUpdate } = this.props;\r\n\t\t\t\t\t\t\t\t\t\tconst { _id: page_id, name, subscribed_fields } = page;\r\n\t\t\t\t\t\t\t\t\t\tconst media = <Avatar\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\t\t\t\t\tinitials={name.charAt(0)}\r\n\t\t\t\t\t\t\t\t\t\t              />;\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<ResourceItem\r\n\t\t\t\t\t\t\t\t\t\t\t\tmedia={media}\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={page_id}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{name}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* <Caption>Facebook</Caption> */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loadingSubcribedFieldUpdate}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Enable Messenger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={subscribed_fields.messages}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={value => changeStatusHandle({ type: 'messages', status: value, facebook_connection_id: _id, facebook_page_id: page_id })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loadingSubcribedFieldUpdate}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Enable Facebook Comments\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={subscribed_fields.feed}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={value => changeStatusHandle({ type: 'feed', status: value, facebook_connection_id: _id, facebook_page_id: page_id })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</ResourceItem>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</ResourceItem>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { loadingFacebookConnections, facebook_connections, loadingSubmitFacebookConnection } = this.props;\r\n\t\treturn (\r\n\t\t\t<div style={{ width: 600 }}>\r\n\t\t\t\t{loadingFacebookConnections || loadingSubmitFacebookConnection ? (\r\n\t\t\t\t\t<Loading />\r\n\t\t\t\t) : facebook_connections.length <= 0 ? (\r\n\t\t\t\t\t<div style={{ textAlign: 'center', marginTop: 10 }}>\r\n\t\t\t\t\t\t<TextStyle variation=\"strong\">No facebook connection found.</TextStyle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tthis.renderFacebookConnections(facebook_connections)\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tcontainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\tconnectionsContainer: {\r\n\t\t// display: 'flex',\r\n\t\t// justifyContent: 'space-between',\r\n\t\t// alignItems: 'center'\r\n\t},\r\n\tconnectionHeader: {\r\n\t\tpadding: 10,\r\n\t\tdisplay: 'flex',\r\n\t\twidth: '100%',\r\n\t\tjustifyContent: 'space-between',\r\n\t\tborderBottom: '1px solid black'\r\n\t}\r\n};\r\n\r\nexport default ConnectionList;\r\n","import React from 'react';\r\nimport { Icon } from '@shopify/polaris';\r\nimport { ClipboardMinor } from '@shopify/polaris-icons';\r\n\r\nexport default ({ hovered = false, Webhook }) => {\r\n\treturn (\r\n\t\t<td style={{ display: 'flex', flexDirection: 'row', textAlign: 'left' }}>\r\n\t\t\t{\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{hovered ? (\r\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\r\n\t\t\t\t\t\t\t<u style={{ color: '#afb4b7' }}>{Webhook}</u>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\tsource={ClipboardMinor}\n\t\t\t\t\t\t\t\t\tcolor=\"inkLightest\"\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div>{Webhook}</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</td>\r\n\t);\r\n};\r\n","import React, { Component } from 'react';\r\nimport { ResourceList, TextStyle, Card, ResourceItem, Icon, Badge } from '@shopify/polaris';\r\nimport { DeleteMinor, EditMinor, ClipboardMinor } from '@shopify/polaris-icons';\r\nimport Loading from '../../../components/loading';\r\nimport HoverIcon from './HoverIcon';\r\n\r\nclass TwilioConnectionList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmousehover: false,\r\n\t\t\thoverdata: '',\r\n\t\t\tdata: []\r\n\t\t};\r\n\t}\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { loadingTwilioData: prev_loadingTwilioData } = prevProps;\r\n\t\tconst { loadingTwilioData, twilioFormType } = this.props;\r\n\r\n\t\tif (prev_loadingTwilioData && prev_loadingTwilioData !== loadingTwilioData && twilioFormType === 'updating') {\r\n\t\t\tthis.props.initialize({ ...this.props.twilio_connections });\r\n\t\t}\r\n\t\tif (this.props.twilio_connections.length && prevProps.twilio_connections.length !== this.props.twilio_connections.length) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdata: this.props.twilio_connections.map(({ account_sid }) => ({\r\n\t\t\t\t\thovered: false,\r\n\t\t\t\t\taccount_sid\r\n\t\t\t\t}))\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleMouseEnter = account_sid => {\r\n\t\tconst data = this.state.data.slice().map(o => {\r\n\t\t\tif (o.account_sid === account_sid) {\r\n\t\t\t\treturn { ...o, hovered: true };\r\n\t\t\t}\r\n\t\t\treturn { ...o };\r\n\t\t});\r\n\r\n\t\tthis.setState({ data });\r\n\t};\r\n\r\n\thandleMouseLeave = account_sid => {\r\n\t\tconst data = this.state.data.slice().map(o => {\r\n\t\t\tif (o.account_sid === account_sid) {\r\n\t\t\t\treturn { ...o, hovered: false };\r\n\t\t\t}\r\n\t\t\treturn { ...o };\r\n\t\t});\r\n\r\n\t\tthis.setState({ data });\r\n\t};\r\n\thandledata = Webhook => {\r\n\t\tconst isHovered = this.state.mousehover;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{isHovered ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<a>{Webhook}</a>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<Icon source={ClipboardMinor} />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div>{Webhook}</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\thandleClickedData = Webhook => {\r\n\t\tconst el = document.createElement('textarea');\r\n\t\tel.value = Webhook;\r\n\t\tdocument.body.appendChild(el);\r\n\t\tel.select();\r\n\t\tdocument.execCommand('copy');\r\n\t\tdocument.body.removeChild(el);\r\n\t};\r\n\r\n\thandleTwilioConnectionId = async id => {\r\n\t\tawait this.props.getTwilioConnectionById({ id });\r\n\t\tthis.props.modalHandle('twilioConnectionForm', true, id);\r\n\t};\r\n\r\n\trenderTwilioConnections = twilio_connections => {\r\n\t\tconst { handledata } = this;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div style={styles.connectionHeader}>\r\n\t\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t\t<TextStyle variation=\"strong\">{'WhatsApp Connection List'}</TextStyle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ResourceList\r\n\t\t\t\t\tloading={false}\r\n\t\t\t\t\tresourceName={{ singular: 'connection', plural: 'connections' }}\r\n\t\t\t\t\titems={twilio_connections}\r\n\t\t\t\t\trenderItem={(item, id, i) => {\r\n\t\t\t\t\t\tconst { _id, name, enabled, account_sid, auth_token } = item;\r\n\t\t\t\t\t\tconst btoa = window.btoa(`${account_sid}:${auth_token}`);\r\n\t\t\t\t\t\tconst status = enabled ? 'enabled' : 'disabled';\r\n\t\t\t\t\t\tconst Webhook = btoa.length > 10 ? btoa.substring(0, 20 - 3) + '...' : btoa;\r\n\t\t\t\t\t\tlet key = account_sid,\r\n\t\t\t\t\t\t\thovered = false;\r\n\t\t\t\t\t\tif (this.state.data.length) {\r\n\t\t\t\t\t\t\thovered = this.state.data[i].hovered;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tkey={hovered}\r\n\t\t\t\t\t\t\t\tstyle={styles.connectionsContainer}\r\n\t\t\t\t\t\t\t\tonMouseEnter={() =>\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.handleMouseEnter(account_sid);\r\n\t\t\t\t\t\t\t\t\t}, 0)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonMouseLeave={() =>\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.handleMouseLeave(account_sid);\r\n\t\t\t\t\t\t\t\t\t}, 0)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t\t<ResourceItem>\r\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between', flexDirection: 'row' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<table style={{ flexDirection: 'column', width: 560, padding: 10 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={{ textAlign: 'left' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Connection Name: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={{ textAlign: 'left' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{name}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={{ textAlign: 'left' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Status: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={{ textAlign: 'left' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{status}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={{ textAlign: 'left' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Webhook route: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={() => this.handleClickedData(btoa)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<HoverIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tWebhook={Webhook}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thovered={hovered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.handleTwilioConnectionId(_id)}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'flex', alignItems: 'center' }}\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginRight: 10 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={EditMinor}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</ResourceItem>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { twilio_connections, loadingTwilioConnections } = this.props;\r\n\t\treturn (\r\n\t\t\t<div style={{ width: 600 }}>\r\n\t\t\t\t{loadingTwilioConnections ? (\r\n\t\t\t\t\t<Loading />\r\n\t\t\t\t) : twilio_connections.length <= 0 ? (\r\n\t\t\t\t\t<div style={{ textAlign: 'center', marginTop: 10 }}>\r\n\t\t\t\t\t\t<TextStyle variation=\"strong\">No twilio connection found.</TextStyle>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tthis.renderTwilioConnections(twilio_connections)\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nconst styles = {\r\n\tcontainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\tconnectionsContainer: {\r\n\t\t// display: 'flex',\r\n\t\t// justifyContent: 'space-between',\r\n\t\t// alignItems: 'center'\r\n\t},\r\n\tconnectionHeader: {\r\n\t\tpadding: 10,\r\n\t\tdisplay: 'flex',\r\n\t\twidth: '100%',\r\n\t\tjustifyContent: 'space-between',\r\n\t\tborderBottom: '1px solid black'\r\n\t}\r\n};\r\nexport default TwilioConnectionList;\r\n","import React, { Component } from 'react';\r\nimport { Heading, Icon, Avatar, ResourceItem, Badge, Card, TextStyle, Layout, ResourceList } from '@shopify/polaris';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { EditMinor, DeleteMinor } from '@shopify/polaris-icons';\r\nimport AccountDetailsForm from './components/AccountDetailsForm';\r\nimport StaffForm from './components/StaffForm';\r\nimport ConnectionForm from './components/ConnectionForm';\r\nimport Loading from '../../components/loading';\r\nimport LabelHelper from '../../helpers/Label';\r\nimport ConnectionList from './components/ConnectionList';\r\nimport TwilioConnectionList from './components/TwilioConnectionList';\r\nimport TwilioConnectionForm from './components/TwilioConnectionForm';\r\n\r\nclass SettingsPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\taccountDetailsForm: false,\r\n\t\t\tstaffForm: false,\r\n\t\t\tconnectionForm: false,\r\n\t\t\tstaffFormType: null,\r\n\t\t\ttwilioConnectionForm: false,\r\n\t\t\ttwilioFormType: null // for identification if update or add\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getAccount();\r\n\t\tthis.props.getFacebookConnections();\r\n\t\tthis.props.getTwilioConnections();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { meta: prevMeta, loadingSubmitFacebookConnection: prev_loadingSubmitFacebookConnection, loadingTwilioData: prev_loadingTwilioData } = prevProps.settingsPageProps;\r\n\t\tconst { meta, loadingSubmitFacebookConnection, loadingTwilioData } = this.props.settingsPageProps;\r\n\r\n\t\tif (meta && meta !== prevMeta) {\r\n\t\t\tif (meta.code === 200) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\taccountDetailsForm: false,\r\n\t\t\t\t\tstaffForm: false,\r\n\t\t\t\t\tstaffFormType: null,\r\n\t\t\t\t\ttwilioFormType: null\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!loadingTwilioData && loadingTwilioData !== prev_loadingTwilioData) {\r\n\t\t\tthis.modalHandle('twilioConnectionForm', false);\r\n\t\t\tthis.props.getTwilioConnections();\r\n\t\t}\r\n\t\tif (!loadingSubmitFacebookConnection && loadingSubmitFacebookConnection !== prev_loadingSubmitFacebookConnection) {\r\n\t\t\tthis.props.getFacebookConnections();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\r\n\tmodalHandle = async (name, value, id = '') => {\r\n\t\tif (name === 'accountDetails') {\r\n\t\t\tthis.setState({\r\n\t\t\t\taccountDetailsForm: value\r\n\t\t\t});\r\n\t\t} else if (name === 'connectionForm') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tconnectionForm: value\r\n\t\t\t});\r\n\t\t} else if (name === 'twilioConnectionForm') {\r\n\t\t\tthis.setState({\r\n\t\t\t\ttwilioConnectionForm: value,\r\n\t\t\t\ttwilioFormType: id ? 'updating' : 'adding'\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (id) {\r\n\t\t\t\t// fetch staff by id.\r\n\t\t\t\tawait this.props.getStaffById({ id });\r\n\t\t\t}\r\n\t\t\tif (!value) {\r\n\t\t\t\tthis.props.resetSelectedStaff();\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tstaffForm: value,\r\n\t\t\t\tstaffFormType: id ? 'updating' : 'adding'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tonDeleteStaff = ({ e, _id }) => {\r\n\t\te.stopPropagation();\r\n\t\tif (_id) {\r\n\t\t\tif (window.confirm('Are you sure to delete this staff?')) {\r\n\t\t\t\tthis.props.deleteStaff({ id: _id });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { loadingTwilioData, settingsPageProps, submitStaff, submitTwilioConnection, addFacebokConnection, updatePageSubcribedFieldById, getTwilioConnectionById } = this.props;\r\n\t\tconst {\r\n\t\t\tloadingDelete,\r\n\t\t\tstaffs,\r\n\t\t\tselectedStaff,\r\n\t\t\tloadingSubmitFacebookConnection,\r\n\t\t\tloadingStaffs,\r\n\t\t\tloadingFacebookConnections,\r\n\t\t\tfacebook_connections,\r\n\t\t\ttwilio_connections,\r\n\t\t\tloadingTwilioForm,\r\n\t\t\tloadingSubcribedFieldUpdate,\r\n\t\t\tloadingStaffModal,\r\n\t\t\tloadingSubmit,\r\n\t\t\tloadingAccount\r\n\t\t} = settingsPageProps;\r\n\t\t\r\n\t\tconst { details, email, name } = _.get(settingsPageProps, 'account') || '';\r\n\t\tconst { business_name, industry, mobile_number } = details || '';\r\n\t\tconst { accountDetailsForm, staffForm, connectionForm, staffFormType, twilioConnectionForm, twilioConnectionId, twilioFormType } = this.state;\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t<Layout.Section>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t{accountDetailsForm && name && (\r\n\t\t\t\t\t\t<AccountDetailsForm\r\n\t\t\t\t\t\t\tmodalHandle={this.modalHandle}\r\n\t\t\t\t\t\t\tisOpen={accountDetailsForm}\r\n\t\t\t\t\t\t\tdata={_.get(settingsPageProps, 'account')}\r\n\t\t\t\t\t\t\tupdateAccount={this.props.updateAccount}\r\n\t\t\t\t\t\t\tloadingSubmit={loadingSubmit}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{staffForm && (\r\n\t\t\t\t\t\t<StaffForm\r\n\t\t\t\t\t\t\tmodalHandle={this.modalHandle}\r\n\t\t\t\t\t\t\tloadingStaffModal={loadingStaffModal}\r\n\t\t\t\t\t\t\tstaffFormType={staffFormType} // adding or updating\r\n\t\t\t\t\t\t\tisOpen={staffForm}\r\n\t\t\t\t\t\t\tdata={selectedStaff}\r\n\t\t\t\t\t\t\tsubmitStaff={submitStaff}\r\n\t\t\t\t\t\t\tloadingSubmit={loadingSubmit}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{twilioConnectionForm && (\r\n\t\t\t\t\t\t<TwilioConnectionForm\r\n\t\t\t\t\t\t\tmodalHandle={this.modalHandle}\r\n\t\t\t\t\t\t\ttwilioFormType={twilioFormType} //for verification if update or add\r\n\t\t\t\t\t\t\tloadingTwilioForm={loadingTwilioForm}\r\n\t\t\t\t\t\t\tisOpen={twilioConnectionForm} //to Open the modal twilio\r\n\t\t\t\t\t\t\tsubmitTwilioConnection={submitTwilioConnection}\r\n\t\t\t\t\t\t\tdata={_.get(settingsPageProps, 'selectedTwilio_connection')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{connectionForm && (\r\n\t\t\t\t\t\t<ConnectionForm\r\n\t\t\t\t\t\t\tmodalHandle={this.modalHandle}\r\n\t\t\t\t\t\t\tisOpen={connectionForm}\r\n\t\t\t\t\t\t\tloadingSubmit={loadingSubmit}\r\n\t\t\t\t\t\t\taddFacebokConnection={addFacebokConnection}\r\n\t\t\t\t\t\t\ttwilioConnectionId={twilioConnectionId}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div style={styles.container}>\r\n\t\t\t\t\t\t<Heading>My account</Heading>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\ttitle=\"Account Details\"\r\n\t\t\t\t\t\t\tsectioned\r\n\t\t\t\t\t\t\tprimaryFooterAction={{\r\n\t\t\t\t\t\t\t\tcontent: 'Edit Information',\r\n\t\t\t\t\t\t\t\tonClick: () => this.modalHandle('accountDetails', true),\r\n\t\t\t\t\t\t\t\tdisabled: loadingAccount || loadingSubmit\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<table style={{ width: 560 }}>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Company Name: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{business_name}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Business owner's Name: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{name}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Mobile Number: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{mobile_number}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Email Address: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{email}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">Password: </TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">**************</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Layout.Section>\r\n\t\t\t\t<Layout.Section>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div style={styles.container}>\r\n\t\t\t\t\t\t<Heading>Connections</Heading>\r\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\t\tprimaryFooterAction={{\r\n\t\t\t\t\t\t\t\t\tcontent: 'Add Connection',\r\n\t\t\t\t\t\t\t\t\tonClick: () => this.modalHandle('connectionForm', true),\r\n\t\t\t\t\t\t\t\t\tdisabled: loadingFacebookConnections || loadingSubmitFacebookConnection\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ConnectionList\r\n\t\t\t\t\t\t\t\t\tfacebook_connections={facebook_connections}\r\n\t\t\t\t\t\t\t\t\tloadingSubcribedFieldUpdate={loadingSubcribedFieldUpdate}\r\n\t\t\t\t\t\t\t\t\tloadingFacebookConnections={loadingFacebookConnections}\r\n\t\t\t\t\t\t\t\t\tloadingSubmitFacebookConnection={loadingSubmitFacebookConnection}\r\n\t\t\t\t\t\t\t\t\tupdatePageSubcribedFieldById={updatePageSubcribedFieldById}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\t\tprimaryFooterAction={{\r\n\t\t\t\t\t\t\t\t\tcontent: 'Add Connection',\r\n\t\t\t\t\t\t\t\t\tonClick: () => this.modalHandle('twilioConnectionForm', true)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<TwilioConnectionList\r\n\t\t\t\t\t\t\t\t\ttwilioFormType={twilioFormType}\r\n\t\t\t\t\t\t\t\t\tmodalHandle={this.modalHandle}\r\n\t\t\t\t\t\t\t\t\ttwilio_connections={twilio_connections}\r\n\t\t\t\t\t\t\t\t\tgetTwilioConnectionById={getTwilioConnectionById}\r\n\t\t\t\t\t\t\t\t\tloadingTwilioData={loadingTwilioData}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Layout.Section>\r\n\t\t\t\t<Layout.Section>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div style={styles.container}>\r\n\t\t\t\t\t\t<Heading>List of Staffs</Heading>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\tprimaryFooterAction={{\r\n\t\t\t\t\t\t\t\tcontent: 'Add Staff Account',\r\n\t\t\t\t\t\t\t\tonClick: () => this.modalHandle('staffForm', true),\r\n\t\t\t\t\t\t\t\tdisabled: loadingStaffs || loadingSubmit\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div style={{ width: 600 }}>\r\n\t\t\t\t\t\t\t\t{loadingStaffs ? (\r\n\t\t\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t\t\t) : staffs.length <= 0 ? (\r\n\t\t\t\t\t\t\t\t\t<div style={{ textAlign: 'center', marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">No staff found.</TextStyle>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<ResourceList\r\n\t\t\t\t\t\t\t\t\t\tloading={false}\r\n\t\t\t\t\t\t\t\t\t\tresourceName={{ singular: 'staff', plural: 'staffs' }}\r\n\t\t\t\t\t\t\t\t\t\titems={staffs}\r\n\t\t\t\t\t\t\t\t\t\trenderItem={item => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst { _id, name, status } = item;\r\n\t\t\t\t\t\t\t\t\t\t\tconst media = <Avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitials={name.charAt(0)}\r\n\t\t\t\t\t\t\t\t\t\t\t              />;\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ResourceItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// url={url}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmedia={media}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taccessibilityLabel={`View details for ${name}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => !loadingDelete && !loadingStaffModal && !loadingSubmit && this.modalHandle('staffForm', true, _id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={styles.staffListContainer}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h1>{name}</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"strong\">{name}</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextStyle variation=\"subdued\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge status={!status || status === 'offline' ? 'critical' : 'success'}>{LabelHelper.staffStatus(item.status || 'offline')}</Badge>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TextStyle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* <TextStyle variation=\"subdued\">Last login  was (TBA)</TextStyle> */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginRight: 10 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={EditMinor}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span onClick={e => !loadingDelete && !loadingStaffModal && !loadingSubmit && this.onDeleteStaff({ e, _id })}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource={DeleteMinor}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ResourceItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Layout.Section>\r\n\t\t\t</Layout>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tcontainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\tstaffListContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-between',\r\n\t\talignItems: 'center'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(SettingsPage);\r\n","import * as ActionTypes from '../../constants/ActionTypes';\r\nimport API from '../../helpers/api';\r\nimport LocalStorageHelper from '../../helpers/local_storage';\r\n\r\nexport function getAccount() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_SETTINGS_ACCOUNT_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingAccount: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.accounts.getAccount();\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_SETTINGS_ACCOUNT_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingAccount: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { user } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_SETTINGS_ACCOUNT_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingAccount: false,\r\n\t\t\t\taccount: user\r\n\t\t\t}\r\n\t\t});\r\n\t\t// get staffs\r\n\t\tdispatch(getStaffs());\r\n\t};\r\n}\r\n\r\nexport function getConnections() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_CONNECTIONS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingConnections: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.connections.getConnections();\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_CONNECTIONS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingConnections: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { connections } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_CONNECTIONS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingConnections: false,\r\n\t\t\t\tconnections\r\n\t\t\t}\r\n\t\t});\r\n\t\t// get staffs\r\n\t\tdispatch(getStaffs());\r\n\t};\r\n}\r\n\r\nexport function updateAccount(fields) {\r\n\treturn async dispatch => {\r\n\t\tconst { password, old_password } = fields;\r\n\t\tif (password !== old_password) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_SETTINGS_ACCOUNT_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: { code: 201, message: 'Password did not matched.' }\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_SETTINGS_ACCOUNT_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst { mobile_number, industry, business_name } = fields.details;\r\n\t\tconst response = await API.admin.accounts.updateAccount({ ...fields, mobile_number, business_name, industry });\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_SETTINGS_ACCOUNT_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSubmit: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { user } = response.data;\r\n\t\t// update localStorage logged in user value.\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'app',\r\n\t\t\tJSON.stringify({\r\n\t\t\t\t...JSON.parse(localStorage.getItem('app')),\r\n\t\t\t\tuser\r\n\t\t\t})\r\n\t\t);\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_SETTINGS_ACCOUNT_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: false,\r\n\t\t\t\taccount: user,\r\n\t\t\t\tmeta: response.meta\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function getStaffs() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFFS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffs: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.users.getUsers('staff');\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_STAFFS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingStaffs: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { users } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFFS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffs: false,\r\n\t\t\t\tstaffs: users\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function getStaffById({ id }) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFF_BY_ID_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffModal: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.users.getStaffById(id);\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_STAFF_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingStaffModal: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { staff } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFF_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffModal: false,\r\n\t\t\t\tselectedStaff: staff\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function submitStaff(fields) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { staffs } = getState().settingsPageReducer;\r\n\t\tconst { selectedStaff } = fields; //if there is selectedStaff, means update the staff.\r\n\r\n\t\tconst { password, old_password } = fields;\r\n\t\tif (password !== old_password) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_STAFF_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: { code: 201, message: 'Password did not matched.' }\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_STAFF_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst body = {\r\n\t\t\tstaff: {\r\n\t\t\t\t...fields\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet response;\r\n\t\tif (selectedStaff) {\r\n\t\t\tbody.staff.updated_at = selectedStaff.updated_at;\r\n\t\t\tresponse = await API.admin.users.updateStaffById(selectedStaff._id, body);\r\n\t\t} else {\r\n\t\t\tresponse = await API.admin.users.createStaff(body);\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_STAFF_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSubmit: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { staff } = response.data;\r\n\t\tlet payload = {\r\n\t\t\tloadingSubmit: false,\r\n\t\t\tmeta: response.meta\r\n\t\t};\r\n\r\n\t\tif (selectedStaff) {\r\n\t\t\tpayload.selectedStaff = null;\r\n\t\t\tconst updatedStaffs = [...staffs];\r\n\t\t\tconst findIndexToUpdate = updatedStaffs.findIndex(x => x._id === staff._id);\r\n\t\t\tupdatedStaffs[findIndexToUpdate] = { ...staff };\r\n\t\t\tpayload.staffs = updatedStaffs;\r\n\t\t} else {\r\n\t\t\tpayload.staffs = [...staffs, staff];\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_STAFF_SUCCESS,\r\n\t\t\tpayload\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function deleteStaff({ id }) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { staffs } = getState().settingsPageReducer;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.DELETE_STAFF_BY_ID_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingDeleteStaff: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.users.deleteStaffById(id);\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.DELETE_STAFF_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingDeleteStaff: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst copyStaffs = [...staffs];\r\n\t\tconst indexToBeDeleted = copyStaffs.findIndex(x => x._id === id);\r\n\t\tcopyStaffs.splice(indexToBeDeleted, 1);\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.DELETE_STAFF_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingDeleteStaff: false,\r\n\t\t\t\tstaffs: copyStaffs\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function updateStatusById({ status }) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_ACCOUNT_STATUS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUpdateStatus: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst logInType = LocalStorageHelper.getLoginType();\r\n\t\tlet response;\r\n\t\tif (logInType === 'admin') {\r\n\t\t\tresponse = await API.admin.accounts.updateStatus({ status });\r\n\t\t} else {\r\n\t\t\tresponse = await API.staff.users.updateStatus({ status });\r\n\t\t}\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_ACCOUNT_STATUS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingUpdateStatus: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { staff, admin } = response.data;\r\n\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'app',\r\n\t\t\tJSON.stringify({\r\n\t\t\t\t...JSON.parse(localStorage.getItem('app')),\r\n\t\t\t\t...(staff && { staff: { ...staff } }),\r\n\t\t\t\t...(admin && { admin: { ...admin } })\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_ACCOUNT_STATUS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingUpdateStatus: false,\r\n\t\t\t\tmeta: response.meta\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function resetSelectedStaff() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_SELECTED_STAFF\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function reset() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_ACCOUNT_PAGE\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_ACCOUNT_PAGE_META\r\n\t\t});\r\n\t};\r\n}\r\n","import { connect } from 'react-redux';\r\nimport SettingsPage from './SettingsPage';\r\nimport { deleteStaff, submitStaff, getStaffById, updateAccount, getAccount, resetSelectedStaff, reset, resetMeta } from '../../actions/SettingsPage/SettingsPage';\r\nimport { addFacebokConnection, getFacebookConnections, updatePageSubcribedFieldById } from '../../actions/SettingsPage/Facebook';\r\nimport { getTwilioConnections, getTwilioConnectionById, submitTwilioConnection } from '../../actions/SettingsPage/TwilioConnection';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tsettingsPageProps: state.settingsPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tgetAccount() {\r\n\t\tdispatch(getAccount());\r\n\t},\r\n\tupdateAccount(options) {\r\n\t\tdispatch(updateAccount(options));\r\n\t},\r\n\tgetStaffById(options) {\r\n\t\tdispatch(getStaffById(options));\r\n\t},\r\n\tsubmitStaff(options) {\r\n\t\tdispatch(submitStaff(options));\r\n\t},\r\n\tdeleteStaff(options) {\r\n\t\tdispatch(deleteStaff(options));\r\n\t},\r\n\tresetSelectedStaff() {\r\n\t\tdispatch(resetSelectedStaff());\r\n\t},\r\n\t// Facebook\r\n\taddFacebokConnection(options) {\r\n\t\tdispatch(addFacebokConnection(options));\r\n\t},\r\n\tgetFacebookConnections(options) {\r\n\t\tdispatch(getFacebookConnections(options));\r\n\t},\r\n\tupdatePageSubcribedFieldById(options) {\r\n\t\tdispatch(updatePageSubcribedFieldById(options));\r\n\t},\r\n\t// WhatsApp/Twilio\r\n\tsubmitTwilioConnection(options) {\r\n\t\tdispatch(submitTwilioConnection(options));\r\n\t},\r\n\tgetTwilioConnections(options) {\r\n\t\tdispatch(getTwilioConnections(options));\r\n\t},\r\n\tgetTwilioConnectionById(options) {\r\n\t\tdispatch(getTwilioConnectionById(options));\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(reset());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(mapsStateToProps, mapsDispatchToProps)(SettingsPage);\r\n","import * as ActionTypes from '../../constants/ActionTypes';\r\nimport API from '../../helpers/api';\r\n\r\nexport function addFacebokConnection({ accessToken, userID, name }) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.ADD_FACEBOOK_CONNECTION_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmitFacebookConnection: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst body = {\r\n\t\t\tfacebook_connection: {\r\n\t\t\t\taccess_token: accessToken,\r\n\t\t\t\tfacebook_user_name: name,\r\n\t\t\t\tfacebook_user_id: userID\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst response = await API.admin.connections.facebook.createFacebookConnection(body);\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.ADD_FACEBOOK_CONNECTION_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSubmitFacebookConnection: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.ADD_FACEBOOK_CONNECTION_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmitFacebookConnection: false,\r\n\t\t\t\tmeta: response.meta\r\n\t\t\t}\r\n\t\t});\r\n\t\t// dispatch(getFacebookConnections());\r\n\t};\r\n}\r\n\r\nexport function getFacebookConnections(){\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_FACEBOK_CONNECTIONS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingFacebookConnections: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst response = await API.admin.connections.facebook.getFacebookConnections();\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_FACEBOK_CONNECTIONS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingFacebookConnections: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { facebook_connections } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_FACEBOK_CONNECTIONS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingFacebookConnections: false,\r\n\t\t\t\tfacebook_connections\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function updatePageSubcribedFieldById({ facebook_page_id: id, facebook_connection_id, status, type}){\r\n\treturn async (dispatch, getState) => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_PAGE_SUBCRIBED_FIELD_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubcribedFieldUpdate: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst body = {\r\n\t\t\tfacebook_page: {\r\n\t\t\t\tfacebook_connection_id,\r\n\t\t\t\tstatus,\r\n\t\t\t\ttype\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst response = await API.admin.connections.facebook.updatePageSubcribedFieldById({ id, body });\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_PAGE_SUBCRIBED_FIELD_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSubcribedFieldUpdate: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { facebook_page } = response.data;\r\n\t\tconst { facebook_connections } = getState().settingsPageReducer;\r\n\t\tconst copyFacebookConnections = [...facebook_connections];\r\n\t\tconst getFacebookConnectionIndex = facebook_connections.findIndex(x => x._id === facebook_page.facebook_connection_id);\r\n\t\tif (getFacebookConnectionIndex !== -1) {\r\n\t\t\tconst getFacebookPageIndex = facebook_connections[getFacebookConnectionIndex].facebook_pages.findIndex(x => x._id === facebook_page._id);\r\n\t\t\tif (getFacebookPageIndex !== -1) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: ActionTypes.UPDATE_PAGE_SUBCRIBED_FIELD_SUCCESS,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tfacebook_connections: []\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcopyFacebookConnections[getFacebookConnectionIndex].facebook_pages[getFacebookPageIndex].subscribed_fields = {...facebook_page.subscribed_fields};\r\n\t\t\t}\r\n\t\t}\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_PAGE_SUBCRIBED_FIELD_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tmeta: response.meta,\r\n\t\t\t\tloadingSubcribedFieldUpdate: false,\r\n\t\t\t\tfacebook_connections: copyFacebookConnections\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}","import * as ActionTypes from '../../constants/ActionTypes';\r\nimport API from '../../helpers/api';\r\n\r\nexport function getTwilioConnections() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_CONNECTIONS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingTwilioConnections: true\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst response = await API.admin.twilioconnections.twilio.getTwilioConnections();\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TWILIO_MESSAGE_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingTwilioConnections: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// success\r\n\t\tconst { twilio_connections } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_CONNECTIONS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingTwilioConnections: false,\r\n\t\t\t\ttwilio_connections\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\nexport function getTwilioConnectionById({ id }) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_CONNECTION_BY_ID_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingTwilioForm: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.twilioconnections.twilio.getTwilioConnectionById(id);\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_TWILIO_CONNECTION_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingTwilioForm: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst { twilio_connection } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_TWILIO_CONNECTION_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingTwilioForm: false,\r\n\t\t\t\tselectedTwilio_connection: twilio_connection\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function submitTwilioConnection(fields) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { twilio_connections } = getState().settingsPageReducer;\r\n\t\tconst { selectedTwilio_connection } = fields; // if true this is update\r\n\r\n\t\tconsole.log(selectedTwilio_connection);\r\n\r\n\t\tif (selectedTwilio_connection) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.UPDATE_TWILIO_CONNECTION_REQUEST,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingTwilioData: true\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ActionTypes.ADD_TWILIO_CONNECTION_REQUEST,\r\n\t\t\t\tpayload: { loadingTwilioData: true }\r\n\t\t\t});\r\n\t\t}\r\n\t\t// For updating\r\n\r\n\t\tconst { name, _id, account_sid, auth_token, enabled } = fields;\r\n\r\n\t\tconst body = {\r\n\t\t\ttwilio_connection: {\r\n\t\t\t\tname: name,\r\n\t\t\t\t_id: _id,\r\n\t\t\t\taccount_sid: account_sid,\r\n\t\t\t\tauth_token: auth_token,\r\n\t\t\t\tenabled: enabled\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet response;\r\n\t\tconst id = _id;\r\n\t\tif (selectedTwilio_connection) {\r\n\t\t\t//For update\r\n\t\t\tresponse = await API.admin.twilioconnections.twilio.updateTwilioConnectionById({ id, body });\r\n\t\t} else {\r\n\t\t\t//For Add\r\n\t\t\tresponse = await API.admin.twilioconnections.twilio.createTwilioConnection(body);\r\n\t\t}\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\tif (selectedTwilio_connection) {\r\n\t\t\t\t//dispatch for update Error\r\n\r\n\t\t\t\treturn dispatch({\r\n\t\t\t\t\ttype: ActionTypes.UPDATE_TWILIO_CONNECTION_ERROR,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tloadingTwilioData: false,\r\n\t\t\t\t\t\tmetta: response.meta\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// dispatch for add Error\r\n\t\t\t\treturn dispatch({\r\n\t\t\t\t\ttype: ActionTypes.ADD_TWILIO_CONNECTION_ERROR,\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tloadingTwilioData: false,\r\n\t\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst { twilio_connection } = response.data;\r\n\r\n\t\tlet payload = {\r\n\t\t\tloadingTwilioData: false,\r\n\t\t\tmeta: response.meta\r\n\t\t};\r\n\r\n\t\tif (selectedTwilio_connection) {\r\n\t\t\tconst updatedtwilio_connection = [...twilio_connections];\r\n\r\n\t\t\tconst findIndexToupdate = updatedtwilio_connection.findIndex(x => x.id === twilio_connection._id);\r\n\r\n\t\t\tupdatedtwilio_connection[findIndexToupdate] = { ...twilio_connection };\r\n\t\t\tpayload.twilio_connections = updatedtwilio_connection;\r\n\t\t} else {\r\n\t\t\t//For add success dispatch\r\n\t\t\tpayload.twilio_connections = [...twilio_connections, twilio_connection];\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.UPDATE_TWILIO_CONNECTION_SUCCESS,\r\n\t\t\tpayload\r\n\t\t});\r\n\t};\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button, Form, Caption, Card, FormLayout, TextField, Modal, TextContainer, Icon } from '@shopify/polaris';\r\nimport { compose } from 'redux';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { withAlert } from 'react-alert';\r\nimport { renderFormInput, validateRequired, validateEmail } from '../../../helpers/redux_form';\r\nimport Loading from '../../../components/loading';\r\n\r\nclass StaffForm extends Component {\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { loadingStaffModal: prevLoading } = prevProps;\r\n\t\tconst { loadingStaffModal, staffFormType } = this.props;\r\n\r\n\t\tif (prevLoading && prevLoading !== loadingStaffModal && staffFormType === 'updating') {\r\n\t\t\tthis.props.initialize({ ...this.props.data });\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { data: selectedStaff, pristine, submitting, invalid, loadingStaffModal, loadingSubmit, isOpen, submitStaff, modalHandle, staffFormType } = this.props;\r\n\t\treturn (\r\n\t\t\t<Card>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\topen={isOpen}\r\n\t\t\t\t\tonClose={e => modalHandle(false)}\r\n\t\t\t\t\ttitle={staffFormType === 'adding' ? 'Add Staff' : 'Update Staff'}\r\n\t\t\t\t\tprimaryAction={{\r\n\t\t\t\t\t\tcontent: 'Save',\r\n\t\t\t\t\t\tdisabled: pristine || submitting || invalid || loadingSubmit,\r\n\t\t\t\t\t\tonAction: this.props.handleSubmit(data => submitStaff({ ...data, selectedStaff }))\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t// secondaryActions={[{\r\n\t\t\t\t\t// \tcontent: 'Learn more',\r\n\t\t\t\t\t// \tonAction: (e) => modalHandle\r\n\t\t\t\t\t// }]}\r\n\t\t\t\t\tsize=\"Full\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Modal.Section>\r\n\t\t\t\t\t\t{loadingStaffModal ? (\r\n\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={this.props.handleSubmit(data => submitStaff({ ...data, selectedStaff }))}>\r\n\t\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Full Name\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Email Address\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\tvalidate={[validateRequired, validateEmail]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tname=\"old_password\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\tvalidate={staffFormType === 'adding' && [validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Confirm Password\"\r\n\t\t\t\t\t\t\t\t\t\tvalidate={staffFormType === 'adding' && [validateRequired]}\r\n\t\t\t\t\t\t\t\t\t\tcomponent={renderFormInput}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Modal.Section>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithAlert(),\r\n\treduxForm({\r\n\t\tform: 'StaffForm'\r\n\t})\r\n)(StaffForm);\r\n","import React, { Component, useState } from 'react';\r\nimport { DownOutlined, PlusOutlined, SearchOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { Button, Card, Col, Divider, Dropdown, Form, Input, Menu, message, Row, Space, Table, Tag } from 'antd';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport Loading from '../../components/loading';\r\nimport LabelHelper from '../../helpers/Label';\r\nimport StaffForm from './components/StaffForm';\r\n\r\nclass StaffListPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tstatusValue: 'All',\r\n\t\t\tsearchValue: '',\r\n\t\t\tstaffForm: false,\r\n\t\t\tstaffFormType: null,\r\n\t\t\tdata: []\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getStaffs();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst { meta: prevMeta, loadingSubmitFacebookConnection: prev_loadingSubmitFacebookConnection, loadingTwilioData: prev_loadingTwilioData } = prevProps.settingsPageProps;\r\n\t\tconst { meta, loadingSubmitFacebookConnection, loadingTwilioData } = this.props.settingsPageProps;\r\n\r\n\t\tif (meta && meta !== prevMeta) {\r\n\t\t\tif (meta.code === 200) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tstaffForm: false,\r\n\t\t\t\t\tstaffFormType: null\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\r\n\tmodalHandle = async (value, id = '') => {\r\n\t\tif (id) {\r\n\t\t\t// fetch staff by id.\r\n\t\t\tawait this.props.getStaffById({ id });\r\n\t\t}\r\n\t\tif (!value) {\r\n\t\t\tthis.props.resetSelectedStaff();\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tstaffForm: value,\r\n\t\t\tstaffFormType: id ? 'updating' : 'adding'\r\n\t\t});\r\n\t};\r\n\r\n\r\n\trender() {\r\n\t\tconst { settingsPageProps, submitStaff } = this.props;\r\n\t\tconst {\r\n\t\t\tstaffs,\r\n\t\t\tselectedStaff,\r\n\t\t\tloadingStaffModal,\r\n\t\t\tloadingSubmit\r\n\t\t} = settingsPageProps;\r\n\t\tconst { statusValue, searchValue, staffForm, staffFormType } = this.state;\r\n\t\tconst columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Staff ID',\r\n\t\t\t\tdataIndex: 'staffID',\r\n\t\t\t\tkey: 'staffID',\r\n\t\t\t\trender: text => text\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Name',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\tkey: 'name'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Status',\r\n\t\t\t\tkey: 'tags',\r\n\t\t\t\tdataIndex: 'tags',\r\n\t\t\t\trender: (_, { tags }) => (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{tags.map(tag => {\r\n\t\t\t\t\t\t\tlet color = tag === 'online' ? 'green' : 'volcano';\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Tag\r\n\t\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\t\tkey={tag}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{tag.toUpperCase()}\r\n\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Action',\r\n\t\t\t\tkey: 'action',\r\n\t\t\t\trender: (_, record) => (\r\n\t\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\t\tonClick={() => this.props.navigateToDetailsPage(record._id)}\r\n\t\t\t\t\t\t>Edit</Button>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\r\n\t\tconst data = staffs.map((staff, index) => {\r\n\t\t\tstaff.tags = [];\r\n\t\t\tif(!staff.status){\r\n\t\t\t\tstaff.status = 'offline';\r\n\t\t\t}\r\n\t\t\tstaff.tags.push(staff.status);\r\n\t\t\tstaff.staffID = staff._id;\r\n\t\t\tstaff.key = index+1;\r\n\t\t\treturn staff;\r\n\t\t});\r\n\r\n\t\tconst statusList = () => {\r\n\t\t\treturn (statusValue === 'All') ? data : \r\n\t\t\t\tdata.filter((element) => {\r\n\t\t\t\t\treturn (element.tags[0].toLowerCase() === statusValue.toLowerCase());\r\n\t\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst searchResults = () => {\r\n\t\t\treturn statusList().filter((element) => {\r\n\t\t\t\tconst searchItems = element.staffID.toLowerCase() + element.name.toLowerCase();\r\n\t\t\t\tconst searchQuery = searchValue.toLowerCase();\r\n\t\t\t\treturn searchItems.includes(searchQuery);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst items = [\r\n\t\t\t{\r\n\t\t\t\tlabel: 'All',\r\n\t\t\t\tkey: '1'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Online',\r\n\t\t\t\tkey: '2'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Offline',\r\n\t\t\t\tkey: '3'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tconst handleMenuClick = e => {\r\n\t\t\tmessage.info(`${items[e.key-1].label}`);\r\n\t\t\tthis.setState({statusValue: items[e.key-1].label});\r\n\t\t};\r\n\r\n\t\tconst menu = <Menu\r\n\t\t\tonClick={handleMenuClick}\r\n\t\t\titems={items}\r\n\t\t             />;\r\n\r\n\t\tconst { Search } = Input;\r\n\t\tconst onSearch = (value) => {\r\n\t\t\tmessage.info(value);\r\n\t\t\tthis.setState({searchValue: value});\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div style={{ width: '95%', margin: 'auto' }}>\r\n\t\t\t\t<Card title=\"Staff List\">\r\n\t\t\t\t\t{staffForm && (\r\n\t\t\t\t\t\t<StaffForm\r\n\t\t\t\t\t\t\tmodalHandle={this.modalHandle}\r\n\t\t\t\t\t\t\tloadingStaffModal={loadingStaffModal}\r\n\t\t\t\t\t\t\tstaffFormType={staffFormType} // adding or updating\r\n\t\t\t\t\t\t\tisOpen={staffForm}\r\n\t\t\t\t\t\t\tdata={selectedStaff}\r\n\t\t\t\t\t\t\tsubmitStaff={submitStaff}\r\n\t\t\t\t\t\t\tloadingSubmit={loadingSubmit}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<Space\r\n\t\t\t\t\t\tdirection=\"vertical\"\r\n\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\tstyle={{ display: 'flex' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Row justify=\"end\">\r\n\t\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t\t<Dropdown overlay={menu}>\r\n\t\t\t\t\t\t\t\t\t<Button>\r\n\t\t\t\t\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t\t\t\t\t{statusValue}\r\n\t\t\t\t\t\t\t\t\t\t\t<DownOutlined />\r\n\t\t\t\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Dropdown>\r\n\r\n\t\t\t\t\t\t\t\t<Search\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search by Staff ID, Name\"\r\n\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\tonSearch={onSearch}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 200 }}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t\ticon={<PlusOutlined />}\r\n\t\t\t\t\t\t\t\t\tstyle={{backgroundColor: '#09509d', borderColor: '#09509d'}}\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.navigateToAddPage()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tNew Staff\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\tdataSource={searchResults()}\r\n\t\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(withAlert())(StaffListPage);\r\n","import { connect } from 'react-redux';\r\nimport StaffListPage from './StaffListPage';\r\nimport { deleteStaff, submitStaff, getStaffById, getAccount, resetSelectedStaff, reset, resetMeta } from '../../actions/SettingsPage/SettingsPage';\r\nimport { getStaffs, navigateToAddPage, navigateToDetailsPage } from '../../actions/StaffListPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tsettingsPageProps: state.settingsPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tgetAccount() {\r\n\t\tdispatch(getAccount());\r\n\t},\r\n\r\n\tgetStaffById(options) {\r\n\t\tdispatch(getStaffById(options));\r\n\t},\r\n\t\r\n\tsubmitStaff(options) {\r\n\t\tdispatch(submitStaff(options));\r\n\t},\r\n\r\n\tdeleteStaff(options) {\r\n\t\tdispatch(deleteStaff(options));\r\n\t},\r\n\r\n\tresetSelectedStaff() {\r\n\t\tdispatch(resetSelectedStaff());\r\n\t},\r\n\tgetStaffs() {\r\n\t\tdispatch(getStaffs());\r\n\t},\r\n\tnavigateToDetailsPage(id) {\r\n\t\tdispatch(navigateToDetailsPage(id))\r\n\t},\r\n\tnavigateToAddPage() {\r\n\t\tdispatch(navigateToAddPage());\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(reset());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(mapsStateToProps, mapsDispatchToProps)(StaffListPage);\r\n","import { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes';\r\nimport API from '../helpers/api';\r\n\r\nexport function getStaffs() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFFS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffs: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.users.getStaffs();\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_STAFFS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingStaffs: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst { staffs } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFFS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffs: false,\r\n\t\t\t\tstaffs\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function navigateToDetailsPage(id) {\r\n\treturn async dispatch => {\r\n\t\tdispatch(push(`/staffs/id/basic?id=${id}`));\r\n\t};\r\n}\r\n\r\nexport function navigateToAddPage() {\r\n\treturn async dispatch => {\r\n\t\tdispatch(push('/staffs/create'));\r\n\t};\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Card, DatePicker, Space } from 'antd';\r\nimport { Column } from '@ant-design/plots';\r\nimport moment from 'moment';\r\nimport tickets from '../../../helpers/api/admin/tickets';\r\n\r\nclass TicketStatistics extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t\r\n\trender(){\r\n\t\tconst data = [\r\n\t\t\t{\r\n\t\t\t\tmonth: 'January',\r\n\t\t\t\ttickets: 38\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'February',\r\n\t\t\t\ttickets: 52\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'March',\r\n\t\t\t\ttickets: 61\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'April',\r\n\t\t\t\ttickets: 145\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'May',\r\n\t\t\t\ttickets: 89\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'June',\r\n\t\t\t\ttickets: 232\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'July',\r\n\t\t\t\ttickets: 49\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'August',\r\n\t\t\t\ttickets: 121\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'September',\r\n\t\t\t\ttickets: 72\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'October',\r\n\t\t\t\ttickets: 178\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'November',\r\n\t\t\t\ttickets: 89\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmonth: 'December',\r\n\t\t\t\ttickets: 98\r\n\t\t\t}\r\n\t\t];\r\n\t\tconst config = {\r\n\t\t\tdata,\r\n\t\t\txField: 'month',\r\n\t\t\tyField: 'tickets',\r\n\t\t\tlabel: {\r\n\t\t\t\t// 可手动配置 label 数据标签位置\r\n\t\t\t\tposition: 'middle',\r\n\t\t\t\t// 'top', 'bottom', 'middle',\r\n\t\t\t\t// 配置样式\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbackground: 'red',\r\n\t\t\t\t\tfill: '#FFFFFF',\r\n\t\t\t\t\topacity: 1\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\txAxis: {\r\n\t\t\t\tlabel: {\r\n\t\t\t\t\tautoHide: true,\r\n\t\t\t\t\tautoRotate: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmeta: {\r\n\t\t\t\ttype: {\r\n\t\t\t\t\talias: 'month'\r\n\t\t\t\t},\r\n\t\t\t\tsales: {\r\n\t\t\t\t\talias: 'tickets'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst Title = () => {\r\n\t\t\treturn(<Space style={{display: 'flex', justifyContent: 'space-between'}}>\r\n\t\t\t\tTickets\r\n\t\t\t\t<DatePicker\r\n\t\t\t\t\tdefaultValue={moment('2022')}\r\n\t\t\t\t\tpicker=\"year\"\r\n\t\t\t\t\tallowClear={false}\r\n\t\t\t\t/>\r\n\t\t\t</Space>);};\r\n\r\n\t\treturn(\r\n\t\t\t<Card\r\n\t\t\t\tstyle={{width: '70%', marginRight: 16}}\r\n\t\t\t\ttitle={<Title/>}\r\n\t\t\t>\r\n\t\t\t\t<Column {...config} />\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(withAlert())(TicketStatistics);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Avatar, Card, Space } from 'antd';\r\nclass Staff extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\trender(){\r\n  \r\n\t\tconst {name, _id, status, img} = this.props.staff;\r\n\t\treturn(\r\n\t\t\t<div style={styles.parentContainer}>\r\n\t\t\t\t<div style={styles.childContainer}>\r\n\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\tsrc={img}\r\n\t\t\t\t\t\t\tsize={64}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h1 style={{margin: 0}}>{name}</h1>\r\n\t\t\t\t\t\t\t<h2>Staff ID: {_id}</h2>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tparentContainer: {\r\n\t\tmarginBottom: '1em', \r\n\t\twidth: '100%', \r\n\t\tdisplay: 'flex', \r\n\t\talignItems: 'center', \r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\tchildContainer: {\r\n\t\tdisplay: 'flex', \r\n\t\talignItems: 'center'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(Staff);\r\n","import React, { Component } from 'react';\r\nimport _, { random } from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Card } from 'antd';\r\nimport Staff from './Staff';\r\nimport request from '../../../helpers/api/request';\r\nclass StaffList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t\r\n\trender(){\r\n\r\n\t\t//Temporary Profile Image Randomizer\r\n\t\tconst getImage = () => {\r\n\t\t\tconst randomizer = Math.floor(Math.random() * 200);\r\n\t\t\treturn `https://waifu.vercel.app/sfw/waifu?random=${randomizer}`;\r\n\t\t};\r\n\t\t\r\n\t\tconst { staffs } = this.props;\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<Card\r\n\t\t\t\ttitle=\"Staff List\"\r\n\t\t\t\tstyle={{width: '30%'}}\r\n\t\t\t>\r\n\t\t\t\t<div style={styles.parentDiv}>\r\n\t\t\t\t\t<div style={styles.childDiv}>\r\n\t\t\t\t\t\t{staffs.map(staff => {\r\n\t\t\t\t\t\t\tstaff.img = getImage();\r\n\t\t\t\t\t\t\treturn <Staff\r\n\t\t\t\t\t\t\t\tkey={staff._id}\r\n\t\t\t\t\t\t\t\tstaff={staff}\r\n\t\t\t\t\t\t\t       />;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\t\r\n\tparentDiv: {\r\n\t\twidth: '100%', \r\n\t\theight: '27em', \r\n\t\toverflow: 'hidden', \r\n\t\tposition: 'relative'\r\n\t},\r\n\r\n\tchildDiv: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0, \r\n\t\tbottom: 0, \r\n\t\tleft: 0, \r\n\t\tright: '-17px', \r\n\t\toverflowY: 'scroll'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(StaffList);\r\n","import React, { Component } from 'react';\r\nimport _, { filter } from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Button, Card, Col, DatePicker, Divider, Dropdown, Form, Input, Menu, message, Row, Select, Space, Table, Tag } from 'antd';\r\nimport { DownOutlined, PlusOutlined, SearchOutlined, UserOutlined } from '@ant-design/icons';\r\nimport tickets from '../../../helpers/api/admin/tickets';\r\nconst { Option } = Select;\r\nclass TicketList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfilters: {\r\n\t\t\t\tstatus: '',\r\n\t\t\t\tpriority: '',\r\n\t\t\t\tchannel: '',\r\n\t\t\t\tdate: ''\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\trender(){\r\n\t\tconst { tickets: data } = this.props;\r\n\t\tconst { filters } = this.state;\r\n\r\n\t\tconst columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Ticket ID',\r\n\t\t\t\tdataIndex: 'key',\r\n\t\t\t\tkey: 'key',\r\n\t\t\t\trender: (text) => <a>{text}</a>\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Customer',\r\n\t\t\t\tdataIndex: 'customer',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Channel',\r\n\t\t\t\tdataIndex: 'channel',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Date',\r\n\t\t\t\tdataIndex: 'date',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Priority',\r\n\t\t\t\tdataIndex: 'priority',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Staff',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Status',\r\n\t\t\t\tdataIndex: 'status',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\t\r\n\t\t//Search Result Filters\r\n\t\tconst searchResult = () => {\r\n\t\t\treturn data.filter((element)=> {\r\n\t\t\t\t//If filter state is empty return true.\r\n\t\t\t\tconst statusFilter = (\"\" === filters.status) ? true : element.status === filters.status;\r\n\t\t\t\tconst priorityFilter = (\"\" === filters.priority) ? true : element.priority === filters.priority;\r\n\t\t\t\tconst channelFilter = (\"\" === filters.channel) ? true : element.channel === filters.channel;\r\n\t\t\t\tconst dateFilter = ('' === filters.date) ? true : element.date === filters.date;\r\n\t\t\t\t//return data that satisfies filtering\r\n\t\t\t\treturn (statusFilter && priorityFilter && channelFilter && dateFilter);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst modalHandle = (type, e) => {\r\n\t\t\t//Check if 'e' has value and return the value else return empty string.\r\n\t\t\tconst value = (e) ? e: ''; \r\n\t\t\t\r\n\t\t\tconst newFilter = filters;\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 'status':\r\n\t\t\t\t\tnewFilter.status = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'priority':\r\n\t\t\t\t\tnewFilter.priority = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'channel':\r\n\t\t\t\t\tnewFilter.channel = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'date':\r\n\t\t\t\t\tnewFilter.date = e.dateString;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t}\r\n\t\t\tthis.setState({filters: newFilter});\t\r\n\t\t};\r\n\r\n\t\treturn(\r\n\t\t\t<Card\r\n\t\t\t\ttitle=\"List\"\r\n\t\t\t>\r\n\t\t\t\t<Space\r\n\t\t\t\t\tdirection=\"vertical\"\r\n\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\tstyle={{ display: 'flex' }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Row justify=\"end\">\r\n\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tstyle={styles.searchBox}\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search by Status\"\r\n\t\t\t\t\t\t\t\tonChange={(value) => modalHandle('status', value)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Option value=\"Pending\">Pending</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"In Progress\">In Progress</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"Resolved\">Resolved</Option>\r\n\t\t\t\t\t\t\t</Select>\r\n\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tstyle={styles.searchBox}\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search by Priority\"\r\n\t\t\t\t\t\t\t\tonChange={(value) => modalHandle('priority', value)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Option value=\"Low\">Low</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"Medium\">Medium</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"High\">High</Option>\r\n\t\t\t\t\t\t\t</Select>\r\n\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tstyle={styles.searchBox}\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search by Channel\"\r\n\t\t\t\t\t\t\t\tonChange={(value) => modalHandle('channel', value)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Option value=\"Messenger\">Messenger</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"Instagram\">Instagram</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"Email\">Email</Option>\r\n\t\t\t\t\t\t\t\t<Option value=\"WhatsApp\">WhatsApp</Option>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search by Date\"\r\n\t\t\t\t\t\t\t\tformat={\"MM-DD-YYYY\"}\r\n\t\t\t\t\t\t\t\tonChange={(date, dateString) => {const e = {date, dateString}; modalHandle(\"date\", e);}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tdataSource={searchResult()}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Space>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tsearchBox: {\r\n\t\twidth: '12em'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(TicketList);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Avatar, Button, Card, Image, Row, Space, Typography } from 'antd';\r\nimport Icon from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport GeneralHelper from '../../../helpers/general';\r\nconst { Text, Title, Paragraph } = Typography;\r\nclass Staff extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\trender(){\r\n\r\n\t\treturn(\r\n\t\t\t<Row\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: '82vh'\r\n\t\t\t\t}}\r\n\t\t\t\tjustify=\"center\"\r\n\t\t\t\talign=\"middle\"\r\n\t\t\t>\r\n\t\t\t\t<Card style={styles.mainHeader}>\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<Space\r\n\t\t\t\t\t\t\tdirection=\"vertical\"\r\n\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\tsrc={`${GeneralHelper.getImageBasePath()}/images/caution.svg`}\r\n\t\t\t\t\t\t\t\tpreview={false}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Title level={2}>Account Pending</Title>  \r\n\t\t\t\t\t\t\t<Paragraph style={{fontSize: 18}}>\r\n            Your account is pending for approval. We will send out an email notification once your\r\n            account is ready. For the mean time, please setup your Staff accounts in the <span style={{fontWeight: 'bold'}}>Settings</span> page.\r\n\t\t\t\t\t\t\t</Paragraph>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\tstyle={{background: '#f9e45b', borderColor: '#f9e45b', boxShadow: \"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)\"}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/settings\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: '10em'}}\r\n\t\t\t\t\t\t\t\t><strong style={{color: 'black'}}>Go to Settings</strong></Link></Button>\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Card>\r\n\t\t\t</Row>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tmainHeader: {\r\n\t\tpaddingLeft: '35em',\r\n\t\tpaddingRight: '35em',\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\theight: '60em',\r\n\t\twidth: '100%'\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(Staff);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport Loading from '../../components/loading';\r\nimport { Card } from 'antd';\r\nimport TicketStatistics from './components/TicketStatistics';\r\nimport StaffList from './components/StaffList';\r\nimport TicketList from './components/TicketList';\r\nimport AccountPending from './components/AccountPending';\r\n\r\nclass DashboardPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpending: false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.props.getAccount();\r\n\t}\r\n\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst { staffListProps } = this.props;\r\n\t\tconst { pending } = this.state;\r\n\t\tconst { staffs } = staffListProps;\r\n\r\n\t\t//temporary Ticket Data\r\n\t\tconst tickets = [\r\n\t\t\t{\r\n\t\t\t\tkey: '001',\r\n\t\t\t\tcustomer: 'Jim Halpert',\r\n\t\t\t\tchannel: 'Messenger',\r\n\t\t\t\tdate: '06-10-2022',\r\n\t\t\t\tpriority: 'Medium',\r\n\t\t\t\tname: 'Jane Doe',\r\n\t\t\t\tstatus: 'Pending'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '002',\r\n\t\t\t\tcustomer: 'John Doe',\r\n\t\t\t\tchannel: 'Instagram',\r\n\t\t\t\tdate: '06-09-2022',\r\n\t\t\t\tpriority: 'Medium',\r\n\t\t\t\tname: 'Jet Lee',\r\n\t\t\t\tstatus: 'In Progress'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '003',\r\n\t\t\t\tcustomer: 'Maria Georgies',\r\n\t\t\t\tchannel: 'Email',\r\n\t\t\t\tdate: '06-08-2022',\r\n\t\t\t\tpriority: 'High',\r\n\t\t\t\tname: 'Michael Scott',\r\n\t\t\t\tstatus: 'Resolved'\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t{ (pending) ? <AccountPending /> \r\n\t\t\t\t\t: <div style={styles.mainContainer}>\r\n\t\t\t\t\t\t<div style={styles.container}>\r\n\t\t\t\t\t\t\t<TicketStatistics tickets={tickets} />\r\n\t\t\t\t\t\t\t<StaffList staffs={staffs}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<TicketList tickets={tickets} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = {\r\n\tcontainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: \"space-between\",\r\n\t\tmarginBottom: 16\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(DashboardPage);\r\n","import * as ActionTypes from '../../constants/ActionTypes';\r\nimport API from '../../helpers/api';\r\n\r\nexport function getStaffs() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFFS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffs: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.users.getStaffs();\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_STAFFS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingStaffs: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { staffs } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFFS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingStaffs: false,\r\n\t\t\t\tstaffs: staffs\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function getAccount() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_SETTINGS_ACCOUNT_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingAccount: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.accounts.getAccount();\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_SETTINGS_ACCOUNT_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tmeta: response.meta,\r\n\t\t\t\t\tloadingAccount: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// success\r\n\t\tconst { user } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_SETTINGS_ACCOUNT_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingAccount: false,\r\n\t\t\t\taccount: user\r\n\t\t\t}\r\n\t\t});\r\n\t\t// get staffs\r\n\t\tdispatch(getStaffs());\r\n\t};\r\n}\r\n\r\nexport function reset() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_ACCOUNT_PAGE\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.RESET_ACCOUNT_PAGE_META\r\n\t\t});\r\n\t};\r\n}\r\n","import { connect } from 'react-redux';\r\nimport DashboardPage from './DashboardPage';\r\nimport { getAccount, reset, resetMeta } from '../../actions/DashboardPage/StaffList';\r\n\r\n\r\n// const mapsStateToProps = state => ({\r\n// \tsettingsPageProps: state.settingsPageReducer\r\n// });\r\n\r\nconst mapsStateToProps = state => ({\r\n\tstaffListProps: state.staffListReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tgetAccount(){\r\n\t\tdispatch(getAccount());\r\n\t},\r\n\r\n\tresetPage() {\r\n\t\tdispatch(reset());\r\n\t},\r\n\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(mapsStateToProps, mapsDispatchToProps)(DashboardPage);","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { Button, Card, Col, DatePicker, Dropdown, Form, Input, Menu, message, Row, Select, Space, Table, Tag } from 'antd';\r\nimport { DownloadOutlined, PlusOutlined, SearchOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\nclass ReportPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpages: [],\r\n\t\t\tfilters: {\r\n\t\t\t\tstatus: '',\r\n\t\t\t\tsearch: '',\r\n\t\t\t\tdate: ''\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getReports();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst { filters } = this.state;\r\n\t\tconst { reportPageProps } = this.props;\r\n\t\tconst { reports } = reportPageProps;\r\n\t\t// const { tickets: data } = this.props;\r\n\r\n\t\tconst columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Ticket ID',\r\n\t\t\t\tdataIndex: '_id',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Assignee',\r\n\t\t\t\tdataIndex: 'assignee',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Date',\r\n\t\t\t\tdataIndex: 'date',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Status',\r\n\t\t\t\tdataIndex: 'status',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Action',\r\n\t\t\t\tdataIndex: 'action',\r\n\t\t\t\tkey: 'key',\r\n\t\t\t\trender: (text, data) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\t\ticon={<DownloadOutlined />}\r\n\t\t\t\t\t\t\tghost\r\n\t\t\t\t\t\t\tonClick={() => handleDownload(obj2CSV(data), `report-${data._id}`)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t);}\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tconst modalHandle = (type, e) => {\r\n\t\t\t//Check if 'e' has value and return the value else return empty string.\r\n\t\t\tconst value = (e) ? e: ''; \r\n\t\t\tconst newFilter = filters;\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 'status':\r\n\t\t\t\t\tnewFilter.status = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'search':\r\n\t\t\t\t\tnewFilter.search = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'date':\r\n\t\t\t\t\tnewFilter.date = e.dateString;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t}\r\n\t\t\tthis.setState({filters: newFilter});\t\r\n\t\t};\r\n\r\n\t\tconst searchResults = () => {\r\n\t\t\treturn reports.filter((element)=> {\r\n\t\t\t\t//If filter state is empty return true.\r\n\t\t\t\tconst statusFilter = (\"\" === filters.status) ? true : element.status === filters.status;\r\n\t\t\t\tconst nameSearchFilter = ('' === filters.search) ? true : (element._id + element.assignee).toLowerCase().includes(filters.search.toLowerCase());\r\n\t\t\t\tconst dateFilter = ('' === filters.date) ? true : element.date === filters.date;\r\n\t\t\t\t\r\n\t\t\t\t//return data that satisfies filtering \r\n\t\t\t\treturn (statusFilter && nameSearchFilter && dateFilter);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst obj2CSV = (data) => {\r\n\t\t\tconst csvRows = [];\r\n\t\t\tconst headers = Object.keys(data);\r\n\t\t\tcsvRows.push(headers.join(','));\r\n\t\t\tconst values = Object.values(data).join(',');\r\n\t\t\tcsvRows.push(values);\r\n\t\t\treturn csvRows.join('\\n');\r\n\t\t};\r\n\r\n\t\tconst arr2CSV = (data) => {\r\n\t\t\tconst csvRows = [];\r\n\t\t\tconst headers = Object.keys(data[0]);\r\n\t\t\tcsvRows.push(headers.join(','));\r\n\t\t\tdata.map(element => {\r\n\t\t\t\tcsvRows.push(Object.values(element).join(','));\r\n\t\t\t});\r\n\t\t\treturn csvRows.join('\\n');\r\n\t\t};\r\n\r\n\t\tconst handleDownload = (data, name) => {\r\n\t\t\tconst blob = new Blob([data], { type: 'text/csv' });\r\n\t\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\t\tconst a = document.createElement('a');\r\n\t\t\ta.setAttribute('href', url);\r\n\t\t\ta.setAttribute('download', `${name}.csv`);\r\n\t\t\ta.click();\r\n\t\t};\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<div style={{ width: '95%', margin: 'auto' }}>\r\n\t\t\t\t<Card title=\"Reports List\">\r\n\t\t\t\t\t<Space\r\n\t\t\t\t\t\tdirection=\"vertical\"\r\n\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\tstyle={{ display: 'flex' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Row justify=\"end\">\r\n\t\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\tstyle={styles.searchBox}\r\n\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search by Status\"\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => modalHandle('status', value)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Option value=\"Not Started\">Not Started</Option>\r\n\t\t\t\t\t\t\t\t\t<Option value=\"In Progress\">In Progress</Option>\r\n\t\t\t\t\t\t\t\t\t<Option value=\"Resolved\">Resolved</Option>\r\n\t\t\t\t\t\t\t\t</Select>\r\n\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search by Date\"\r\n\t\t\t\t\t\t\t\t\tformat={\"MM-DD-YYYY\"}\r\n\t\t\t\t\t\t\t\t\tonChange={(date, dateString) => {const e = {date, dateString}; modalHandle(\"date\", e);}}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Search\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search by Ticket ID, Assignee\"\r\n\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\tonSearch={(value) => modalHandle('search', value)}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 250 }}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t\ticon={<DownloadOutlined />}\r\n\t\t\t\t\t\t\t\t\tstyle={{backgroundColor: '#09509d', borderColor: '#09509d'}}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\thandleDownload(arr2CSV(reports), \"reports-all\");\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tDownload All\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\tdataSource={searchResults()}\r\n\t\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nconst styles = {\r\n\tsearchBox: {\r\n\t\twidth: '12em'\r\n\t}\r\n};\r\nexport default compose(withAlert())(ReportPage);\r\n","import { connect } from 'react-redux';\r\nimport ReportPage from './ReportPage';\r\nimport { getReports, resetPage, resetMeta } from '../../actions/ReportPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\treportPageProps: state.reportPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tgetReports(){\r\n\t\tdispatch(getReports());\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(resetPage());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(mapsStateToProps, mapsDispatchToProps)(ReportPage);\r\n","import { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes'; \r\nimport API from '../helpers/api';\r\nexport function getReports() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_REPORTS_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingReports: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// const response = await API.admin.users.getReports();\r\n\r\n\t\tconst response = {\r\n\t\t\tdata: {\r\n\t\t\t\treports: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '001', \r\n\t\t\t\t\t\tassignee: 'Jane Doe',\r\n\t\t\t\t\t\tdate: '08-21-2022',\r\n\t\t\t\t\t\tstatus: 'Resolved'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '002', \r\n\t\t\t\t\t\tassignee: 'John Doe',\r\n\t\t\t\t\t\tdate: '08-20-2022',\r\n\t\t\t\t\t\tstatus: 'In Progress'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '003', \r\n\t\t\t\t\t\tassignee: 'Astelle Von',\r\n\t\t\t\t\t\tdate: '08-21-2022',\r\n\t\t\t\t\t\tstatus: 'Not Started'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '004', \r\n\t\t\t\t\t\tassignee: 'Michael Ross',\r\n\t\t\t\t\t\tdate: '08-20-2022',\r\n\t\t\t\t\t\tstatus: 'In Progress'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tmeta: {\r\n\t\t\t\tcode: 200\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_REPORTS_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingReports: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst { reports } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_REPORTS_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingReports: false,\r\n\t\t\t\treports\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function resetPage() {\r\n\treturn async dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: ActionTypes.RESET_REPORTS_PAGE\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: ActionTypes.RESET_ACCOUNT_PAGE_META\r\n\t\t});\r\n\t};\r\n};","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { Button, Card, Col, Divider, Dropdown, Form, Input, Menu, message, Row, Select, Space, Table, Tag } from 'antd';\r\nimport { DownOutlined, PlusOutlined, SearchOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\nclass MessengerIntegrationPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpages: [],\r\n\t\t\tfilters: {\r\n\t\t\t\tchannel: '',\r\n\t\t\t\tsearch: ''\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getPages();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst { filters } = this.state;\r\n\t\tconst { messengerIntegrationPage } = this.props;\r\n\t\tconst { pages } = messengerIntegrationPage;\r\n\t\t// const { tickets: data } = this.props;\r\n\r\n\t\tconst columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Page ID',\r\n\t\t\t\tdataIndex: '_id',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Page Name',\r\n\t\t\t\tdataIndex: 'pageName',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Channel',\r\n\t\t\t\tdataIndex: 'channel',\r\n\t\t\t\tkey: 'key'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Action',\r\n\t\t\t\tdataIndex: 'action',\r\n\t\t\t\tkey: 'key',\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn (text === 'Disconnect') ? <span style={{color: '#e33434'}}>{text}</span> : <span style={{color: '#26d367'}}>{text}</span>;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tconst modalHandle = (type, e) => {\r\n\t\t\t//Check if 'e' has value and return the value else return empty string.\r\n\t\t\tconst value = (e) ? e: ''; \r\n\t\t\tconst newFilter = filters;\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 'channel':\r\n\t\t\t\t\tnewFilter.channel = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'search':\r\n\t\t\t\t\tnewFilter.search = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t}\r\n\t\t\tthis.setState({filters: newFilter});\t\r\n\t\t};\r\n\r\n\t\tconst searchResults = () => {\r\n\t\t\treturn pages.filter((element)=> {\r\n\t\t\t\t//If filter state is empty return true.\r\n\t\t\t\tconst channelFilter = (\"\" === filters.channel) ? true : element.channel === filters.channel;\r\n\t\t\t\tconst pageNameSearchFilter = ('' === filters.search) ? true : (element._id + element.pageName + element.channel).toLowerCase().includes(filters.search.toLowerCase());\r\n\r\n\t\t\t\t//return data that satisfies filtering \r\n\t\t\t\treturn (channelFilter && pageNameSearchFilter);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn(\r\n\t\t\t<div style={{ width: '95%', margin: 'auto' }}>\r\n\t\t\t\t<Card title=\"Messenger Integration\">\r\n\t\t\t\t\t<Space\r\n\t\t\t\t\t\tdirection=\"vertical\"\r\n\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\tstyle={{ display: 'flex' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Row justify=\"end\">\r\n\t\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\tstyle={styles.searchBox}\r\n\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search by Channel\"\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => modalHandle('channel', value)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Option value=\"Messenger\">Messenger</Option>\r\n\t\t\t\t\t\t\t\t\t<Option value=\"Instagram\">Instagram</Option>\r\n\t\t\t\t\t\t\t\t\t<Option value=\"Email\">Email</Option>\r\n\t\t\t\t\t\t\t\t\t<Option value=\"WhatsApp\">WhatsApp</Option>\r\n\t\t\t\t\t\t\t\t</Select>\r\n\r\n\t\t\t\t\t\t\t\t<Search\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search by Page ID, Page Name\"\r\n\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\tonSearch={(value) => modalHandle('search', value)}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 200 }}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t\ticon={<PlusOutlined />}\r\n\t\t\t\t\t\t\t\t\tstyle={{backgroundColor: '#09509d', borderColor: '#09509d'}}\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.navigateToAddPage()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tNew Page\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\tdataSource={searchResults()}\r\n\t\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nconst styles = {\r\n\tsearchBox: {\r\n\t\twidth: '12em'\r\n\t}\r\n};\r\nexport default compose(withAlert())(MessengerIntegrationPage);\r\n","import { connect } from 'react-redux';\r\nimport MessengerIntegrationPage from './MessengerIntegrationPage';\r\nimport { getPages, resetPage, resetMeta } from '../../../actions/MessengerIntegrationPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tmessengerIntegrationPage: state.messengerIntegrationPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tgetPages(){\r\n\t\tdispatch(getPages());\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(resetPage());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(mapsStateToProps, mapsDispatchToProps)(MessengerIntegrationPage);\r\n","import { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes'; \r\nimport API from '../helpers/api';\r\n\r\nexport function getPages() {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_PAGES_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingPages: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// const response = await API.admin.users.getPages();\r\n\r\n\t\tconst response = {\r\n\t\t\tdata: {\r\n\t\t\t\tpages: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '001', \r\n\t\t\t\t\t\tpageName: 'Page A',\r\n\t\t\t\t\t\tchannel: 'Instagram',\r\n\t\t\t\t\t\taction: 'Connect'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '002', \r\n\t\t\t\t\t\tpageName: 'Page B',\r\n\t\t\t\t\t\tchannel: 'Messenger',\r\n\t\t\t\t\t\taction: 'Connect'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '003', \r\n\t\t\t\t\t\tpageName: 'Page C',\r\n\t\t\t\t\t\tchannel: 'WhatsApp',\r\n\t\t\t\t\t\taction: 'Connect'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_id: '004', \r\n\t\t\t\t\t\tpageName: 'Page D',\r\n\t\t\t\t\t\tchannel: 'Email',\r\n\t\t\t\t\t\taction: 'Disconnect'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tmeta: {\r\n\t\t\t\tcode: 200\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_PAGES_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingPages: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst { pages } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_PAGES_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingPages: false,\r\n\t\t\t\tpages\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t};\r\n}\r\n\r\nexport function resetPage() {\r\n\treturn async dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: ActionTypes.RESET_MESSENGER_INTEGRATION_PAGE\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: ActionTypes.RESET_MESSENGER_INTEGRATION_PAGE_META\r\n\t\t});\r\n\t};\r\n};\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Card } from 'antd';\r\n\r\nclass MessengerSettingsPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tvalue: 'Hello world'\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div style={{display: 'flex', textAlign: 'center', justifyContent: 'center', alignItems: 'center', height: '100%'}}>\r\n\t\t\t\t<Card\r\n\t\t\t\t\ttitle=\"Messenger Settings Page\"\r\n\t\t\t\t\tstyle={{width: '36em'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<h2>{'Work in Progress'}</h2>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(withAlert())(MessengerSettingsPage);\r\n","import { connect } from 'react-redux';\r\nimport MessengerSettingsPage from './MessengerSettingsPage';\r\n// import {  } from '../../actions/ReportsPage/';\r\n\r\nconst mapsStateToProps = state => ({\r\n\t// reportsPageProps: state.reportsPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\r\n});\r\n\r\nexport default connect(mapsStateToProps, mapsDispatchToProps)(MessengerSettingsPage);\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\nimport { Card } from 'antd';\r\n\r\nclass SubscriptionPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tvalue: 'Hello world'\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t\r\n\trender(){\r\n\t\t\r\n\r\n\t\treturn(\r\n\t\t\t<div style={{display: 'flex', textAlign: 'center', justifyContent: 'center', alignItems: 'center', height: '100%'}}>\r\n\t\t\t\t<Card\r\n\t\t\t\t\ttitle=\"Subscription Page\"\r\n\t\t\t\t\tstyle={{width: '36em'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<h2>{'Work in Progress'}</h2>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(withAlert())(SubscriptionPage);\r\n","import { connect } from 'react-redux';\r\nimport SubscriptionPage from './SubscriptionPage';\r\n// import {  } from '../../actions/ReportsPage/';\r\n\r\nconst mapsStateToProps = state => ({\r\n\t// reportsPageProps: state.reportsPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\r\n});\r\n\r\nexport default connect(mapsStateToProps, mapsDispatchToProps)(SubscriptionPage);\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Menu } from 'antd';\r\nimport _ from 'lodash';\r\nexport default function DetailMenu({ tabs, history }) {\r\n\tconst [current, setCurrent] = useState('');\r\n\tconst { location } = history;\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrent(activeItem);\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tconst getActiveItem = ({ pathname }) => {\r\n\t\tlet path_result;\r\n\t\t// loop and get the current active tab path based on the pathname(current)\r\n\t\ttabs.map(tab => {\r\n\t\t\tif ((pathname).split('?')[0].includes(tab.path.split('?')[0])) {\r\n\t\t\t\tpath_result = tab.path;\r\n\t\t\t}\r\n\t\t\treturn tab;\r\n\t\t});\r\n\t\tif (!path_result) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn path_result.split('?')[0];\r\n\t};\r\n\r\n\tconst activeItem = getActiveItem({\r\n\t\tpathname: location.pathname.split('?')[0]\r\n\t}) || tabs[0].path.split('?')[0];\r\n\r\n\tconst handleClick = e => {\r\n\t\tsetCurrent(e.key);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{ overflow: 'auto' }}\r\n\t\t>\r\n\t\t\t<Menu\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t\tselectedKeys={[current]}\r\n\t\t\t\tmode=\"horizontal\"\r\n\t\t\t>\r\n\t\t\t\t{tabs && tabs.map((tab, index) => (\r\n\t\t\t\t\t<Menu.Item\r\n\t\t\t\t\t\tkey={tab.path.split('?')[0]}\r\n\t\t\t\t\t\tstyle={{ marginLeft: 25 }}\r\n\t\t\t\t\t\t// active={activeItem === tab.path.split('?')[0]}\r\n\t\t\t\t\t\tonClick={() => activeItem === tab.path ? undefined : history.push(tab.path)}\r\n\t\t\t\t\t> {tab.title}\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t))}\r\n\t\t\t</Menu>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Form, Row, Col, Input, Button, DatePicker, Select, notification, Modal } from 'antd';\r\nimport { MinusCircleOutlined, PlusSquareFilled, ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport CommonEnum from '../../../../constants/CommonEnum';\r\nimport LabelHelper from '../../../../helpers/Label';\r\nimport GeneralHelper from '../../../../helpers/general';\r\n\r\nconst { Option } = Select;\r\n\r\nconst permissions = [\r\n\t{\r\n\t\tname: 'Permission A',\r\n\t\tvalue: 'permission_a'\r\n\t},\r\n\t{\r\n\t\tname: 'Permission B',\r\n\t\tvalue: 'permission_b'\r\n\t}\r\n];\r\n\r\nclass StaffBasicForm extends Component {\r\n\tformRef = React.createRef();\r\n\r\n\tstate = {\r\n\t\tdisabled: true\r\n\t};\r\n\r\n\tasync submitFormData(values) {\r\n\t\t// You can add more pre-processing of the form data here\r\n\t\tconst { onSubmit } = this.props;\r\n\t\tconst { staff_id, name, email, status } = values;\r\n\t\tconst fields = {\r\n\t\t\tstaff_id,\r\n\t\t\tname,\r\n\t\t\temail,\r\n\t\t\tstatus\r\n\t\t};\r\n\r\n\t\tawait onSubmit(fields);\r\n\t};\r\n\r\n\tcheckFormValues = () => {\r\n\t\tif (\r\n\t\t\tthis.formRef.current.getFieldValue('name') &&\r\n\t\t\tthis.formRef.current.getFieldValue('email') &&\r\n\t\t\tthis.formRef.current.getFieldValue('status')\r\n\t\t) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdisabled: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trenderForm() {\r\n\t\tconst { staff, loadingSubmit } = this.props;\r\n\t\tconst { _id, name, email, enabled } = staff || {};\r\n\t\treturn(\r\n\t\t\t<>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\tref={this.formRef}\r\n\t\t\t\t\tinitialValues={{\r\n\t\t\t\t\t\tstaff_id: _id,\r\n\t\t\t\t\t\tname,\r\n\t\t\t\t\t\temail,\r\n\t\t\t\t\t\tstatus: enabled ? 'active' : 'inactive'\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tstyle={{ width: 400, marginTop: '2rem' }}\r\n\t\t\t\t\tonFinish={async (values) => { await this.submitFormData(values)}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tname=\"staff_id\"\r\n\t\t\t\t\t\tlabel=\"Staff ID\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\tonChange={this.checkFormValues}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\trules={[{ required: true, message: 'Name is invalid' }]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Input/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tlabel=\"Email Address\"\r\n\t\t\t\t\t\tonChange={this.checkFormValues}\r\n\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t{ required: true, type: 'email', message: 'Please enter a valid email' }\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Input/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tname=\"status\"\r\n\t\t\t\t\t\tlabel=\"Status\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tonChange={this.checkFormValues}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{CommonEnum.status.map(status => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Option\r\n\t\t\t\t\t\t\t\t\t\tvalue={status}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{LabelHelper.staffStatus(status)}\r\n\t\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.List\r\n\t\t\t\t\t\tname=\"selected_locations\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{(fields, { add, remove }) => (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{fields.map(({ key, name, fieldKey, ...restField }, index) => {\r\n\t\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'flex', marginBottom: -20 }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...restField}\r\n\t\t\t\t\t\t\t\t\t\t\t\tname={[name, 'permission']}\r\n\t\t\t\t\t\t\t\t\t\t\t\tfieldKey={[fieldKey, 'key']}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={index === 0 ? 'Permission:' : ''}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: '100%', paddingRight: 10 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\trules={[{ required: true, message: 'Missing value' }]}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(val) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst filtered = [...this.state.current_selected_locations.filter(_id => _id !== this.state.current_selected_locations[name])];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiltered.splice(name, 0, val);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent_selected_locations: [...filtered]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// this.checkFormValues();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst filteredValues = this.formRef.current.getFieldValue('selected_doors') && this.formRef.current.getFieldValue('selected_doors').filter(obj => obj ? obj.location !== val : false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.formRef.current.setFieldsValue({ 'selected_doors': filteredValues });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// this.checkFormValues();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpermissions && permissions.length && permissions.map((permission, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select.Option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={permission.value}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// disabled={this.state.current_selected_locations && this.state.current_selected_locations.includes(location._id) && this.state.current_selected_locations[name] !== location._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{permission.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t<MinusCircleOutlined\r\n\t\t\t\t\t\t\t\t\t\t\t\t// onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// \tremove(name);\r\n\t\t\t\t\t\t\t\t\t\t\t\t// \t// \tthis.checkFormValues();\r\n\t\t\t\t\t\t\t\t\t\t\t\t// \tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t// \t\tcurrent_selected_locations: this.state.current_selected_locations.length ? this.state.current_selected_locations.filter(id => id !== this.state.current_selected_locations[name]) : this.state.current_selected_locations\r\n\t\t\t\t\t\t\t\t\t\t\t\t// \t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t// \tthis.checkFormValues();\r\n\t\t\t\t\t\t\t\t\t\t\t\t// }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={( index === 0 ? { marginTop: 38 } : { marginTop: 8 })}\t\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Form.Item \r\n\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 10 }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tAdd Permission &nbsp;\r\n\t\t\t\t\t\t\t\t\t<PlusSquareFilled \r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tadd();\r\n\t\t\t\t\t\t\t\t\t\t\t// this.checkFormValues();\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: '110%', backgroundColor: '#fff', color: '#0B3266', cursor: 'pointer' }}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form.List>\r\n\t\t\t\t\t<Form.Item style={{ float: 'right' }}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\thtmlType=\"submit\"\r\n\t\t\t\t\t\t\tstyle={{ width: 100, borderRadius: 3 }}\r\n\t\t\t\t\t\t\tloading={loadingSubmit}\r\n\t\t\t\t\t\t\tdisabled={this.state.disabled}\r\n\t\t\t\t\t\t>Save</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{this.renderForm()}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default StaffBasicForm;","import React, { Component } from 'react';\r\nimport UrlParse from 'url-parse';\r\nimport { Layout, Breadcrumb, Typography, Row, Col, Modal } from 'antd';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\n\r\nimport StaffBasicForm from './components/StaffBasicForm';\r\nimport Loading from '../../../components/loading';\r\n\r\nconst { Header, Content } = Layout;\r\nconst { Title } = Typography;\r\n\r\nclass StaffBasicPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdisabled: true\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tconst { meta: prevMeta } = prevProps.pageProps;\r\n\t\tconst { meta } = this.props.pageProps;\r\n\t\tif (meta && meta !== prevMeta) {\r\n\t\t\tconst alertOptions = {\r\n\t\t\t\ttype: meta.code === 200 ? 'success' : 'error',\r\n\t\t\t\t...(meta.code === 40399 && { timeout: 0 })\r\n\t\t\t};\r\n\t\t\tthis.props.alert.show(meta.message, alertOptions);\r\n\t\t\tthis.props.resetMeta();\r\n\t\t}\r\n\t}\r\n\r\n\tshowForm(staff) {\r\n\t\tconst { onSubmit } = this.props;\r\n\t\tconst { loadingSubmit } = this.props.pageProps;\r\n\t\treturn (\r\n\t\t\t<div className=\"main-content\">\r\n\t\t\t\t<Row justify=\"space-around\">\r\n\t\t\t\t\t<StaffBasicForm \r\n\t\t\t\t\t\tstaff={staff}\r\n\t\t\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\t\t\tloadingSubmit={loadingSubmit}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderCreateForm(settings) {\r\n\t\tconst { sections } = settings;\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Header\r\n\t\t\t\t\tclassName=\"breadcrumb-header\"\r\n\t\t\t\t\tstyle={{ backgroundColor: 'white' }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col span={21}>\r\n\t\t\t\t\t\t\t<Breadcrumb style={{ marginTop: '0.5rem'}}>\r\n\t\t\t\t\t\t\t\t{sections && sections.map(section => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Breadcrumb.Item key={section.key}>\r\n\t\t\t\t\t\t\t\t\t\t\t{section.link?\r\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-is-valid\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={section.onClick}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>{section.content}</a> : section.content\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Breadcrumb>\r\n\t\t\t\t\t\t\t<Title\r\n\t\t\t\t\t\t\t\tlevel={5}\r\n\t\t\t\t\t\t\t\tstyle={{ paddingTop: 10 }}\r\n\t\t\t\t\t\t\t>Create Staff</Title>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Header>\r\n\t\t\t\t<Content style={{ margin: '24px 16px 0', backgroundColor: 'white' }}>\r\n\t\t\t\t\t{this.showForm()}\r\n\t\t\t\t</Content>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\trenderUpdateForm() {\r\n\t\tconst { staff } = this.props.pageProps;\r\n\t\t\r\n\t\treturn(\r\n\t\t\tthis.showForm(staff)\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { location, history } = this.props;\r\n\t\tconst { loading } = this.props.pageProps;\r\n\r\n\t\tif (loading) {\r\n\t\t\treturn <Loading />;\r\n\t\t}\r\n\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst sections = [\r\n\t\t\t{ key: '/staff', content: 'Staff', link: true, onClick: () => history.push('/staffs') },\r\n\t\t\t{ key: 'Create', content: 'Create', active: true}\r\n\t\t];\r\n\t\tconst settings = {\r\n\t\t\tsections,\r\n\t\t\tlocation,\r\n\t\t\tquery\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{ query && query.id && this.renderUpdateForm() }\r\n\t\t\t\t{ !query.id && this.renderCreateForm(settings)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default compose(withAlert())(StaffBasicPage);","import { push } from 'connected-react-router';\r\nimport * as ActionTypes from '../constants/ActionTypes';\r\nimport API from '../helpers/api';\r\n\r\nexport function getStaffById(id) {\r\n\treturn async dispatch => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFF_BY_ID_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloading: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst response = await API.admin.users.getStaffById(id);\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.GET_STAFF_BY_ID_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst { staff } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.GET_STAFF_BY_ID_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tstaff\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport function onSubmit(fields) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst { staff } = getState().staffDetailsPageReducer;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SUBMIT_STAFF_REQUEST,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst body = {\r\n\t\t\tstaff: {\r\n\t\t\t\tpassword: 123456,\r\n\t\t\t\t...fields\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet response;\r\n\t\tif (staff._id) {\r\n\t\t\tbody.staff.updated_at = staff.updated_at;\r\n\t\t\tresponse = await API.admin.users.updateStaffById(staff._id, body);\r\n\t\t} else {\r\n\t\t\tresponse = await API.admin.users.createStaff(body);\r\n\t\t}\r\n\r\n\t\tif (response.meta.code !== 200) {\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ActionTypes.SUBMIT_STAFF_ERROR,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tloadingSubmit: false,\r\n\t\t\t\t\tmeta: response.meta\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst { staff: newStaff } = response.data;\r\n\t\tdispatch({\r\n\t\t\ttype: ActionTypes.SUBMIT_STAFF_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tloadingSubmit: false,\r\n\t\t\t\tmeta: response.meta,\r\n\t\t\t\tstaff: newStaff\r\n\t\t\t}\r\n\t\t});\r\n\t\tdispatch(push(`/staffs/id/basic?id=${newStaff._id}`));\r\n\t};\r\n}\r\n\r\nexport function navigateToListPage() {\r\n\treturn async dispatch => {\r\n\t\tdispatch(push('/staffs'));\r\n\t};\r\n};\r\n\r\nexport function resetPage() {\r\n\treturn async dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: ActionTypes.RESET_STAFF_DETAILS_PAGE\r\n\t\t})\r\n\t};\r\n};\r\n\r\nexport function resetMeta() {\r\n\treturn async dispatch => {\r\n\t\treturn dispatch({\r\n\t\t\ttype: ActionTypes.RESET_STAFF_DETAILS_PAGE_META\r\n\t\t})\r\n\t};\r\n};\r\n","import { connect } from 'react-redux';\r\nimport StaffBasicPage from './StaffBasicPage';\r\nimport { onSubmit, resetMeta } from '../../../actions/StaffDetailsPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tpageProps: state.staffDetailsPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tonSubmit(fields) {\r\n\t\tdispatch(onSubmit(fields));\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(StaffBasicPage);\r\n","import React, { Component } from 'react';\r\nimport UrlParse from 'url-parse';\r\nimport { Row } from 'antd';\r\n\r\nclass StaffTicketsPage extends Component {\r\n\r\n\tshowForm() {\r\n\t\treturn (\r\n\t\t\t<div className=\"main-content\">\r\n\t\t\t\t<Row justify=\"space-around\">\r\n\t\t\t\t\t<div> Tickets Page</div>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { location } = this.props;\r\n\t\t// const { query } = UrlParse(location.search, true);\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{this.showForm()}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default StaffTicketsPage;\r\n","import { connect } from 'react-redux';\r\nimport StaffTicketsPage from './StaffTicketsPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(StaffTicketsPage);\r\n","import React, { Component } from 'react';\r\nimport UrlParse from 'url-parse';\r\nimport { Layout, Breadcrumb, Typography, Row, Col, Modal } from 'antd';\r\nimport { compose } from 'redux';\r\nimport { withAlert } from 'react-alert';\r\n\r\nimport DetailMenu from '../../components/DetailMenu';\r\nimport StaffBasicPage from './StaffBasicPage';\r\nimport StaffTicketsPage from './StaffTicketsPage';\r\nconst { Header, Content } = Layout;\r\nconst { Title } = Typography;\r\n\r\nclass StaffDetailsPage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tstaff: {}\r\n\t\t};\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { location } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tthis.props.getStaffById(query.id);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.resetPage();\r\n\t}\r\n\r\n\tgetStaffDetailsPageComponent = () => {\r\n\t\tconst path = this.props.location.pathname.split('/');\r\n\t\tconst pathname = path[path.length-1];\r\n\r\n\t\tswitch(true) {\r\n\t\t\tcase (pathname === 'basic'):\r\n\t\t\t\treturn <StaffBasicPage {...this.props} />;\r\n\t\t\tcase (pathname === 'tickets'):\r\n\t\t\t\treturn <StaffTicketsPage {...this.props} />;\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.props.history.push('/staffs');\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { pageProps, location, history } = this.props;\r\n\t\tconst { query } = UrlParse(location.search, true);\r\n\t\tconst sections = [\r\n\t\t\t{ key: '/staff', content: 'Staff', link: true },\r\n\t\t\t{ key: 'Details', content: 'Details', active: true}\r\n\t\t];\r\n\t\tconst pageDetailTabs = [\r\n\t\t\t{ title: 'Basic', path: `/staffs/id/basic?id=${query.id}` },\r\n\t\t\t{ title: 'Tickets', path: `/staffs/id/tickets?id=${query.id}` }\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Header className=\"breadcrumb-header\" style={{ backgroundColor: 'white' }}>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col span={21}>\r\n\t\t\t\t\t\t\t<Breadcrumb style={{ marginTop: '0.5rem'}}>\r\n\t\t\t\t\t\t\t\t{sections && sections.map(section => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Breadcrumb.Item key={section.key}>\r\n\t\t\t\t\t\t\t\t\t\t\t{section.link?\r\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-is-valid\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={section.onClick}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>{section.content}</a> : section.content\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Breadcrumb>\r\n\t\t\t\t\t\t\t<Title\r\n\t\t\t\t\t\t\t\tlevel={5}\r\n\t\t\t\t\t\t\t\tstyle={{ paddingTop: 10 }}\r\n\t\t\t\t\t\t\t>Staff Detail</Title>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Header>\r\n\t\t\t\t<Content style={{ margin: '24px 16px 0', backgroundColor: 'white' }}>\r\n\t\t\t\t\t<DetailMenu\r\n\t\t\t\t\t\ttabs={pageDetailTabs}\r\n\t\t\t\t\t\tlocation={location}\r\n\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{this.getStaffDetailsPageComponent()}\r\n\t\t\t\t</Content>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default compose(withAlert())(StaffDetailsPage);\r\n","import { connect } from 'react-redux';\r\nimport StaffDetailsPage from './StaffDetailsPage';\r\nimport { getStaffById, navigateToListPage, onSubmit, resetPage, resetMeta } from '../../actions/StaffDetailsPage';\r\n\r\nconst mapsStateToProps = state => ({\r\n\tpageProps: state.staffDetailsPageReducer\r\n});\r\n\r\nconst mapsDispatchToProps = dispatch => ({\r\n\tgetStaffById(id) {\r\n\t\tdispatch(getStaffById(id));\r\n\t},\r\n\tnavigateToListPage() {\r\n\t\tdispatch(navigateToListPage());\r\n\t},\r\n\tonSubmit(fields) {\r\n\t\tdispatch(onSubmit(fields));\r\n\t},\r\n\tresetPage() {\r\n\t\tdispatch(resetPage());\r\n\t},\r\n\tresetMeta() {\r\n\t\tdispatch(resetMeta());\r\n\t}\r\n});\r\n\r\nexport default connect(\r\n\tmapsStateToProps,\r\n\tmapsDispatchToProps\r\n)(StaffDetailsPage);\r\n","import React, { Component } from 'react';\r\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\r\nimport AuthHelper from './helpers/auth';\r\n\r\n/* layouts */\r\nimport BasicLayout from './layouts/basic-layout';\r\nimport NavigationLayout from './layouts/navigation-layout';\r\n\r\n/* containers */\r\nimport LoginPage from './containers/LoginPage';\r\nimport LogoutPage from './containers/LogoutPage';\r\nimport UnauthorizedPage from './containers/UnauthorizedPage';\r\n\r\nimport CustomerForm from './containers/CustomerForm';\r\n\r\nimport RegisterPage from './containers/RegisterPage';\r\nimport ForgotPasswordPage from './containers/ForgotPasswordPage';\r\n\r\nimport TicketPage from './containers/TicketPage';\r\nimport SettingsPage from './containers/SettingsPage';\r\nimport StaffListPage from './containers/StaffListPage';\r\nimport DashboardPage from './containers/DashboardPage';\r\nimport ReportPage from './containers/ReportPage';\r\nimport MessengerIntegrationPage from './containers/Channels/MessengerIntegrationPage';\r\nimport MessengerSettingsPage from './containers/Channels/MessengerSettingsPage';\r\nimport SubscriptionPage from './containers/SubscriptionPage';\r\nimport StaffDetailsPage from './containers/StaffDetailsPage';\r\nimport StaffBasicPage from './containers/StaffDetailsPage/StaffBasicPage';\r\n\r\nconst routes = [\r\n\t{ path: '/unauthorized', exact: true, isPrivate: false, Layout: BasicLayout, layoutClass: 'narrow', Component: UnauthorizedPage },\r\n\t{ path: '/login', exact: true, isPrivate: false, Layout: BasicLayout, layoutClass: 'narrow', Component: LoginPage },\r\n\t{ path: '/logout', exact: true, isPrivate: false, Layout: BasicLayout, layoutClass: 'narrow', Component: LogoutPage },\r\n\t{ path: '/register', exact: true, isPrivate: false, Layout: BasicLayout, layoutClass: 'narrow', Component: RegisterPage },\r\n\t{ path: '/forgot-password', exact: true, isPrivate: false, Layout: BasicLayout, layoutClass: 'narrow', Component: ForgotPasswordPage },\r\n\t{ path: '/customer-form', exact: true, isPrivate: true, Layout: BasicLayout, layoutClass: 'narrow', Component: CustomerForm, forStaff: false },\r\n\r\n\t// Tickets\r\n\t{ path: '/tickets', exact: true, isPrivate: true, Layout: NavigationLayout, title: 'Tickets', layoutClass: 'narrow', Component: TicketPage, forStaff: true },\r\n\t// Settings\r\n\t{ path: '/settings', exact: true, isPrivate: true, Layout: NavigationLayout, title: 'Settings', layoutClass: 'narrow', Component: SettingsPage, forStaff: false },\r\n\t//StaffList\r\n\t{ path: '/staffs', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: StaffListPage, forStaff: false },\r\n\t//Dashboard\r\n\t{ path: '/dashboard', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: DashboardPage, forStaff: false },\r\n\t//Reports\r\n\t{ path: '/reports', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: ReportPage, forStaff: false },\r\n\t//Channels\r\n\t{ path: '/messenger-integration', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: MessengerIntegrationPage, forStaff: false },\r\n\t{ path: '/messenger-settings', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: MessengerSettingsPage, forStaff: false },\r\n\t//Subsciptions\r\n\t{ path: '/subscription', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: SubscriptionPage, forStaff: false },\r\n\t{ path: '/staffs/create', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: StaffBasicPage, forStaff: false },\r\n\t{ path: '/staffs/id/basic', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: StaffDetailsPage, forStaff: false },\r\n\t{ path: '/staffs/id/tickets', exact: true, isPrivate: true, Layout: NavigationLayout, title: ' ', layoutClass: 'narrow', Component: StaffDetailsPage, forStaff: false }\r\n];\r\n\r\nconst getLoginType = () => (localStorage.getItem('app') ? JSON.parse(localStorage.getItem('app')).type : '');\r\n\r\nfunction getRedirectedPath(location) {\r\n\tif (location.pathname.split('?')[0] === '/login' && location.pathname.split('?').length > 1) {\r\n\t\treturn location.pathname + location.search + location.hash;\r\n\t}\r\n\r\n\t// skip the redirection from these routes\r\n\tif (['/login', '/logout'].indexOf(location.pathname.split('?')[0]) !== -1) {\r\n\t\treturn '/login';\r\n\t}\r\n\treturn `/login?path=${location.pathname + location.search + location.hash}`;\r\n}\r\n\r\nconst PrivateRoute = ({ layout: Layout, layoutClass, component: Component, title, forStaff, ...rest }) => (\r\n\t<Route\r\n\t\t{...rest}\r\n\t\trender={props => {\r\n\t\t\tif (AuthHelper.isAuthenticated()) {\r\n\t\t\t\tconst type = getLoginType();\r\n\r\n\t\t\t\tif (!forStaff && type === 'staff') {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname: '/tickets',\r\n\t\t\t\t\t\t\t\tstate: { from: props.location }\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Layout\r\n\t\t\t\t\t\t\tcontainerClass={layoutClass}\r\n\t\t\t\t\t\t\ttitle={title}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t\t\t</Layout>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\tpathname: getRedirectedPath(props.location),\r\n\t\t\t\t\t\t\tstate: { from: props.location }\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}}\r\n\t/>\r\n);\r\n\r\nexport class Routes extends Component {\r\n\trender() {\r\n\t\tconst { location } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Switch location={location}>\r\n\t\t\t\t{routes.map(({ path, exact, isPrivate, Layout, layoutClass, Component, title, forStaff }) => {\r\n\t\t\t\t\tif (isPrivate) {\r\n\t\t\t\t\t\treturn <PrivateRoute\r\n\t\t\t\t\t\t\tkey={0}\r\n\t\t\t\t\t\t\tpath={path}\r\n\t\t\t\t\t\t\texact={exact}\r\n\t\t\t\t\t\t\tlayout={Layout}\r\n\t\t\t\t\t\t\tlayoutClass={layoutClass}\r\n\t\t\t\t\t\t\tcomponent={Component}\r\n\t\t\t\t\t\t\ttitle={title}\r\n\t\t\t\t\t\t\tforStaff={forStaff}\r\n\t\t\t\t\t\t       />;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\tkey={0}\r\n\t\t\t\t\t\t\t\tpath={path}\r\n\t\t\t\t\t\t\t\texact={exact}\r\n\t\t\t\t\t\t\t\trender={props => (\r\n\t\t\t\t\t\t\t\t\t<Layout\r\n\t\t\t\t\t\t\t\t\t\tcontainerClass={layoutClass}\r\n\t\t\t\t\t\t\t\t\t\tlocation={location}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t\t\t\t\t\t</Layout>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t\t\t<Route render={props => (AuthHelper.isAuthenticated() ? <Redirect to={'/tickets'} /> : <Redirect to={getRedirectedPath(props.location)} />)} />\r\n\t\t\t</Switch>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(Routes);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { ConnectedRouter } from 'connected-react-router';\r\nimport { Provider as AlertProvider } from 'react-alert';\r\nimport AlertTemplate from 'react-alert-template-basic';\r\nimport enTranslations from '@shopify/polaris/locales/en.json';\r\nimport { AppProvider } from '@shopify/polaris';\r\nimport WebFont from 'webfontloader';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport '@shopify/polaris/styles.css';\r\n// import './index.scss';\r\nimport './index.less';\r\nimport 'antd/dist/antd.css';\r\nimport store, { history } from './store';\r\nimport Routes from './routes';\r\n\r\nWebFont.load({\r\n\tgoogle: {\r\n\t\tfamilies: ['Libre Franklin:300,400,500', 'Roboto', 'sans-serif']\r\n\t}\r\n});\r\n\r\nconst alertOptions = {\r\n\tposition: 'bottom right',\r\n\ttimeout: 5000,\r\n\toffset: '30px',\r\n\ttransition: 'scale',\r\n\tcontainerStyle: {\r\n\t\tzIndex: 1001\r\n\t  }\r\n};\r\n\r\nconst colors = {\r\n\tprimary: '#006FBB'\r\n\t// secondary: '#DE3618'\r\n};\r\n\r\nReactDOM.render(\r\n\t<Provider store={store()}>\r\n\t\t<AppProvider \r\n\t\t\ti18n={enTranslations} \r\n\t\t\t// features={{newDesignLanguage: true}}\r\n\t\t\t// theme={{ colors }}\r\n\t\t>\r\n\t\t\t<AlertProvider\r\n\t\t\t\ttemplate={AlertTemplate}\r\n\t\t\t\t{...alertOptions}\r\n\t\t\t>\r\n\t\t\t\t<ConnectedRouter history={history}>\r\n\t\t\t\t\t<Routes />\r\n\t\t\t\t</ConnectedRouter>\r\n\t\t\t</AlertProvider>\r\n\t\t</AppProvider>\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router';\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nimport loginPageReducer from './LoginPage';\r\nimport registerPageReducer from './RegisterPage';\r\nimport forgotPasswordReducer from './ForgotPasswordPage';\r\nimport ticketPageReducer from './TicketPage';\r\nimport staffListReducer from './StaffList';\r\nimport settingsPageReducer from './SettingsPage';\r\nimport staffDetailsPageReducer from './StaffDetailsPage';\r\nimport messengerIntegrationPageReducer from './MessengerIntegrationPage';\r\nimport reportPageReducer from './ReportPage';\r\n\r\nexport default history =>\r\n\tcombineReducers({\r\n\t\tform: formReducer,\r\n\t\trouter: connectRouter(history),\r\n\t\tloginPageReducer,\r\n\t\tregisterPageReducer,\r\n\t\tforgotPasswordReducer,\r\n\t\tticketPageReducer,\r\n\t\tstaffListReducer,\r\n\t\tsettingsPageReducer,\r\n\t\tstaffDetailsPageReducer,\r\n\t\tmessengerIntegrationPageReducer,\r\n\t\treportPageReducer\r\n\t});"],"sourceRoot":""}